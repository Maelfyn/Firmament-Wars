(function(
	$,
	Math,
	document,
	location,
	TweenMax,
	TimelineMax,
	Power0,
	Power1,
	Power2,
	Power3,
	Power4,
	Back,
	Elastic,
	Bounce,
	SteppedEase,
	Circ,
	Expo,
	Sine,
	setTimeout,
	setInterval,
	clearTimeout,
	clearInterval,
	webkitRequestAnimationFrame,
	webkitCancelAnimationFrame,
	getComputedStyle,
	requestAnimationFrame,
	cancelAnimationFrame,
	window,
	Array,
	JSON,
	Date,
	Object,
	undefined
){
// ui.js

var ui = {
	defenseBonus: [1, 2, 3],
	defenseReductionAmount: [1, 3, 6],
	cannonDamage: function() {
		var cannonBonus = my.government === 'Monarchy' ? 2 : 0;
		return (2 + my.oBonus + cannonBonus) +'-'+ (4 + my.oBonus + cannonBonus) + lang[my.lang].damage;
	},
	cannonTooltip: function() {
		return lang[my.lang].fireCannons + ui.cannonDamage();
	},
	missileDamage: function() {
		return (7 + (my.oBonus * 2)) +'-'+ (12 + (my.oBonus * 2)) + lang[my.lang].damage;
	},
	missileTooltip: function() {
		return lang[my.lang].launchMissile + ui.missileDamage();
	},
	rushTooltip: function(ind) {
		return lang[my.lang].rush + '('+ ui.cultureBonus() +')';
	},
	defenseTooltip: function(ind) {
		return lang[my.lang].boostsTileDefenses + ui.defenseBonus[ind] + lang[my.lang].reducesWeaponsBy + ui.defenseReductionAmount[ind];
	},
	cultureBonus: function() {
		return (2 + ~~(my.cultureBonus / 50));
	},
	getTeamIcon: function(team) {
		return g.teamMode ? '<span class="diploTeam">'+ team +'</span>' : '';
	},
	updateTileInfo: function(tileId) {
		var t = game.tiles[tileId],
			flag = "blank.png",
			name = t.name;

		if (t.player === 0){
			flag = "Barbarian.jpg";
			if (t.units > 0){
				name = lang[my.lang].barbarianTribe;
			}
			else {
				name = lang[my.lang].uninhabited;
				flag = "blank.png";
			}
		}
		else {
			flag = t.flag;
			name = t.name;
			flag = flag.split('.')[0];
			flag = flag + ui.getFlagExt(flag);
		}
		// tileName and bars
		var o = {
			food: 0,
			culture: 0,
			production: 0,
			defense: 0
		};
		if (t.player){
			o.food = ~~(((t.food > 8 ? 8 : t.food) / 8) * 99);
			o.production = ~~(((t.production > 8 ? 8 : t.production) / 8) * 99);
			o.culture = ~~(((t.culture > 8 ? 8 : t.culture) / 8) * 99);
			o.defense = ~~((t.defense / 4) * 99);
		}
		var resources =
			'<span>' + t.food + '<img src="images/icons/food.png" class="fw-icon-sm"></span>'+
			'<span>' + t.production + '<img src="images/icons/production.png" class="fw-icon-sm"></span>'+
			'<span>' + t.culture + '<img src="images/icons/culture.png" class="fw-icon-sm"></span>'+
			'<span>' + t.defense + '<img src="images/icons/tile-defense.png" class="fw-icon-sm"></span>';
		// DOM.targetCapStar.style.display = t.capital ? 'inline' : 'none';
		DOM.targetNameWrap.innerHTML = name;
		DOM.targetResources.innerHTML = resources;
		DOM.targetFlag.src = 'images/flags/' + flag;


		if (t.player === my.player && my.tech.masonry) {
			var ind = t.defense - (t.capital ? 1 : 0);
			if (ind < 3) {
				// fortress present
				// console.info('buildCost ', ind, g.upgradeCost[ind], my.buildCost, g.upgradeCost[ind]);
				DOM.buildWord.textContent = lang[my.lang].defenseLabel[ind];
				DOM.buildCost.textContent = g.upgradeCost[ind];
				var tooltip = ui.defenseTooltip(ind);
				$('#upgradeTileDefense')
					.attr('title', tooltip)
					.tooltip('fixTitle')
					.tooltip('hide')
					.tooltip({
						animation: false,
						placement: 'bottom',
						container: 'body'
					});
			}
			// actions panel
		}
		action.setBuildButton();
		animate.target();
	},
	getDiploRow: function(p) {
		var account = p.cpu ? lang[my.lang].difficulties[p.difficulty] : p.account,
			icon = lobby.governmentIcon(p),
			color = game.player[p.player].playerColor;

		var str =
		'<div id="diplomacyPlayer' + color + '" class="diplomacyPlayers alive pb'+ color +'">'+
			// bg
			'<div class="diplo-pipe pbar'+ color +'"></div>'+
			'<img src="images/flags/'+ p.flagSrc +'" class="diplo-flag no-select">'+
			// row 1
			'<div class="diplo-data-col"' +
				'<div>'+
					'<div class="nowrap">'+ icon + account +'</div>' +
					'<div class="nowrap">'+ ui.getTeamIcon(p.team) + p.nation + '</div>'+
				'</div>'+
				// row 2
			'</div>' +

		'</div>';
		return str;
	},
	getPlayersByTileRank: function() {
		var arr = [0,0,0,0,0,0,0,0,0];
		game.tiles.forEach(function(t) {
			t.player && arr[t.player]++;
		});
		return arr;
	},
	drawDiplomacyPanel: function() {
		var strArr = [],
			p,
			i = 0,
			len = game.player.length,
			arr = ui.getPlayersByTileRank();

		ui.currentLoser = 99;
		arr.forEach(function(v, loop) {
			if (loop) {
				if (v && v < ui.currentLoser) {
					ui.currentLoser = v;
				}
			}
		});

		for (; i<len; i++){
			p = game.player[i];
			if (p.account && arr[i]){
				p.flagArr = p.flag.split("."),
				p.flagShort = p.flagArr[0],
				p.flagSrc = p.flag;

				while (strArr[arr[i]] !== undefined) {
					arr[i]++;
				}
				strArr[arr[i]] = ui.getDiploRow(p);
			}
		}
		document.getElementById('diplomacy-body').innerHTML = strArr.reverse().join("");
	},
	currentLoser: 0,
	resizeWindow: function() {
		g.view === 'game' && worldMap[0].applyBounds();
		g.screen.resizeMap();
	},
	windowDefault: 'window-full-screen',
	initWindow: function() {
		var size = localStorage.getItem('window-size');
		if (size === null) {
			localStorage.setItem('window-size', ui.windowDefault);
			size = ui.windowDefault;
		}
		ui.setWindow(size);
	},
	setWindow: function(size) {
		if (app.isApp) {
			var gui = require('nw.gui'),
				win = gui.Window.get();
			// ??????? reasons
			setTimeout(function() {
				if (size === 'window-full-screen') {
					!win.isFullscreen && win.enterFullscreen();
				}
				else if (size === 'window-1920-1080') {
					win.isFullscreen && win.leaveFullscreen();
					win.resizeTo(1920, 1080);
					win.maximize();
				}
				else if (size === 'window-1600-900') {
					win.isFullscreen && win.leaveFullscreen();
					win.resizeTo(1600, 900);
				}
				else if (size === 'window-1360-768') {
					win.isFullscreen && win.leaveFullscreen();
					win.resizeTo(1360, 768);
				}
				else if (size === 'window-1280-720') {
					win.isFullscreen && win.leaveFullscreen();
					win.resizeTo(1280, 720);
				}
				else {
					// just in case do this
					size = 'window-full-screen';
					!win.isFullscreen && win.enterFullScreen();
				}
				// always do this
				$("#current-window-size").text(lang[my.lang][g.camel(size)]);
				localStorage.setItem('window-size', size);
			}, 100);
		}
	},
	click: 'click',
	showTarget: function(e, hover, skipOldTgtUpdate){
		if (e.id === undefined){
			e.id = 'land0';
		}
		if (typeof e === 'object'){
			var tileId = e.id.slice(4)*1;
			var d = game.tiles[tileId];
			var cacheOldTgt = my.tgt;
			if (!hover){
				if (cacheOldTgt !== tileId){
					my.tgt = tileId;
					animate.selectTile(cacheOldTgt, tileId);
				}
			}
			// animate targetLine on hover
			if (hover && tileId !== my.tgt){
				my.targetLine[4] = DOM['unit' + tileId].getAttribute('x')*1 - 10;
				my.targetLine[5] = DOM['unit' + tileId].getAttribute('y')*1 - 10;
				// draw straight line because it's close?
				var straightLine = "M " + my.targetLine[0] +","+ my.targetLine[1] + " "
								+ my.targetLine[4] +","+ my.targetLine[5],
					totalCoordDiff = 0;
				totalCoordDiff += Math.abs(my.targetLine[0] - my.targetLine[4]);
				totalCoordDiff += Math.abs(my.targetLine[1] - my.targetLine[5]);
				my.targetLine[2] = (my.targetLine[0] + my.targetLine[4]) / 2;
				my.targetLine[3] = ((my.targetLine[1] + my.targetLine[5]) / 2) - 100;
				var arcLine = "M " + my.targetLine[0] +","+ my.targetLine[1] +
							" Q " + my.targetLine[2] +" "+ my.targetLine[3] + " "
							+ my.targetLine[4] +" "+ my.targetLine[5];
				// set path data for shadow
				TweenMax.set(DOM.targetLineShadow, {
					visibility: 'visible',
					attr: {
						d: straightLine
					}
				});
				// set path data for line
				TweenMax.set([DOM.targetLine, DOM.targetLineBorder], {
					visibility: 'visible',
					attr: {
						d: totalCoordDiff > 300 ? arcLine : straightLine
					}
				});
				/*
				TweenMax.to([DOM.targetLine, DOM.targetLineBorder, DOM.targetLineShadow], .5, {
				  	startAt: { drawSVG: '0%' },
				  	drawSVG: '100%'
				});
				 */

				TweenMax.set([DOM.arrowhead, DOM.arrowheadBorder], {
					visibility: 'hidden'
				});
				TweenMax.set(DOM.targetLineBorder, {
					stroke: g.color[game.player[my.player].playerColor]
				});
				TweenMax.to([
					DOM.targetLine,
					DOM.targetLineBorder,
					DOM.targetLineShadow], .2, {
				  	startAt: {
				  		drawSVG: '0%'
					},
				  	drawSVG: '100%',
					onComplete: function() {
						TweenMax.set([DOM.arrowhead, DOM.arrowheadBorder], {
							visibility: 'visible'
						});
						TweenMax.to([DOM.targetLine, DOM.targetLineShadow], .5, {
							startAt: {
								strokeDasharray: '31,1',
								strokeDashoffset: 0,
							},
							strokeDashoffset: -32,
							repeat: -1,
							force3D: true,
							ease: Linear.easeNone
						});
						// fade in the black border
						TweenMax.to(DOM.targetLineBorder, .5, {
							stroke: '#000'
						});
					}
				});
				TweenMax.set(DOM.targetCrosshair, {
					fill: '#00dd00',
					visibility: 'visible',
					x: my.targetLine[4] - 255,
					y: my.targetLine[5] - 257,
					transformOrigin: '50% 50%'
				})
				TweenMax.to(DOM.targetCrosshair, 1, {
					startAt: { scale: .35 },
					force3D: true,
					scale: .175,
					repeat: -1,
					ease: Power4.easeOut
				});
				TweenMax.to(DOM.targetCrosshair, 1, {
					startAt: { opacity: 1 },
					force3D: true,
					opacity: 0,
					repeat: -1,
					ease: Power2.easeIn
				});
			}
			// tile data
			if (!skipOldTgtUpdate){
				my.lastTgt = cacheOldTgt;
			}
			ui.updateTileInfo(tileId);
		} else {
			my.attackOn = false;
			my.attackName = '';
		}
	},
	/*
	targetBars: function(o){
		var spacing = 8;
		var str = 
			'<line class="targetBars targetBarsFood" opacity="'+ (o.food ? 1 : 0) +'" x1="1%" x2="'+ o.food +'%" y1="'+ o.yPos +'" y2="'+ o.yPos +'" />';
			o.yPos += spacing;
			str += '<line class="targetBars targetBarsProduction" opacity="'+ (o.production ? 1 : 0) +'" x1="1%" x2="'+ o.production +'%" y1="'+ o.yPos +'" y2="'+ o.yPos +'" />';
			o.yPos += spacing;
			str += '<line class="targetBars targetBarsCulture" opacity="'+ (o.culture ? 1 : 0) +'"x1="1%" x2="'+ o.culture +'%" y1="'+ o.yPos +'" y2="'+ o.yPos +'" />';
			o.yPos += spacing;
			str += '<line class="targetBars targetBarsDefense" opacity="'+ (o.defense ? 1 : 0) +'"x1="1%" x2="'+ o.defense +'%" y1="'+ o.yPos +'" y2="'+ o.yPos +'" />';
		return str;
	},
	*/
	transformYear: function(tick){
		var foo = tick >= 40 ? ' A.D.' : ' B.C.',
			year = 0;
		if (tick <= 40){
			year = 4000 - (tick * 100);
		} else if (tick <= 60){
			year = 0 + ((tick - 40) * 50);
		} else if (tick <= 80){
			year = 1000 + ((tick - 60) * 25);
		} else if (tick <= 120){
			year = 1500 + ((tick - 80) * 10);
		} else if (tick <= 170){
			year = 1900 + ((tick - 120) * 2);
		} else {
			year = 2000 + ((tick - 170) * 1);
		}
		return year + foo;
	},
	setCurrentYear: function(tick){
		DOM.currentYear.textContent = ui.transformYear(tick);
	},
	setTileUnits: function(i){
		var unitVal = game.tiles[i].capital ?
			'<tspan class="unit-star">\t&#10028;</tspan>' + ~~game.tiles[i].units :
			~~game.tiles[i].units;
		DOM['unit' + i].innerHTML = game.tiles[i].units === 0
			? "" : unitVal;
		TweenMax.to(DOM['unit' + i], .5, {
			startAt: {
				visibility: 'visible',
			},
			opacity: 1,
			ease: Power4.easeIn
		});
		/*ui.setUnitVisibility(i);
		ui.updateAdjacentTileVisibility(i);*/
	},
	updateAdjacentTileVisibility: function(i) {
		/*game.tiles[i].adj.forEach(function(v) {
			var adjacent = game.isMineOrAdjacent(v);
			TweenMax.to(DOM['unit' + v], .5, {
				startAt: {
					visibility: adjacent ? 'visible' : 'hidden'
				},
				opacity: adjacent ? 1 : 0
			});
			game.tiles[v].units & TweenMax.set(DOM['land' + v], {
				filter: adjacent ? '' : 'url(#darken)'
			});
		});*/
	},
	setUnitVisibility: function(i) {
		// player visibility logic
		TweenMax.set(DOM['unit' + i], {
			startAt: {
				fill: '#ffffff',
				visibility: game.tiles[i].units ? 'visible' : 'hidden'
			},
			opacity: 1
		});
		/*
		game.tiles[i].units & TweenMax.set(DOM['land' + i], {
			filter: adjacent ? '' : 'url(#darken)'
		});*/
	},
	pngFlags: ['Ohio', 'Nepal'],
	isFlagPng: function(flag) {
		return this.pngFlags.indexOf(flag) > -1;
	},
	getFlagExt: function(flag) {
		return this.pngFlags.indexOf(flag) > -1 ? '.png' : '.jpg';
	}
};
function checkMobile(){
	var x = false;
	if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) x = true;
	return x;
};
// browser/environment checks
var isXbox = /Xbox/i.test(navigator.userAgent),
    isPlaystation = navigator.userAgent.toLowerCase().indexOf("playstation") >= 0,
    isNintendo = /Nintendo/i.test(navigator.userAgent),
    isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0,
    isFirefox = typeof InstallTrigger !== 'undefined',
    isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0,
    isChrome = !!window.chrome && !isOpera,
    isMSIE = /*@cc_on!@*/ false,
    isMSIE11 = !!navigator.userAgent.match(/Trident\/7\./);
// browser dependent
(function(){
	if (isMSIE || isMSIE11){
		//alert("Firmament Wars does not support Internet Explorer. Consider using Chrome or Firefox for an enjoyable experience.");
		//window.stop();
		if (x === null){
			void 0;
		}
		$("head").append('<style> text { font-family: Verdana; stroke-width: 0; stroke: #000; fill: #fff; } .unit{ font-size: 26px; } </style>');
	} else if (isSafari){
		//alert("Firmament Wars does not support Safari. Consider using Chrome or Firefox for an enjoyable experience.");
		//window.stop();
		if (x === null){
			void 0;
		}
		$("head").append('<style> text { fill: #ffffff; stroke: none; stroke-width: 0px; } </style>');
	}
	setTimeout(function(){
		$("script").remove();
	}, 1000);
	ui.initWindow();
})();


function gameDefeat(){
	new Audio('sound/shotgun2.mp3');
	$.ajax({
		type: "GET",
		url: app.url + "php/gameDefeat.php"
	}).done(function(data){
		void 0;
		var msg = '';
		if (data.ceaseFire){
			msg =
			'<p>'+ lang[my.lang].armistice +'</p>\
			<div>'+ lang[my.lang].gameArmistice +'</div>\
			<div id="ceaseFire" class="endBtn">\
				<div class="modalBtnChild">'+ lang[my.lang].ceaseFire +'</div>\
			</div>';
		}
		else if (data.gameDone){
			msg =
			'<p>'+ lang[my.lang].defeat +'</p>\
			<div>'+ lang[my.lang].gameDefeat +'</div>';
			if (g.showSpectateButton){
				msg +=
				'<div id="spectate" class="endBtn">\
					<div class="modalBtnChild">'+ lang[my.lang].spectate +'</div>\
				</div>';
			}
			msg += '<div id="endWar" class="endBtn">\
				<div class="modalBtnChild">'+ lang[my.lang].concede +'</div>\
			</div>';
		}
		if (msg){
			triggerEndGame(msg);
		}
	}).fail(function(data){
		void 0;
	});
}


function gameVictory(){
	new Audio('sound/sniper0.mp3');
	var count = 0;
	(function repeat(){
		$.ajax({
			type: "POST",
			url: app.url + "php/gameVictory.php",
			data: {
				juggernautValid: action.isJuggernautValid(),
			}
		}).done(function(data){
			var msg = '';
			void 0;
			if (data.ceaseFire){
				msg =
				'<p>'+ lang[my.lang].armistice +'</p>\
				<div>'+ lang[my.lang].gameArmistice +'</div>\
				<div id="ceaseFire" class="endBtn">\
					<div class="modalBtnChild">'+ lang[my.lang].ceaseFire +'</div>\
				</div>';
				audio.play('shotgun2');
			}
			else if (data.gameDone){
				msg =
				'<p>'+ lang[my.lang].congratulations +'</p>\
				<div>'+ lang[my.lang].gameVictory +'</div>\
				<div id="endWar" class="endBtn">\
					<div class="modalBtnChild">'+ lang[my.lang].victory +'</div>\
				</div>';
				g.victory = true;
			}
			if (msg){
				triggerEndGame(msg, 1);
			}
		}).fail(function(data){
			void 0;
		});
	})();
}
function triggerEndGame(msg, victory){
	// $("body, #gameWrap").off('click mousedown keydown keyup keypress');
	g.gameDuration = ~~((Date.now()- ((sessionStorage.getItem('gameDuration') * 1))) / 1000);
	$("#chat-input-open, #chat-input-wrap").remove();
	window.onbeforeunload = null;
	setTimeout(function(){
		// allow for last update to occur for spectators
		g.over = 1;
	}, 1500);
	stats.get();
	new Image('images/FlatWorld90.jpg');
	setTimeout(function(){
		var e = document.getElementById('victoryScreen');
		e.innerHTML = msg;
		e.style.display = 'block';
		if (victory){
			audio.play('sniper0');
		} else {
			audio.play('shotgun2');
		}
		$("#endWar").on(ui.click, function(){
			$("#endWar").off();
			g.view = 'stats';
			TweenMax.to('#gameWrap', .05, {
				alpha: 0,
				onComplete: function(){
					$("#ui2-head, #diplomacy-ui, #chat-input-open, #chat-ui, #chat-input-wrap, #hud, #worldWrap, #victoryScreen").remove();
					stats.show();
				}
			});
		});
		$("#ceaseFire").on(ui.click, function(){
			location.reload();
		});
		$("#spectate").on(ui.click, function(e){
			$("#victoryScreen, #ui2, #resourceBody, #targetWrap").remove();
			document.getElementById('surrender').style.display = "none";
			document.getElementById('exitSpectate').style.display = "inline";
			g.spectateStatus = 1;
		});
		$("#exitSpectate").on(ui.click, function(){
			$(this).off(ui.click);
			stats.get();
			TweenMax.to('#diplomacy-ui', 1, {
				alpha: 0,
				onComplete: function(){
					stats.show();
				}
			});
		});
	}, 2500);
};
function testMap() {
	game.tiles.forEach(function(v, i) {
		if (!v.adj.length) {
			TweenMax.set(DOM['land' + i], {
				stroke: "#0f0",
				strokeWidth: 3
			});
		}
	});
	g.map.tileNames.forEach(function(v, i) {
		if (v === 'Nangis') {
			TweenMax.set(DOM['land' + i], {
				stroke: "#0f0",
				strokeWidth: 3
			});
		}
	});
	setTimeout(function() {
		testMap();
	}, 1000);
}
function testNames() {
	g.map.tileNames.forEach(function(v, i) {
		if (v === 'XXXXXXXX') {
			TweenMax.set(DOM['land' + i], {
				stroke: "#0f0",
				strokeWidth: 3
			});
		}
	})
}

// lang.js
var lang = {
	updateIndexHtml: function() {
		// innerHTML elements that need to be populated
		[
			'howToPlay',
			'play-now-btn',
			'create',
			'createTeamBtn',
			'joinPrivateGameBtn',
			'createRankedBtn',
			'joinRankedGame',
			'toggleNation',
			'leaderboardBtn',
			'gameTableName',
			'gameTableMap',
			'gameTableType',
			'friend-status',
			'add-friend',
			'ignore-status',
			'ignore-user',
			'who-account',
			'whisper-account',
			'change-channel',
			'get-help',
			'brokenNet',
			'optionsHeader',
			'musicVolume',
			'soundVolume',
			'bibleMode',
			'windowSize',
			'current-window-size',
			'window-full-screen',
			'window-1920-1080',
			'window-1600-900',
			'window-1360-768',
			'window-1280-720',
			'reset-game',
			'exit-game',
			'versionSpan',
			'leaderboardRankedBtn',
			'leaderboardFfaBtn',
			'leaderboardTeamBtn',
			'setNationName',
			'submitNationName',
			'setNationFlag',
			'lobbyRankedMatch',
			'lobbyGameNameLabel',
			'lobbyGamePasswordLabel',
			'lobbyGameModeLabel',
			'lobbyGameMapLabel',
			'lobbyMaxPlayersLabel',
			'startGame',
			'cancelGame',
			'confirmSurrenderPrompt',
			'canceSurrenderButtonCancel',
			'canceSurrenderButtonConfirm',
			'hotkey-ui',
			'createGame',
			'createGameHead',
			'createRankedGameHead',
			'createGameNameLabel',
			'createGamePasswordLabel',
			'createGameMaxPlayerLabel',
			'createGameMapLabel',
			'privateGameNameLabel',
			'privateGamePasswordLabel',
			'joinPrivateGameBtnConfirm',
			'cancelGame',
			'cancelGame',
			'cancelGame',
			'cancelGame',
			'cancelGame',
			'cancelGame',
			'cancelGame',
			'joinPrivateGameBtn',
			'abAttack',
			'abSplitAttack',
			'abDeploy',
			'abRush',
			'abBuild',
			'abCannons',
			'abMissile',
			'abNuke',
			'abResearch',
			'abMasonry',
			'abConstruction',
			'abEngineering',
			'abGunpowder',
			'abRocketry',
			'abAtomic',
			'abFuture',
			'reserveLabel',
			'troopsLabel',
			'hud',
			'foodMilestoneLabel',
			'scienceMilestoneLabel',
			'cultureMilestoneLabel',
			'updateNationBtn',
		].forEach(function(v) {
			document.getElementById(v).innerHTML = lang[my.lang][_.camelCase(v)];
		});
		// titles/tooltips
		[
			'hide-ui',
			'toggle-flags',
			'hotkeys',
			'gameOptions',
			'surrender',
			'exitSpectate',
			'energy-timer-base',
			'currentYear',
			'energyWrap',
			'foodWrap',
			'scienceWrap',
			'cultureWrap',
			'generalWrap',
			'tacticianWrap',
			'troop-flex',
			'foodBonusTitle',
			'foodMilestoneTitle',
			'scienceBonusTitle',
			'scienceMilestoneTitle',
			'cultureBonusTitle',
			'cultureMilestoneTitle',
			'attack',
			'splitAttack',
			'deploy',
			'rush',
			'upgradeTileDefense',
			'launchNuke',
			'researchMasonry',
			'researchConstruction',
			'researchEngineering',
			'researchGunpowder',
			'researchRocketry',
			'researchAtomicTheory',
			'researchFutureTech',
			'options',
		].forEach(function(v) {
			document.getElementById(v).title = lang[my.lang][_.camelCase(v)];
		})

	},
	english: {
		resetGame: 'Reset Game',
		updateNationBtn: 'Done',
		playerColor: 'Player Color',
		team: 'Team',
		damage: ' damage',
		hudAttack: 'Attack: Select Target',
		hudSplitAttack: 'Split Attack: Select Target',
		hudFireCannons: 'Fire Cannons',
		hudLaunchMissile: 'Launch Missile',
		hudLaunchNuke: 'Launch Nuclear Weapon',
		resourceUiWidth: '22rem',
		selectTarget: 'Select Target',
		reserveLabel: 'Reserve',
		troopsLabel: 'Troops',
		youHaveJoined: 'You have joined the game: ',
		startingGame: "Starting game in ",
		to: 'To ',
		whispers: ' whispers: ',
		joinedChannel: "You have joined channel: ",
		selectTeam: 'Select Team',
		selectPlayerColor: 'Select Player Color',
		difficulties: {
			'Very Easy': 'Very Easy',
			Easy: 'Easy',
			Normal: 'Normal',
			Hard: 'Hard',
			'Very Hard': 'Very Hard',
			Mania: 'Mania',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotism',
			Monarchy: 'Monarchy',
			Democracy: 'Democracy',
			Fundamentalism: 'Fundamentalism',
			Fascism: 'Fascism',
			Republic: 'Republic',
			Communism: 'Communism',
			Random: 'Random'
		},
		random: 'Random',
		abAttack: "Attack",
		abSplitAttack: "Split Attack",
		abDeploy: "Deploy Troops",
		abRush: "Rush Troops",
		abBuild: "Build",
		abCannons: "Fire Cannons",
		abMissile: "Launch Missile",
		abNuke: "Launch Nuke",
		abResearch: "Research",
		abMasonry: "Masonry",
		abConstruction: "Construction",
		abEngineering: "Engineering",
		abGunpowder: "Gunpowder",
		abRocketry: "Rocketry",
		abAtomic: "Atomic Theory",
		abFuture: "Future Tech",
		hostLeft: "The host has left the lobby.",
		needTwoPlayers: "You need two players to start a game! Wait for players to join or add a computer player to begin.",
		failedToLoad: "Failed to load game data.",
		flagChanged: "Your nation's flag is now: ",
		rankedSearch: "Searching for ranked games...",
		noRankedFound: "No ranked games found!<br>Try creating a ranked game instead.",
		notScience: "Not enough science!",
		needTwoUnits: "You need at least 2 troops to move or attack!",
		maxUnits: "That territory has the maximum number of units!",
		friendlyFire: "Friendly fire! That's your teammate!",
		notEnoughEnergy: 'Not enough energy!',
		notYourTile: 'You do not own that tile.',
		noTroopsAvailable: "No troops available for deployment!",
		badGameName: "Game name must be at least 4-32 characters.",
		notEnoughPlayers: "Game must have 2-8 players.",
		newNationName: "Your new nation name is: ",
		verifyingSteam: "Verifying Steam Credentials...",
		steamNotFound: "Unable to detect Steam. Please launch Steam and try again!",
		logoutSuccess: "Logout successful",
		logoutFailed: "Logout failed",
		ribbonTitle: ['',
			'National Combat Medal',
			'Tactical Nuke Recognition Award',
			'Good Conduct Award',
			"Patriot's Service Ribbon",
			'Civic Service Ribbon',//5
			'Bronze Meritorious Medal',
			'Bronze Service Medal',
			'Bronze Expeditionary Medal',
			'Bronze Cross',
			'Silver Cross',//10
			'Golden Cross',
			'Platinum Cross',
			'Revolutionary Cause Award',
			'Strategic Warfare Award',
			'Combat Service Award', //15
			'Combat Gallantry Award',
			"Stalwart Conqueror's Medal",
			"Dictator's Sword",
			"King's Regalia",
			"Archon's Scales",//20
			'Divine Covenant',
			"Emperor's Fasces",
			"Eagle's Branch",
			"Comrade's Sickle",
			'Golden Expeditionary Medal',//25
			'Golden Meritorious Medal',
			'Golden Service Medal',
			"Champion's Medal",
			"Conqueror's Medal",
			"Commander's Medal",//30
			"Intrepid Heroism Award",
			'Global War Expeditionary Medal',
			'Silver Expeditionary Medal',
			'Silver Meritorious Medal',
			'Silver Service Medal',//35
			"Engineer's Service Ribbon",
		],
		ribbonDescription: ['', // 0
			'Established your nation',
			'Destroyed a fortress with a nuclear weapon',
			'Added two comrades to your friend list',
			'Updated your national flag',
			"Updated your nation's name",//5
			'Won 10 ranked games',
			'Won 10 team games',
			'Won 10 free for all games',
			'Achieved 1800+ rating',
			'Achieved 2100+ rating',//10
			'Achieved 2400+ rating',
			'Achieved 2700+ rating',
			'Great Revolutionary conquered a tile with 100+ units', //13
			'Win a game with a 2-to-1 kill ratio',
			'Won 10 games in a row', // 15
			'Won 25 games in a row',
			'Conquered a tile with a fortress',// 17
			"Won a game under Despotism",
			'Won a game as a Monarchy',
			'Won a game as a Democracy',//20
			'Won a game under Fundamentalism',
			'Won a game under Fascism',
			'Won a game as a Republic',
			'Won a game under Communism',
			'Won 500 free for all games',//25
			'Won 500 ranked games',
			'Won 500 team games',
			"Hit top #10 on the ranked leaderboard",
			"Hit top #100 on the ranked leaderboard",
			"Hit top #1000 on the ranked leaderboard",//30
			"Defeated the Juggernaut",
			'Win an 8-player free for all game',
			'Won 100 free for all games',
			'Won 100 ranked games',
			'Won 100 team games',//35
			'Build a fortress',
		],
		gameNameNotValid: "Game name is not valid!",
		congratulations: "Congratulations!",
		gameVictory: "Your campaign for global domination has succeeded!",
		victory: "Victory",
		armistice: "Armistice!",
		gameArmistice: "The campaign has been suspended!",
		ceaseFire: "Cease Fire",
		defeat: "Defeat!",
		gameDefeat: "Your campaign for world domination has failed!",
		concede: "Concede Defeat",
		spectate: "Spectate",
		defeatIn: "Defeat in ",
		statOverview: "Overview",
		statUnits: "Units",
		statStructures: "Structures",
		statWeapons: "Weapons",
		statResources: "Resources",
		tabUnits: "Units",
		tabStructures: "Structures",
		tabWeapons: "Weapons",
		tabResources: "Resources",
		tabTotalScore: "Total Score",
		tabEarned: "Earned",
		tabDeployed: "Deployed",
		tabKilled: "Killed",
		tabLost: "Lost",
		tabBunkers: "Bunkers",
		tabWalls: "Walls",
		tabFortresses: "Fortresses",
		tabCannons: "Cannons",
		tabMissiles: "Missiles",
		tabNukes: "Nukes",
		tabEnergy: "Energy",
		tabScience: "Science",
		tabFood: "Food",
		tabCulture: "Culture",
		gameDuration: "Game Duration ",
		endGame: "End Game",
		joinPrivateGameBtnConfirm: "Join Game",
		createGameHead: "Free For All Game",
		createRankedGameHead: "Ranked Game",
		createGameNameLabel: "Game Name",
		createGamePasswordLabel: "Password (optional)",
		createGameMaxPlayerLabel: "Maximum Players:",
		createGameMapLabel: "Map",
		createGame: "Create Game",
		createTeamGameHeadLabel: "Team Game",
		noRankedGamesFound: "No ranked games found!<br>Try creating a ranked game instead.",
		privateGameNameLabel: "Game Name",
		privateGamePasswordLabel: "Password",
		confirmSurrenderPrompt: "Surrender? Are You Sure?",
		canceSurrenderButtonCancel: "Cancel",
		canceSurrenderButtonConfirm: "Surrender",
		hotkeyUi: "[V] Toggle the User Interface",
		options: "[ESC] Options",
		researchMasonry: "[Y] Research masonry to unlock bunkers\r\n(20 seconds)",
		researchConstruction: "[O] Research construction to unlock walls\r\n(30 seconds)",
		researchEngineering: "[E] Research engineering to unlock fortresses\r\n(45 seconds)",
		researchGunpowder: "[G] Research gunpowder to unlock cannons\r\n(25 seconds)",
		researchRocketry: "[K] Research rocketry to unlock missiles\r\n(40 seconds)",
		researchAtomicTheory: "[T] Research atomic theory to unlock nuclear weapons\r\n(60 seconds)",
		researchFutureTech: "[F] Research future technology\r\n(90 seconds)",
		attack: "[A] Attack with all troops",
		splitAttack: "[S] Attack with half of your troops",
		deploy: "[D] Deploy reserve troops to a tile",
		rush: "[R] Rush troops from your citizenry. Boosted by culture bonus ",
		defenseLabel: ['Bunker', 'Wall', 'Fortress'],
		boostsTileDefenses: '[B] Boosts tile defenses +',
		reducesWeaponsBy: ' and reduces weapon damage by ',
		fireCannons: '[C] Fire cannons at an adjacent tile. Boosted by Great Generals.\r\n',
		launchMissile: '[M] Launch a missile at any territory. Boosted by Great Generals.\r\n',
		launchNuke: "[N] Launch a nuclear weapon at any territory. Kills 80-99% of troops and destroys all structures.",
		foodBonusTitle: "Food Bonus",
		foodMilestoneTitle: "Food milestones produce reserve troops.",
		scienceBonusTitle: "Science Bonus",
		scienceMilestoneTitle: "Science is used to build structures, fire weapons, and research technology.",
		cultureBonusTitle: "Culture Bonus",
		cultureMilestoneTitle: "Culture milestones produce special rewards.",
		troopFlex: "Deploy troops to conquered territories",
		currentYear: "It's the current year!",
		energyWrap: "Energy is used to attack, move, deploy, and rush troops.",
		foodWrap: "Food milestones produce reserve troops",
		scienceWrap: "Science is used to build structures, weapons, and research technology.",
		cultureWrap: "Culture milestones produce special rewards",
		generalWrap: "Great Generals boost troop attack",
		tacticianWrap: "Great Tacticians boost troop defense",
		energyTimerBase: "Resources update at the end of each turn.",
		hideUi: "[V] Hide User Interface",
		toggleFlags: "Toggle Flags",
		hotkeys: "Hotkeys",
		gameOptions: "[ESC] Options",
		surrender: "Surrender",
		exitSpectate: "Exit Spectate",
		uninhabited: "Uninhabited",
		barbarianTribe: "Barbarian Tribe",
		Despotism: [
			'Free movement through own tiles',
			'Start with gunpowder',
			'Start with a bunker',
			'2x maximum army attack size',
		],
		Monarchy: [
			'+2 defense',
			'+1 culture from 2 food',
			'50% starting culture bonus',
			'+2 cannon damage',
		],
		Democracy: [
			'4x maximum troop deployment',
			'+3 reserve troops when you lose a tile',
			'50% starting science bonus',
			'Reduced culture milestone requirement',
		],
		Fundamentalism: [
			'Overrun: Instant win with 4x advantage',
			'Infiltration: -1 structure defense',
			'Fast growth: Reduced food milestone requirement',
			'+2 troop reward bonus',
		],
		Fascism: [
			'+1 attack',
			'+1 attack from tiles for each defensive structure',
			'+4 attack vs barbarians',
			'Bonus troop with each deployment',
		],
		Republic: [
			'+1 energy',
			'Combat medics heal 50% troops upon victory',
			'Start with masonry',
			'+50% plunder reward bonus from barbarians',
		],
		Communism: [
			'Start with a great person',
			'+1 science from 4 food',
			'Can deploy troops to uninhabited territory',
			'2x discovered reward bonus from barbarians',
		],
		removeCPU: 'Remove CPU',
		addCPU: 'Add CPU',
		lobbyRankedMatch: 'Ranked Match',
		lobbyGameNameLabel: 'Game Name',
		lobbyGamePasswordLabel: 'Password',
		lobbyGameModeLabel: 'Game Mode',
		lobbyGameMapLabel: 'Map',
		lobbyMaxPlayersLabel: 'Max Players',
		startGame: 'Start Game',
		cancelGame: 'Exit',
		setNationName: 'Nation Name',
		submitNationName: 'Update Nation Name',
		setNationFlag: 'National Flag',
		leaderboardRankedBtn: 'Ranked',
		leaderboardFfaBtn: 'Free For All',
		leaderboardTeamBtn: 'Team',
		playNowBtn: 'Play Now',
		create: 'Free For All',
		createTeamBtn: 'Team Game',
		joinPrivateGameBtn: 'Join Private Game',
		createRankedBtn: 'Create Ranked Match',
		joinRankedGame: 'Join Ranked Match',
		toggleNation: 'Configure Nation',
		leaderboardBtn: 'Leaderboard',
		gameTableName: 'Game Name',
		gameTableMap: 'Map',
		gameTableType: 'Type',
		friendStatus: 'Show Friend List',
		addFriend: 'Toggle Friend',
		ignoreStatus: 'Show Ignore List',
		ignoreUser: 'Ignore Account',
		whoAccount: 'Query Account',
		whisperAccount: 'Private Message',
		changeChannel: 'Change Channel',
		getHelp: 'Chat Commands',
		howToPlay: 'How to Play',
		brokenNet: 'Welcome to Broken.net!',
		optionsHeader: 'Options',
		musicVolume: 'Music Volume',
		soundVolume: 'Sound Effect Volume',
		bibleMode: 'Bible Mode',
		windowSize: 'Window Size',
		currentWindowSize: 'Full Screen',
		windowFullScreen: 'Full Screen',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Exit Game',
		versionSpan: 'Version ',
		foodMilestoneLabel: 'Food',
		scienceMilestoneLabel: 'Science',
		cultureMilestoneLabel: 'Culture',
	},
	russian: {
		resetGame: 'Сбросить игру',
		updateNationBtn: 'Готово',
		playerColor: 'Цвет игрока',
		team: 'команда',
		damage: ' наносить ущерб',
		hudAttack: 'Атака: выберите цель',
		hudSplitAttack: 'Сплит-атака: выберите цель',
		hudFireCannons: 'Пожарные пушки',
		hudLaunchMissile: 'Запустить ракету',
		hudLaunchNuke: 'Запуск ядерной бомбы',
		resourceUiWidth: '28rem',
		selectTarget: 'Выберите цель',
		reserveLabel: 'резерв',
		troopsLabel: 'войска',
		youHaveJoined: 'Вы присоединились к игре: ',
		startingGame: "Начало игры в ",
		to: 'к ',
		whispers: ' шепоты: ',
		joinedChannel: "Вы присоединились к каналу: ",
		selectTeam: 'Выбрать команду',
		selectPlayerColor: 'Выберите цвет игрока',
		difficulties: {
			'Very Easy': 'Очень просто',
			Easy: 'Легко',
			Normal: 'Нормальный',
			Hard: 'Жесткий',
			'Very Hard': 'Очень сложно',
			Mania: 'Мания',
			Juggernaut: 'Джаггернаут'
		},
		governments: {
			Despotism: 'Деспотизм',
			Monarchy: 'монархия',
			Democracy: 'демократия',
			Fundamentalism: 'Фундаментализм',
			Fascism: 'Фашизм',
			Republic: 'республика',
			Communism: 'Коммунизм',
			Random: 'случайный'
		},
		random: 'случайный',
		abAttack: "Атака",
		abSplitAttack: "Сплит-атака",
		abDeploy: "Развертывание войск",
		abRush: "Стремительные войска",
		abBuild: "строить",
		abCannons: "Пожарные пушки",
		abMissile: "Запустить ракету",
		abNuke: "Запуск ядерной бомбы",
		abResearch: "Исследование",
		abMasonry: "Каменная кладка",
		abConstruction: "строительство",
		abEngineering: "инженерия",
		abGunpowder: "Порох",
		abRocketry: "ракетная техника",
		abAtomic: "Атомная теория",
		abFuture: "Будущая техника",
		hostLeft: "Хозяин покинул лобби.",
		needTwoPlayers: "Вам нужно два игрока, чтобы начать игру! Подождите, пока игроки присоединятся или добавят компьютерный проигрыватель.",
		failedToLoad: "Не удалось загрузить данные игры.",
		flagChanged: "Флаг вашей страны теперь: ",
		rankedSearch: "Поиск ранжированных игр ...",
		noRankedFound: "Ничего не найдено!<br>Вместо этого попробуйте создать ранжированную игру.",
		notScience: "Недостаточно науки!",
		needTwoUnits: "Вам нужно как минимум 2 войска, чтобы двигаться или атаковать!",
		maxUnits: "Эта территория имеет максимальное количество единиц!",
		friendlyFire: "Дружественный огонь! Это ваш товарищ по команде!",
		notEnoughEnergy: 'Недостаточно энергии!',
		notYourTile: 'У вас нет этой плитки.',
		noTroopsAvailable: "Нет войск для развертывания!",
		badGameName: "Название игры должно быть не менее 4-32 символов.",
		notEnoughPlayers: "В игре должно быть 2-8 игроков.",
		newNationName: "Ваше имя новой нации: ",
		verifyingSteam: "Проверка парольных учетных данных ...",
		steamNotFound: "Не удалось обнаружить Steam. Запустите Steam и повторите попытку!",
		logoutSuccess: "Выход завершен",
		logoutFailed: "Ошибка выхода из системы",
		ribbonTitle: ['',
			'Национальная боевая медаль',
			'Тактическая награда за признание Nuke',
			'Награда за хорошее поведение',
			"патриот Сервисная лента",
			'гражданского Сервисная лента',//5
			'Бронзовая медаль',
			'Медаль Бронзовая служба',
			'Бронзовая экспедиционная медаль',
			'Бронзовый крест',
			'Серебряный крест',//10
			'Золотой Крест',
			'Платиновый крест',
			'Революционная причина',
			'Стратегическая война',
			'Награда за боевые заслуги', //15
			'Боевая награда',
			"Почетная медаль завоевателя",
			"Меч диктатора",
			"Королевские регалии",
			"Весы архонта",//20
			'Божественный завет',
			"Императорский топор",
			"орел Филиал",
			"Топорский серп",
			'Золотая экспедиционная медаль',//25
			'Золотая мерильная медаль',
			'Золотая медаль обслуживания',
			"Чемпионская медаль",
			"Медаль Завоевателя",
			"Медаль командира",//30
			"Премия за непревзойденную героизм",
			'Мировая военная экспедиционная медаль',
			'Серебряная экспедиционная медаль',
			'Серебряная медаль',
			'Серебряная медаль',//35
			"Техническая лента инженера",
		],
		ribbonDescription: ['', // 0
			'Учреждена ваша нация',
			'Разрушена крепость с ядерным оружием',
			'Добавлено два товарища в список друзей',
			'Обновлен ваш национальный флаг',
			"Обновлено название вашей страны",//5
			'Выиграл 10 ранжированных игр',
			'Выиграно 10 командных игр',
			'Выиграл 10 игр бесплатно для всех',
			'Достигнуто 1800+ оценок',
			'Достигнуто 2100+ оценок',//10
			'Достигнуто 2400+ оценок',
			'Достигнуто 2700+ оценок',
			'Великий революционер завоевал плитку с более 100 единицами', //13
			'Выиграйте игру с коэффициентом убийства 2 к 1',
			'Выиграл 10 игр подряд', // 15
			'Выиграл 25 игр подряд',
			'Завоевали плитку с крепостью',// 17
			"Выиграл игру под деспотизмом",
			'Выиграл игру как монархию',
			'Выиграл игру как демократия',//20
			'Выиграл игру под фундаментализмом',
			'Выиграл игру под фашизмом',
			'Выиграл игру как республика',
			'Выиграл игру под коммунизмом',
			'Выиграл 500 бесплатно для всех игр',//25
			'Выиграли 500 ранжированных игр',
			'Выиграно 500 командных матчей',
			"Хит top # 10 в рейтинге лидеров",
			"Хит top # 100 в рейтинге лидеров",
			"Хит top # 1000 в рейтинге лидеров",//30
			"Победил Джаггернаут",
			'Выиграйте 8-плеер бесплатно для всех',
			'Выиграно 100 бесплатных игр для всех',
			'Выиграли 100 ранжированных игр',
			'Выиграно 100 командных матчей',//35
			'Построить крепость',
		],
		gameNameNotValid: "Имя игры недействительно!",
		congratulations: "Поздравления!",
		gameVictory: "Ваша кампания за глобальное господство преуспела!",
		victory: "победа",
		armistice: "прекращение военных действий!",
		gameArmistice: "Кампания приостановлена!",
		ceaseFire: "Прекратить огонь",
		defeat: "Поражение!",
		gameDefeat: "Ваша кампания за мировое господство потерпела неудачу!",
		concede: "уступать поражение",
		spectate: "быть зрителем",
		defeatIn: "Поражение ",
		statOverview: "обзор",
		statUnits: "Единицы",
		statStructures: "сооружения",
		statWeapons: "оружие",
		statResources: "Ресурсы",
		tabUnits: "Единицы",
		tabStructures: "сооружения",
		tabWeapons: "оружие",
		tabResources: "Ресурсы",
		tabTotalScore: "Общий счет",
		tabEarned: "заработанный",
		tabDeployed: "развернутый",
		tabKilled: "убитый",
		tabLost: "Потерял",
		tabBunkers: "Бункеры",
		tabWalls: "стены",
		tabFortresses: "Крепости",
		tabCannons: "Пушки",
		tabMissiles: "Ракеты",
		tabNukes: "Ядерное оружие",
		tabEnergy: "энергии",
		tabScience: "Наука",
		tabFood: "питание",
		tabCulture: "культура",
		gameDuration: "Продолжительность игры ",
		endGame: "Конец игры",
		joinPrivateGameBtnConfirm: "Присоединиться к игре",
		createGameHead: "Бесплатные игры для всех",
		createRankedGameHead: "Рейтинг игры",
		createGameNameLabel: "Название игры",
		createGamePasswordLabel: "Пароль (необязательно)",
		createGameMaxPlayerLabel: "Максимальное количество игроков:",
		createGameMapLabel: "карта",
		createGame: "Создать игру",
		createTeamGameHeadLabel: "Командная игра",
		noRankedGamesFound: "Найденные игры не найдены!<br>Попробуйте создать ранжированную игру вместо.",
		privateGameNameLabel: "Название игры",
		privateGamePasswordLabel: "пароль",
		confirmSurrenderPrompt: "Сдаться? Ты уверен?",
		canceSurrenderButtonCancel: "Отмена",
		canceSurrenderButtonConfirm: "капитуляция",
		hotkeyUi: "Нажмите V, чтобы переключить пользовательский интерфейс.",
		options: "[ESC] Опции",
		researchMasonry: "[Y] Исследовательская кладка для разблокировки бункеров\r\n(20 секунд)",
		researchConstruction: "[O] Исследование строительства для разблокировки стен\r\n(30 секунд)",
		researchEngineering: "[E] Исследовательская разработка для разблокировки крепостей\r\n(45 секунд)",
		researchGunpowder: "[G] Исследовать порох, чтобы разблокировать пушки\r\n(25 секунд)",
		researchRocketry: "[K] Научно-исследовательская ракета для разблокировки ракет\r\n(40 секунд)",
		researchAtomicTheory: "[T] Исследование атомной теории для разблокировки ядерного оружия\r\n(60 секунд)",
		researchFutureTech: "[F] Исследование будущих технологий\r\n(90 секунд)",
		attack: "[A] Атака со всеми войсками",
		splitAttack: "[S] Атака с половиной ваших войск",
		deploy: "[D] Разверните резервные войска на плитку",
		rush: "[R] Выпустите войска из своих граждан. Повышенный бонус за культуру ",
		defenseLabel: ['бункерный', 'стена', 'Крепость'],
		boostsTileDefenses: '[B] Увеличивает защиту от плитки +',
		reducesWeaponsBy: ' и уменьшает урон от оружия ',
		fireCannons: '[C] Огненные пушки на соседней плитке. Подпитывается Великими Генералами.\r\n',
		launchMissile: '[M] Запустить ракету на любой территории. Подпитывается Великими Генералами.\r\n',
		launchNuke: "[N] Запустить ядерную руку на любой территории. Убивает 80-99% солдат и уничтожает все структуры.",
		foodBonusTitle: "Продовольственный бонус",
		foodMilestoneTitle: "Продовольственные вехи производят резервные войска.",
		scienceBonusTitle: "Научный бонус",
		scienceMilestoneTitle: "Наука используется для создания структур, огнестрельного оружия и исследовательских технологий.",
		cultureBonusTitle: "Культурный бонус",
		cultureMilestoneTitle: "Культурные вехи дают особые награды.",
		troopFlex: "Разверните войска на завоеванные территории",
		currentYear: "Это в текущем году!",
		energyWrap: "Энергия используется, чтобы атаковать, перемещать, развертывать и бросать войска.",
		foodWrap: "Продовольственные вехи производят резервные войска",
		scienceWrap: "Наука используется для создания структур, оружия и исследовательских технологий.",
		cultureWrap: "Культурные вехи дают особые награды",
		generalWrap: "Великие генералы повышают атаку войск",
		tacticianWrap: "Великие тактики повышают оборону войск",
		energyTimerBase: "Обновление ресурсов в конце каждого хода.",
		hideUi: "[V] Hide User Interface",
		toggleFlags: "Переключить флаги",
		hotkeys: "Клавиатурный",
		gameOptions: "[ESC] Опции",
		surrender: "капитуляция",
		exitSpectate: "Выход из зрительного зала",
		uninhabited: "необитаемый",
		barbarianTribe: "Племя варваров",
		Despotism: [
			'Свободное передвижение через собственные плитки',
			'Начать с пороха',
			'Начните с бункера',
			'2x максимальный размер атаки армии',
		],
		Monarchy: [
			'+2 защита',
			'+1 культура из 2 блюд',
			'50% старт бонуса культуры',
			'+2 повреждение пушки',
		],
		Democracy: [
			'4x максимальное развертывание войск',
			'+3 резервные войска, когда вы теряете плитку',
			'50% бонус к науке',
			'Требование о минимальном значении культуры',
		],
		Fundamentalism: [
			'перерасход: Мгновенная победа с 4-мя преимуществами',
			'инфильтрация: -1 защита структуры',
			'Быстрый рост: Требование о сокращении потребности в продовольствии',
			'+2 вознаграждение за награду',
		],
		Fascism: [
			'+1 атака',
			'+1 атака из плиток для каждой защитной структуры',
			'+4 атака против варваров',
			'Бонусный отряд с каждым развертыванием',
		],
		Republic: [
			'+1 энергия',
			'Боевые медики излечивают 50% солдат после победы',
			'Начать с кладки',
			'+50% грабительский бонус от варваров',
		],
		Communism: [
			'Начните с отличного человека',
			'+1 наука из 4 блюд',
			'Можно развернуть войска на необитаемой территории',
			'2x открыл бонус от варваров',
		],
		removeCPU: 'удалить компьютер',
		addCPU: 'добавить компьютер',
		lobbyRankedMatch: 'Рейтинг',
		lobbyGameNameLabel: 'Название игры',
		lobbyGamePasswordLabel: 'пароль',
		lobbyGameModeLabel: 'Игровой режим',
		lobbyGameMapLabel: 'карта',
		lobbyMaxPlayersLabel: 'Максимум игроков',
		startGame: 'Начать игру',
		cancelGame: 'Выход',
		setNationName: 'Название страны',
		submitNationName: 'Обновить имя страны',
		setNationFlag: 'Национальный флаг',
		leaderboardRankedBtn: 'Занимает',
		leaderboardFfaBtn: 'Бесплатно для всех',
		leaderboardTeamBtn: 'команда',
		playNowBtn: 'Играть сейчас',
		create: 'Бесплатно для всех',
		createTeamBtn: 'Командная игра',
		joinPrivateGameBtn: 'Присоединиться к частной игре',
		createRankedBtn: 'Создать ранжированный матч',
		joinRankedGame: 'Присоединиться к рейтингу',
		toggleNation: 'Настройка нации',
		leaderboardBtn: 'Лидеры',
		gameTableName: 'Название игры',
		gameTableMap: 'карта',
		gameTableType: 'Тип',
		friendStatus: 'Показать список друзей',
		addFriend: 'Переключить друга',
		ignoreStatus: 'Показать список игнорируемых',
		ignoreUser: 'Игнорировать аккаунт',
		whoAccount: 'Учетная запись',
		whisperAccount: 'Личное сообщение',
		changeChannel: 'Изменить канал',
		getHelp: 'Чат-команды',
		howToPlay: 'Как играть',
		brokenNet: 'Добро пожаловать в Broken.net!',
		optionsHeader: 'Опции',
		musicVolume: 'Объем музыки',
		soundVolume: 'Объем звукового эффекта',
		bibleMode: 'Режим Библии',
		windowSize: 'Размер окна',
		currentWindowSize: 'Полноэкранный',
		windowFullScreen: 'Полноэкранный',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Выход из игры',
		versionSpan: 'Версия ',
		foodMilestoneLabel: 'питание',
		scienceMilestoneLabel: 'Наука',
		cultureMilestoneLabel: 'культура',
	},
	schinese: {
		resetGame: '重置游戏',
		updateNationBtn: '完成',
		playerColor: '球员颜色',
		team: '球队',
		damage: ' 损伤',
		hudAttack: '攻击: 选择目标',
        hudSplitAttack: '分开进攻: 选择目标',
        hudFireCannons: '炮火覆盖',
        hudLaunchMissile: '发射导弹',
        hudLaunchNuke: '发射核炸弹',
		resourceUiWidth: '22rem',
		selectTarget: '选择目标',
		reserveLabel: '保留',
		troopsLabel: '部队',
		youHaveJoined: '你已经加入游戏: ',
		startingGame: "游戏即将开始于 ",
		to: '转到 ',
		whispers: ' 讯息: ',
		joinedChannel: "你已经加入频道: ",
		selectTeam: '选择队伍',
		selectPlayerColor: '选择玩家颜色',
		difficulties: {
			'Very Easy': '非常简单',
			Easy: '简单',
			Normal: '正常l',
			Hard: '困难',
			'Very Hard': '非常困难',
			Mania: '狂暴',
			Juggernaut: '巨兽'
		},
		governments: {
			Despotism: '专制',
			Monarchy: '君主制',
			Democracy: '民主制',
			Fundamentalism: '教旨主义',
			Fascism: '法西斯',
			Republic: '共和国',
			Communism: '共产主义',
			Random: '随机'
		},
		random: '随机',
		abAttack: "攻击",
		abSplitAttack: "分开进攻",
		abDeploy: "部署部队",
		abRush: "紧急征召",
		abBuild: "建造",
		abCannons: "炮火覆盖",
		abMissile: "发射导弹",
		abNuke: "发射核弹",
		abResearch: "研究",
		abMasonry: "土木工程",
		abConstruction: "建造",
		abEngineering: "工程设施",
		abGunpowder: "火药",
		abRocketry: "火箭发射技术",
		abAtomic: "原子理论",
		abFuture: "先进科技",
		hostLeft: "主机已经离开游戏",
		needTwoPlayers: "你需要两名玩家来开始游戏! 等待另一名玩家以启动游戏.",
		failedToLoad: "读取游戏存档失败",
		flagChanged: "你现在的势力旗帜是: ",
		rankedSearch: "搜寻排位赛...",
		noRankedFound: "未能找到合适的排位赛!<br>你可以试着自己建立一个房间",
		notScience: "研究点数不足!",
		needTwoUnits: "你需要至少两支部队才能移动或者攻击（每个地区必须有一支部队作为守备队）!",
		maxUnits: "该地区驻扎军队数量已经达到上限!",
		friendlyFire: "友军火力误伤! 那是你的队友!",
		notEnoughEnergy: '能量点不足!',
		notYourTile: '你尚未控制那个地块',
		noTroopsAvailable: "没有可部署的部队!",
		badGameName: "游戏名称必须位 4-32 个字符",
		notEnoughPlayers: "游戏必须拥有 2-8 名玩家",
		newNationName: "你的新势力名字是 ",
		verifyingSteam: "校检 Steam 链接...",
		steamNotFound: "无法连接到STEAM，请重新启动STEAM!",
		logoutSuccess: "成功注销",
		logoutFailed: "注销失败",
		ribbonTitle: ['',
			'势力战役勋章',
			'战术核弹勋章',
			'动员组织勋章',
			"爱国者绶带",
			'公民服役绶带',//5
			'青铜荣誉勋章',
			'青铜服役勋章',
			'青铜远征勋章',
			'青铜十字勋章',
			'银十字勋章',//10
			'金十字勋章',
			'白金十字勋章',
			'革命勋章',
			'战争策略家勋章',
			'战斗服役勋章', //15
			'作战勇敢勋章',
			"伟大征服者勋章",
			"独裁者之剑",
			"国王之冠",
			"执政官之秤",//20
			'神圣协议',
			"帝皇法西斯",
			"老鹰后裔",
			"同志，镰刀！",
			'黄金远征勋章',//25
			'黄金荣誉勋章l',
			'黄金荣誉勋章',
			"冠军勋章",
			"征服者勋章",
			"指挥官勋章",//30
			"无畏英雄奖励",
			'全球远征勋章l',
			'白银远征勋章',
			'白银荣誉勋章l',
			'白银服役勋章',//35
			"工程师参站绶带",
		],
		ribbonDescription: ['', // 0
			'创建你自己的势力',
			'用核武器摧毁一处要塞',
			'在好友列表中添加两位共产主义同志',
			'选择势力旗帜',
			"选择势力名称",//5
			'赢得10场排位赛',
			'应当10场小组赛',
			'赢得是10场FFA比赛',
			'段位达到1800+ ',
			'段位达到2100+ ',//10
			'段位达到2400+ ',
			'段位达到2700+ ',
			'用100+的部队占领一个地块', //13
			'以 2比1的伤亡比例获得胜利',
			'赢得10场胜利', // 15
			'赢得25场胜利',
			'夺取敌方一处由要塞控制的地块',// 17
			"专制制度下获得一场胜利",
			'作为君主赢得一场胜利',
			'民主制度下获得一场胜利',//20
			'教旨主义下获得一场胜利',
			'法西斯主义下获得一场胜利',
			'作为共和国赢得一场胜利',
			'共产主义制度下获得一场胜利',
			'赢得500场FFA游戏',//25
			'赢得500场排位赛',
			'赢得500场小组赛',
			"成为排位赛前十名",
			"成为排位赛前一百名",
			"成为排位赛前一千名",//30
			"打败巨兽",
			'赢得一场有八名玩家的FFA比赛',
			'赢得100场FFA比赛',
			'赢得100场排位赛',
			'赢得100场小组赛',//35
			'建造要塞',
		],
		gameNameNotValid: "游戏名称不适合!",
		congratulations: "恭喜!",
		gameVictory: "你已经是世界的统治者!",
		victory: "胜利",
		armistice: "停战!",
		gameArmistice: "战争会暂停一段时间!",
		ceaseFire: "停火",
		defeat: "失败!",
		gameDefeat: "你统治世界的野心破灭了!",
		concede: "承认失败",
		spectate: "观战",
		defeatIn: "失败于 ",
		statOverview: "概况",
		statUnits: "部队",
		statStructures: "建筑",
		statWeapons: "武器",
		statResources: "资源",
		tabUnits: "部队",
		tabStructures: "建筑",
		tabWeapons: "武器",
		tabResources: "资源",
		tabTotalScore: "总分",
		tabEarned: "获得",
		tabDeployed: "部署",
		tabKilled: "歼敌",
		tabLost: "损失",
		tabBunkers: "碉堡",
		tabWalls: "围墙",
		tabFortresses: "要塞",
		tabCannons: "火炮",
		tabMissiles: "导弹",
		tabNukes: "核弹",
		tabEnergy: "能量点",
		tabScience: "研究点",
		tabFood: "食物点",
		tabCulture: "文化点",
		gameDuration: "游戏时间 ",
		endGame: "结束游戏",
		joinPrivateGameBtnConfirm: "加入游戏",
		createGameHead: "允许所有类型的游戏",
		createRankedGameHead: "排位赛",
		createGameNameLabel: "房间名字",
		createGamePasswordLabel: "密码(可选)",
		createGameMaxPlayerLabel: "最大玩家数目:",
		createGameMapLabel: "地图",
		createGame: "创建游戏",
		createTeamGameHeadLabel: "小组赛",
		noRankedGamesFound: "未找到排位赛!<br>T试着自己创建一个房间",
		privateGameNameLabel: "房间名字",
		privateGamePasswordLabel: "密码",
		confirmSurrenderPrompt: "投降? 确定吗?",
		canceSurrenderButtonCancel: "取消",
		canceSurrenderButtonConfirm: "投降",
		hotkeyUi: "按V来转换UI",
		options: "[ESC] 选项",
		researchMasonry: "[Y] 研究土木工程来解锁碉堡\r\n(20 秒)",
		researchConstruction: "[O] 研究建造来解锁围墙\r\n(30 秒)",
		researchEngineering: "[E]研究工程设施来解锁要塞\r\n(45 秒)",
		researchGunpowder: "[G]研究火药来解锁获要塞\r\n(25 秒)",
		researchRocketry: "[K] 研究火箭技术来解锁导弹\r\n(40 秒)",
		researchAtomicTheory: "[T] 研究原子学理论来解锁核武器\r\n(60 秒)",
		researchFutureTech: "[F] 研究先进科技\r\n(90 秒)",
		attack: "[A] 用所选全部部队进攻",
		splitAttack: "[S] 用所选一半部队进攻",
		deploy: "[D]部署部队到地块上",
		rush: "[R] 从你的民众中动员部队，文化点对此有影响 ",
		// upgradeTileDefense: "[B] 碉堡增强该地块防御1点",
		defenseLabel: ['碉堡', '围墙', '要塞'],
		boostsTileDefenses: '[B]增加地块防御',
		reducesWeaponsBy: ' 并且减少敌军武器杀伤 ',
		fireCannons: '[C]  向某地块进行炮火覆盖， 名将会对此有加成。\r\n',
		launchMissile: '[M] 向某地块发射导弹， 名将会对此有加成。\r\n',
		launchNuke: "[N] 向某地块发射核弹，这会击杀 80-99% 的敌军部队并且摧毁所有建筑 。",
		foodBonusTitle: "食物点加成",
		foodMilestoneTitle: "部队需要食物.",
		scienceBonusTitle: "研究点加成",
		scienceMilestoneTitle: "研究点用于建造建筑，生产火器和研究科技。",
		cultureBonusTitle: "文化点加成",
		cultureMilestoneTitle: "文化点会提供特别奖励",
		troopFlex: "部署部队以略地千里",
		currentYear: "正是此时!",
		energyWrap: "能量点用于攻击，移动，部署和紧急征召部队。",
		foodWrap: "部队需要食物",
		scienceWrap: "研究点用于建造建筑，生产火器和研究科技。",
		cultureWrap: "文化点会提供特别奖励",
		generalWrap: "名将会增加部队攻击力",
		tacticianWrap: "大战略家增加部队防御力",
		energyTimerBase: "每回合结束后点数会增加",
		hideUi: "[V]隐藏用户界面",
		toggleFlags: "变换旗帜",
		hotkeys: "热键",
		gameOptions: "[ESC] 选项",
		surrender: "投降",
		exitSpectate: "退出观战",
		uninhabited: "无人区",
		barbarianTribe: "蛮族部落",
		Despotism: [
			'己方领土自由移动',
			'火药科技开局',
			'开局拥有一碉堡',
			'攻击力量翻倍',
		],
		Monarchy: [
			'+2防御',
			'2食物点加一文化点',
			'文化点获取只有50% ',
			'+2 火炮杀伤',
		],
		Democracy: [
			'4倍陆军部署上限',
			'每失去要给地块获得三支部队',
			'研究点获取只有50% ',
			'减少文化点消耗',
		],
		Fundamentalism: [
			'立即胜利: I取得所有方面 4倍优势后立刻胜利',
			'容易被渗透: -1建筑防御',
			'快速增长: 减少食物消耗',
			'+2 部队奖励奖金',
		],
		Fascism: [
			'+1 攻击',
			'发起攻击的地块每个防御建筑会提供额外的1点攻击力加成',
			'同蛮族作战时+4攻击',
			'部署部队会有奖励',
		],
		Republic: [
			'+1 能量点',
			'胜利后会治愈百分之五十的部队',
			'开局拥有土木工程科技',
			'同蛮族作战时+50%  掠夺奖励',
		],
		Communism: [
			'开局时拥有一个伟大领袖',
			'每4食物点加1研究点',
			'能在无人区部署部队',
			'同蛮族作战2x 发现奖励',
		],
		removeCPU: '移除 CPU',
		addCPU: '增加 CPU',
		lobbyRankedMatch: '排位赛',
		lobbyGameNameLabel: '游戏名称',
		lobbyGamePasswordLabel: '密码',
		lobbyGameModeLabel: '游戏模式',
		lobbyGameMapLabel: '地图',
		lobbyMaxPlayersLabel: '最大玩家数目',
		startGame: '开始游戏',
		cancelGame: '退出',
		setNationName: '势力名称',
		submitNationName: '选择势力名称',
		setNationFlag: '势力旗帜',
		leaderboardRankedBtn: '段位',
		leaderboardFFABtn: '开放',
		leaderboardTeamBtn: '仅队伍',
		playNowBtn: '现在游玩（单机）',
		create: '开放',
		createTeamBtn: '小组赛',
		joinPrivateGameBtn: '加入私人游戏',
		createRankedBtn: '建立排位赛房间',
		joinRankedGame: '加入排位赛',
		toggleNation: '势力配置',
		leaderboardBtn: '记分板',
		gameTableName: '房间名字',
		gameTableMap: '地图',
		gameTableType: '类型',
		friendStatus: '显示好友列表',
		addFriend: '下一个好友',
		ignoreStatus: '展示已忽略列表',
		ignoreUser: '忽略账户',
		whoAccount: '举报账号',
		whisperAccount: '私信',
		changeChannel: '更换频道',
		getHelp: '聊天指令',
		howToPlay: '怎么玩',
		brokenNet: '欢迎来到 Broken.net!',
		optionsHeader: '选项',
		musicVolume: '音乐音量',
		soundVolume: '效果音量',
		bibleMode: '圣经模式',
		windowSize: '窗口化',
		currentWindowSize: '全屏',
		windowFullScreen: ' 全屏',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: '退出游戏',
		versionSpan: '版 ',
		foodMilestoneLabel: '餐饮',
		scienceMilestoneLabel: '科学',
		cultureMilestoneLabel: '文化',
	},
	german: {
		resetGame: 'Spiel Zurücksetzen',
		updateNationBtn: 'Erledigt',
		playerColor: 'Spielerfarbe',
		team: 'Mannschaft',
		damage: ' Beschädigung',
		hudAttack: 'Attacke: Ziel auswählen',
		hudSplitAttack: 'Split-Angriff: Ziel auswählen',
		hudFireCannons: 'Feuerkanonen',
		hudLaunchMissile: 'Raketen starten',
		hudLaunchNuke: 'Startet die Atombombe',
		resourceUiWidth: '26rem',
		selectTarget: 'Ziel auswählen',
		reserveLabel: 'Reservieren',
		troopsLabel: 'Truppen',
		youHaveJoined: 'Du bist dem Spiel beigetreten: ',
		startingGame: "Spielstart in ",
		to: 'Zu ',
		whispers: ' flüstert: ',
		joinedChannel: "Du bist dem Kanal beigetreten: ",
		selectTeam: 'Team auswählen',
		selectPlayerColor: 'Wählen Sie Spielerfarbe',
		difficulties: {
			'Very Easy': 'Sehr leicht',
			Easy: 'Einfach',
			Normal: 'Normal',
			Hard: 'Hart',
			'Very Hard': 'Sehr schwer',
			Mania: 'Manie',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotismus',
			Monarchy: 'Monarchie',
			Democracy: 'Demokratie',
			Fundamentalism: 'Fundamentalismus',
			Fascism: 'Faschismus',
			Republic: 'Republik',
			Communism: 'Kommunismus',
			Random: 'Zufällig'
		},
		random: 'Zufällig',
		abAttack: "Attacke",
		abSplitAttack: "Split-Angriff",
		abDeploy: "Bereitstellen von Truppen",
		abRush: "Rush-Truppen",
		abBuild: "Bauen",
		abCannons: "Feuerkanonen",
		abMissile: "Raketen starten",
		abNuke: "Startet die Atombombe",
		abResearch: "Forschung",
		abMasonry: "Mauerwerk",
		abConstruction: "Konstruktion",
		abEngineering: "Ingenieurwesen",
		abGunpowder: "Schießpulver",
		abRocketry: "Raketentechnik",
		abAtomic: "Atomtheorie",
		abFuture: "Zukunft Tech",
		hostLeft: "Der Gastgeber hat die Lobby verlassen.",
		needTwoPlayers: "Du brauchst zwei Spieler, um ein Spiel zu beginnen! Warten Sie, bis die Spieler dem Computer beitreten oder einen Computer hinzufügen.",
		failedToLoad: "Laden der Spieldaten fehlgeschlagen.",
		flagChanged: "Die Fahne deiner Nation ist jetzt: ",
		rankedSearch: "Suche nach Ranglisten-Spielen...",
		noRankedFound: "Keine Ranglistenspiele gefunden!<br>Versuchen Sie stattdessen, ein Ranglisten-Spiel zu erstellen.",
		notScience: "Nicht genug Wissenschaft!",
		needTwoUnits: "Du brauchst mindestens 2 Truppen, um dich zu bewegen oder anzugreifen!",
		maxUnits: "Dieses Gebiet hat die maximale Anzahl von Einheiten!",
		friendlyFire: "Teambeschuss! Das ist dein Teamkollege!",
		notEnoughEnergy: 'Nicht genug Energie!',
		notYourTile: 'Du besitzt diese Kachel nicht.',
		noTroopsAvailable: "Keine Truppen für den Einsatz verfügbar!",
		badGameName: "Der Spielname muss mindestens 4-32 Zeichen lang sein.",
		notEnoughPlayers: "Das Spiel muss 2-8 Spieler haben.",
		newNationName: "Ihr neuer Nationenname ist: ",
		verifyingSteam: "Steam-Anmeldedaten überprüfen...",
		steamNotFound: "Steam kann nicht gefunden werden. Bitte starte Steam und versuche es erneut!",
		logoutSuccess: "Abmeldung erfolgreich",
		logoutFailed: "Abmeldung fehlgeschlagen",
		ribbonTitle: ['',
			'Nationale Kampfmedaille',
			'Tactical Nuke Anerkennungspreis',
			'Preis für gutes Benehmen',
			"Service-Band des Patrioten",
			'Bürgerservice-Band',//5
			'Bronze Verdienstmedaille',
			'Bronze-Service-Medaille',
			'Bronze-Expeditionsmedaille',
			'Bronze Kreuz',
			'Silberkreuz',//10
			'Goldenes Kreuz',
			'Platin-Kreuz',
			'Preis für revolutionäre Zwecke',
			'Strategischer Kriegsführungspreis',
			'Kampfdienst-Auszeichnung', //15
			'Galanterie Auszeichnung',
			"Gewaltige Eroberer-Medaille",
			"Schwert des Diktators",
			"Königs Regalia",
			"Archons Skalen",//20
			'Göttlicher Bund',
			"Kaisers Fasces",
			"Adler Zweig",
			"Genosse Sichel",
			'Goldene Expeditionsmedaille',//25
			'Goldene verdienstvolle Medaille',
			'Goldene Service-Medaille',
			"Meistermedaille",
			"Eroberer-Medaille",
			"Kommandeursmedaille",//30
			"Unerschrockener Heldentumspreis",
			'Expeditionsmedaille des Weltkrieges',
			'Silberne Expeditionsmedaille',
			'Silberne verdienstvolle Medaille',
			'Silberne Service-Medaille',//35
			"Techniker-Serviceband",
		],
		ribbonDescription: ['', // 0
			'Begründete deine Nation',
			'Zerstöre eine Festung mit einer Atomwaffe',
			'Habe zwei Kameraden zu deiner Freundesliste hinzugefügt',
			'Ihre Nationalflagge aktualisiert',
			"Aktualisierte den Namen deiner Nation",//5
			'Gewann 10 Ranglistenspiele',
			'Gewann 10 Mannschaftsspiele',
			'Gewann 10 gratis für alle Spiele',
			'Erreicht 1800+ Bewertung',
			'Erreicht 2100+ Bewertung',//10
			'Erreicht 2400 + Rating',
			'Erreichte 2700+ Bewertung',
			'Große Revolutionäre eroberten eine Kachel mit 100+ Einheiten', //13
			'Gewinne ein Spiel mit einem 2-zu-1-Tötungsverhältnis',
			'Gewann 10 Spiele in Folge', // 15
			'Gewann 25 Spiele in Folge',
			'Eroberte eine Fliese mit einer Festung',// 17
			"Gewann ein Spiel unter Despotismus",
			'Gewann ein Spiel als Monarchie',
			'Gewann ein Spiel als Demokratie',//20
			'Gewann ein Spiel unter Fundamentalismus',
			'Gewann ein Spiel unter Faschismus',
			'Gewann ein Spiel als eine Republik',
			'Gewann ein Spiel unter dem Kommunismus',
			'Gewann 500 gratis für alle Spiele',//25
			'Gewann 500 Ranglistenspiele',
			'Gewann 500 Mannschaftsspiele',
			"Treffe die Top 10 auf der Rangliste",
			"Treffe die Top 100 auf der Rangliste",
			"Treffe die Top # 1000 auf der Rangliste",//30
			"Besiege den Juggernaut",
			'Gewinne ein 8-Spieler-FFA-Spiel',
			'Gewann 100 gratis für alle Spiele',
			'Gewann 100 Ranglistenspiele',
			'Gewann 100 Mannschaftsspiele',//35
			'Baue eine Festung',
		],
		gameNameNotValid: "Der Spielername ist nicht gültig!",
		congratulations: "Herzliche Glückwünsche!",
		gameVictory: "Ihre Kampagne für die globale Vorherrschaft ist gelungen!",
		victory: "Sieg",
		armistice: "Waffenstillstand!",
		gameArmistice: "Die Kampagne wurde ausgesetzt!",
		ceaseFire: "Feuer einstellen",
		defeat: "Niederlage!",
		gameDefeat: "Ihre Kampagne für die Weltherrschaft ist gescheitert!",
		concede: "Concede Niederlage",
		spectate: "Zuschauen",
		defeatIn: "Niederlage in ",
		statOverview: "Überblick",
		statUnits: "Einheiten",
		statStructures: "Strukturen",
		statWeapons: "Waffen",
		statResources: "Ressourcen",
		tabUnits: "Einheiten",
		tabStructures: "Strukturen",
		tabWeapons: "Waffen",
		tabResources: "Ressourcen",
		tabTotalScore: "Gesamtpunktzahl",
		tabEarned: "Verdient",
		tabDeployed: "Bereitgestellt",
		tabKilled: "Getötet",
		tabLost: "Hat verloren",
		tabBunkers: "Bunkers",
		tabWalls: "Wände",
		tabFortresses: "Festungen",
		tabCannons: "Kanonen",
		tabMissiles: "Raketen",
		tabNukes: "Kernwaffen",
		tabEnergy: "Energie",
		tabScience: "Wissenschaft",
		tabFood: "Essen",
		tabCulture: "Kultur",
		gameDuration: "Spieldauer ",
		endGame: "Spiel beenden",
		joinPrivateGameBtnConfirm: "Spiel beitreten",
		createGameHead: "Kostenlos für alle Spiele",
		createRankedGameHead: "Ranglistenspiel",
		createGameNameLabel: "Spielname",
		createGamePasswordLabel: "Passwort (optional)",
		createGameMaxPlayerLabel: "Maximale Spielerzahl:",
		createGameMapLabel: "Karte",
		createGame: "Spiel erstellen",
		createTeamGameHeadLabel: "Teamspiel",
		noRankedGamesFound: "Keine Ranglistenspiele gefunden!<br>Versuchen Sie stattdessen, ein Ranglisten-Spiel zu erstellen.",
		privateGameNameLabel: "Spielname",
		privateGamePasswordLabel: "Passwort",
		confirmSurrenderPrompt: "Kapitulation? Bist du sicher?",
		canceSurrenderButtonCancel: "Stornieren",
		canceSurrenderButtonConfirm: "Kapitulation",
		hotkeyUi: "[V] Wechseln Sie die Benutzeroberfläche",
		options: "[ESC] Optionen",
		researchMasonry: "[Y] Erforsche Mauerwerk, um Bunker freizuschalten\r\n(20 Sekunden)",
		researchConstruction: "[O] Erforschen Sie die Konstruktion, um Wände zu öffnen\r\n(30 Sekunden)",
		researchEngineering: "[E] Forschungstechnik zum Freischalten von Festungen\r\n(45 Sekunden)",
		researchGunpowder: "[G] Erforsche Schießpulver, um Kanonen freizuschalten\r\n(25 Sekunden)",
		researchRocketry: "[K] Research Raketentechnik Raketen zu entsperren\r\n(40 Sekunden)",
		researchAtomicTheory: "[T] Forschung Atomtheorie, um Atomwaffen freizuschalten\r\n(60 Sekunden)",
		researchFutureTech: "[F] Forschung Zukunftstechnologie\r\n(90 Sekunden)",
		attack: "[A] Angriff mit allen Truppen",
		splitAttack: "[S] Greife mit der Hälfte deiner Truppen an",
		deploy: "[D] Setze Reservetruppen auf eine Kachel um",
		rush: "[R] Rush Truppen aus Ihrer Bürgerschaft. Angetrieben durch Kulturbonus ",
		defenseLabel: ['Bunker', 'Mauer', 'Festung'],
		boostsTileDefenses: '[B] Verstärkt die Verteidigung der Fliese +',
		reducesWeaponsBy: ' und reduziert Waffenschaden um ',
		fireCannons: '[C] Feuerkanonen auf einer angrenzenden Fliese. Von großen Generälen beflügelt.\r\n',
		launchMissile: '[M] Starte eine Rakete auf ein beliebiges Territorium. Von großen Generälen beflügelt.\r\n',
		launchNuke: "[N] Startet eine Atomwaffe in jedem Gebiet. Tötet 80-99% der Truppen und zerstört alle Strukturen.",
		foodBonusTitle: "Essensbonus",
		foodMilestoneTitle: "Nahrungsmittelmeilensteine produzieren Reservetruppen.",
		scienceBonusTitle: "Wissenschaftsbonus",
		scienceMilestoneTitle: "Wissenschaft wird verwendet, um Strukturen zu bauen, Feuerwaffen und Forschungstechnologie.",
		cultureBonusTitle: "Kulturbonus",
		cultureMilestoneTitle: "Kulturmeilensteine erzeugen besondere Belohnungen.",
		troopFlex: "Setze Truppen in eroberte Gebiete ein",
		currentYear: "Es ist das laufende Jahr!",
		energyWrap: "Energie wird verwendet, um Truppen anzugreifen, zu bewegen, einzusetzen und zu stürzen.",
		foodWrap: "Nahrungsmittelmeilensteine produzieren Reservetruppen",
		scienceWrap: "Wissenschaft wird verwendet, um Strukturen, Waffen und Forschungstechnologie zu bauen.",
		cultureWrap: "Kulturmeilensteine erzeugen besondere Belohnungen",
		generalWrap: "Große Generäle verstärken Truppenangriffe",
		tacticianWrap: "Große Taktiker verstärken die Truppenabwehr",
		energyTimerBase: "Ressourcen werden am Ende jeder Runde aktualisiert.",
		hideUi: "[V] Benutzerschnittstelle ausblenden",
		toggleFlags: "Flaggen umschalten",
		hotkeys: "Hotkeys",
		gameOptions: "[ESC] Optionen",
		surrender: "Kapitulation",
		exitSpectate: "Spectate verlassen",
		uninhabited: "Unbewohnt",
		barbarianTribe: "Barbarischer Stamm",
		Despotism: [
			'Freizügigkeit durch eigene Fliesen',
			'Beginne mit Schießpulver',
			'Fang mit einem Bunker an',
			'2x maximale Angriffsstärke der Armee',
		],
		Monarchy: [
			'+2 Verteidigung',
			'+1 Kultur aus 2 Lebensmitteln',
			'50% Start Kulturbonus',
			'+2 Kanonenschaden',
		],
		Democracy: [
			'4x maximale Truppentrage',
			'+3 Reserviere Truppen, wenn du ein Plättchen verlierst',
			'50% Start Wissenschaft Bonus',
			'Reduzierte Meilensteinanforderung für die Kultur',
		],
		Fundamentalism: [
			'Overrun: Sofortiger Gewinn mit 4x Vorteil',
			'Infiltration: -1 Strukturverteidigung',
			'Schnelles Wachstum: Reduzierte Essen Meilenstein-Anforderung',
			'+2 Truppenbelohnungsbonus',
		],
		Fascism: [
			'+1 Attacke',
			'+1 Angriff von Kacheln für jede Verteidigungsstruktur',
			'+4 Angriff gegen Barbaren',
			'Bonustruppe bei jeder Bereitstellung',
		],
		Republic: [
			'+1 Energie',
			'Kampfmediziner heilen 50% der Truppen nach dem Sieg',
			'Beginnen Sie mit Mauerwerk',
			'+50% plündern Belohnungsbonus von Barbaren',
		],
		Communism: [
			'Beginne mit einer großartigen Person',
			'+1 Wissenschaft von 4 Essen',
			'Kann Truppen auf unbewohntes Gebiet bringen',
			'2x entdeckte Belohnungsbonus von Barbaren',
		],
		removeCPU: 'Entfernen Sie den Computer',
		addCPU: 'Computer hinzufügen',
		lobbyRankedMatch: 'Ranglisten-Spiel',
		lobbyGameNameLabel: 'Spielname',
		lobbyGamePasswordLabel: 'Passwort',
		lobbyGameModeLabel: 'Spielmodus',
		lobbyGameMapLabel: 'Karte',
		lobbyMaxPlayersLabel: 'Maximale Spieleranzahl',
		startGame: 'Spiel beginnen',
		cancelGame: 'Ausgang',
		setNationName: 'Nationenname',
		submitNationName: 'Nationenname aktualisieren',
		setNationFlag: 'Nationalflagge',
		leaderboardRankedBtn: 'Rangliste',
		leaderboardFfaBtn: 'Frei für alle',
		leaderboardTeamBtn: 'Mannschaft',
		playNowBtn: 'Jetzt spielen',
		create: 'Frei für alle',
		createTeamBtn: 'Teamspiel',
		joinPrivateGameBtn: 'Privates Spiel beitreten',
		createRankedBtn: 'Erstelle Ranglisten-Spiel',
		joinRankedGame: 'Melde dich im Ranglisten-Spiel an',
		toggleNation: 'Konfigurieren Sie Nation',
		leaderboardBtn: 'Bestenliste',
		gameTableName: 'Spielname',
		gameTableMap: 'Karte',
		gameTableType: 'Art',
		friendStatus: 'Freundesliste anzeigen',
		addFriend: 'Toggle Freund',
		ignoreStatus: 'Zeige Ignorierliste',
		ignoreUser: 'Konto ignorieren',
		whoAccount: 'Konto abfragen',
		whisperAccount: 'Private Nachricht',
		changeChannel: 'Kanal wechseln',
		getHelp: 'Chatbefehle',
		howToPlay: 'Spielanleitung',
		brokenNet: 'Willkommen zu Broken.net!',
		optionsHeader: 'Optionen',
		musicVolume: 'Musiklautstärke',
		soundVolume: 'Soundeffekt-Lautstärke',
		bibleMode: 'Bibelmodus',
		windowSize: 'Fenstergröße',
		currentWindowSize: 'Vollbild',
		windowFullScreen: 'Vollbild',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Spiel verlassen',
		versionSpan: 'Ausführung ',
		foodMilestoneLabel: 'Essen',
		scienceMilestoneLabel: 'Wissenschaft',
		cultureMilestoneLabel: 'Kultur',
	},
	portuguese: {
		resetGame: 'Redefinir Jogo',
		updateNationBtn: 'Feito',
		playerColor: 'Cor do Jogador',
		team: 'Equipe',
		damage: ' danificar',
		hudAttack: 'Ataque: selecione o alvo',
		hudSplitAttack: 'Ataque Dividido: Selecionar Alvo',
		hudFireCannons: 'Canhões de fogo',
		hudLaunchMissile: 'Míssil de lançamento',
		hudLaunchNuke: 'Lançar Bomba Nuclear',
		resourceUiWidth: '24rem',
		selectTarget: 'Selecione o alvo',
		reserveLabel: 'reserva',
		troopsLabel: 'Tropas',
		youHaveJoined: 'Você entrou no jogo: ',
		startingGame: "Começando o jogo em ",
		to: 'Para ',
		whispers: ' sussurros: ',
		joinedChannel: "Você entrou no canal: ",
		selectTeam: 'Selecionar time',
		selectPlayerColor: 'Selecione a cor do player',
		difficulties: {
			'Very Easy': 'Muito fácil',
			Easy: 'Fácil',
			Normal: 'Normal',
			Hard: 'Difícil',
			'Very Hard': 'Muito difícil',
			Mania: 'Mania',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotismo',
			Monarchy: 'Monarquia',
			Democracy: 'Democracia',
			Fundamentalism: 'Fundamentalismo',
			Fascism: 'Fascismo',
			Republic: 'República',
			Communism: 'O comunismo',
			Random: 'Aleatória'
		},
		random: 'Aleatória',
		abAttack: "Ataque",
		abSplitAttack: "Ataque Dividido",
		abDeploy: "Implantar tropas",
		abRush: "Tropas de pressa",
		abBuild: "Construir",
		abCannons: "Canhões de fogo",
		abMissile: "Míssil de lançamento",
		abNuke: "Lançar Bomba Nuclear",
		abResearch: "Pesquisa",
		abMasonry: "Alvenaria",
		abConstruction: "Construção",
		abEngineering: "Engenharia",
		abGunpowder: "Pólvora",
		abRocketry: "Foguetes",
		abAtomic: "Teoria atômica",
		abFuture: "Tech futuro",
		hostLeft: "O anfitrião deixou o saguão.",
		needTwoPlayers: "Você precisa de dois jogadores para começar um jogo! Aguarde que os jogadores participem ou adicionem um player de computador para começar.",
		failedToLoad: "Falha ao carregar dados do jogo.",
		flagChanged: "A bandeira do seu país é agora: ",
		rankedSearch: "Procurando por jogos classificados...",
		noRankedFound: "Nenhum jogo classificado encontrado!<br>Tente criar um jogo classificado.",
		notScience: "Ciência insuficiente!",
		needTwoUnits: "Você precisa de pelo menos 2 tropas para se mover ou atacar!",
		maxUnits: "Esse território tem o número máximo de unidades!",
		friendlyFire: "Fogo amigo! Esse é seu companheiro de equipe!",
		notEnoughEnergy: 'Energia não suficiente!',
		notYourTile: 'Você não possui esse bloco.',
		noTroopsAvailable: "Nenhuma tropa disponível para implantação!",
		badGameName: "O nome do jogo deve ter pelo menos 4 a 32 caracteres.",
		notEnoughPlayers: "O jogo deve ter 2-8 jogadores.",
		newNationName: "Seu novo nome da nação é: ",
		verifyingSteam: "Verificando as credenciais do Steam...",
		steamNotFound: "Não é possível detectar o Steam. Por favor, inicie o Steam e tente novamente!",
		logoutSuccess: "Logout com sucesso",
		logoutFailed: "Logout falhou",
		ribbonTitle: ['',
			'Medalha Nacional de Combate',
			'Prêmio de Reconhecimento Nuke Tático',
			'Prêmio de boa conduta',
			"Faixa de serviço do patriota",
			'Faixa de serviço cívico',//5
			'Medalha Meritória de Bronze',
			'Medalha de Serviço Bronze',
			'Medalha Expedicionária de Bronze',
			'Cruz de bronze',
			'Cruz de prata',//10
			'Cruz dourada',
			'Cruz de Platina',
			'Prêmio de Causa Revolucionária',
			'Prêmio de Guerra Estratégica',
			'Prêmio de serviço de combate', //15
			'Prêmio Galanteador de Combate',
			"Medalha do Conquistador Stalwart",
			"Espada do Ditador",
			"Regalia do rei",
			"Escalas de Arconte",//20
			'Convênio Divino',
			"Fasces do Imperador",
			"Filial da Águia",
			"Foice de Camarada",
			'Medalha Expedicionária Dourada',//25
			'Medalha Meritória Dourada',
			'Medalha de Serviço de Ouro',
			"Medalha do Campeão",
			"Medalha do Conquistador",
			"Medalha do Comandante",//30
			"Prêmio de heroísmo intrépido",
			'Medalha Expedicionária Global de Guerra ',
			'Medalha Expedicionária de Prata',
			'Medalha Meritória de Prata',
			'Medalha de Serviço de Prata',//35
			"Faixa de serviço do engenheiro",
		],
		ribbonDescription: ['', // 0
			'Estabeleceu sua nação',
			'Destruiu uma fortaleza com uma arma nuclear',
			'Adicionado dois camaradas à sua lista de amigos',
			'Atualizou sua bandeira nacional',
			"Atualizou o nome da sua nação",//5
			'Ganhou 10 jogos classificados',
			'Ganhou 10 jogos de equipe',
			'Ganhou 10 grátis para todos os jogos',
			'Alcançou a classificação de 1800+',
			'Alcançou 2100+ classificação',//10
			'Achieved 2400+ rating',
			'Achieved 2700+ rating',
			'Grande Revolucionário conquistou uma telha com mais de 100 unidades', //13
			'Ganhe um jogo com uma razão de 2 para 1 de mortes',
			'Ganhou 10 jogos seguidos', // 15
			'Ganhou 25 jogos seguidos',
			'Conquistou uma telha com uma fortaleza',// 17
			"Ganhou um jogo sob Despotismo",
			'Ganhou um jogo como Monarquia',
			'Ganhou um jogo como uma democracia',//20
			'Ganhou um jogo sob o fundamentalismo',
			'Ganhou um jogo sob o fascismo',
			'Ganhou um jogo como uma república',
			'Ganhou um jogo sob o comunismo',
			'Ganhou 500 grátis para todos os jogos',//25
			'Ganhou 500 jogos classificados',
			'Ganhou 500 jogos de equipe',
			"Atingir o top 10 na classificação geral",
			"Atingir o top # 100 na classificação geral",
			"Atingiu o topo # 1000 no ranking de classificação",//30
			"Derrotou o Juggernaut",
			'Ganhe um 8 jogadores grátis para todos os jogos',
			'Ganhou 100 livres para todos os jogos',
			'Ganhou 100 jogos classificados',
			'Ganhou 100 jogos de equipe',//35
			'Construa uma fortaleza',
		],
		gameNameNotValid: "O nome do jogo não é válido!",
		congratulations: "Parabéns!",
		gameVictory: "Sua campanha pela dominação global foi bem sucedida!",
		victory: "Vitória",
		armistice: "Armistício!",
		gameArmistice: "A campanha foi suspensa!",
		ceaseFire: "Cessar fogo",
		defeat: "Derrota!",
		gameDefeat: "Sua campanha pela dominação do mundo falhou!",
		concede: "Reconhecer a derrota",
		spectate: "Olhar",
		defeatIn: "Derrota em ",
		statOverview: "Visão geral",
		statUnits: "Unidades",
		statStructures: "Estruturas",
		statWeapons: "Armas",
		statResources: "Recursos",
		tabUnits: "Unidades",
		tabStructures: "Estruturas",
		tabWeapons: "Armas",
		tabResources: "Recursos",
		tabTotalScore: "Pontuação total",
		tabEarned: "Ganhou",
		tabDeployed: "Implantado",
		tabKilled: "Morto",
		tabLost: "Perdido",
		tabBunkers: "Bunkers",
		tabWalls: "Paredes",
		tabFortresses: "Fortalezas",
		tabCannons: "Canhões",
		tabMissiles: "Mísseis",
		tabNukes: "Armas nucleares",
		tabEnergy: "Energia",
		tabScience: "Ciência",
		tabFood: "Comida",
		tabCulture: "Cultura",
		gameDuration: "Duração do Jogo ",
		endGame: "Jogo final",
		joinPrivateGameBtnConfirm: "Entrar no jogo",
		createGameHead: "Grátis para todos os jogos",
		createRankedGameHead: "Jogo classificado",
		createGameNameLabel: "Nome do jogo",
		createGamePasswordLabel: "Senha (opcional)",
		createGameMaxPlayerLabel: "Máximo de Jogadores:",
		createGameMapLabel: "Mapa",
		createGame: "Criar jogo",
		createTeamGameHeadLabel: "Jogo de equipe",
		noRankedGamesFound: "Nenhum jogo classificado encontrado!<br>Tente criar um jogo classificado.",
		privateGameNameLabel: "Nome do jogo",
		privateGamePasswordLabel: "Senha",
		confirmSurrenderPrompt: "Entrega?",
		canceSurrenderButtonCancel: "Cancelar",
		canceSurrenderButtonConfirm: "Entrega",
		hotkeyUi: "[V] Alternar a interface do usuário",
		options: "[ESC] Opções",
		researchMasonry: "[Y] Pesquisa de alvenaria para destravar bunkers\r\n(20 segundos)",
		researchConstruction: "[O] Construção de pesquisa para desbloquear paredes\r\n(30 segundos)",
		researchEngineering: "[E] Engenharia de pesquisa para desbloquear fortalezas\r\n(45 segundos)",
		researchGunpowder: "[G] Pesquisa de pólvora para desbloquear canhões\r\n(25 segundos)",
		researchRocketry: "[K] Pesquisa de foguetes para desbloquear mísseis\r\n(40 segundos)",
		researchAtomicTheory: "[T] Pesquise teoria atômica para desbloquear armas nucleares\r\n(60 segundos)",
		researchFutureTech: "[F] Tecnologia de pesquisa futura\r\n(90 segundos)",
		attack: "[A] Ataque com todas as tropas",
		splitAttack: "[S] Ataque com metade de suas tropas",
		deploy: "[D] Implantar tropas de reserva em um ladrilho",
		rush: "[R] Apresse as tropas de seus cidadãos. Impulsionado pelo bônus cultural ",
		defenseLabel: ['Bunker', 'parede', 'Fortaleza'],
		boostsTileDefenses: '[B] Aumenta as defesas do azulejo +',
		reducesWeaponsBy: ' e reduz dano de arma por ',
		fireCannons: '[C] Canhões de fogo em uma telha adjacente. Impulsionado por grandes generais.\r\n',
		launchMissile: '[M] Lançar um míssil em qualquer território. Impulsionado por grandes generais.\r\n',
		launchNuke: "[N] Lance uma arma nuclear em qualquer território. Mata 80-99% das tropas e destrói todas as estruturas.",
		foodBonusTitle: "Bônus Alimentar",
		foodMilestoneTitle: "Marcos miliários de alimentos produzem tropas de reserva.",
		scienceBonusTitle: "Bônus da Ciência",
		scienceMilestoneTitle: "A ciência é usada para construir estruturas, armas de fogo e tecnologia de pesquisa.",
		cultureBonusTitle: "Bônus de Cultura",
		cultureMilestoneTitle: "Marcos de cultura produzem recompensas especiais.",
		troopFlex: "Implantar tropas em territórios conquistados",
		currentYear: "É o ano corrente!",
		energyWrap: "A energia é usada para atacar, mover, implantar e apressar as tropas.",
		foodWrap: "Marcos miliários de alimentos produzem tropas de reserva",
		scienceWrap: "A ciência é usada para construir estruturas, armas e tecnologia de pesquisa.",
		cultureWrap: "Marcos de cultura produzem recompensas especiais",
		generalWrap: "Grandes generais aumentam ataque de tropas",
		tacticianWrap: "Grandes táticos reforçam defesa de tropas",
		energyTimerBase: "Atualização de recursos no final de cada turno.",
		hideUi: "[V] Ocultar interface do usuário",
		toggleFlags: "Alternar sinalizadores",
		hotkeys: "Teclas de atalho",
		gameOptions: "[ESC] Opções",
		surrender: "Entrega",
		exitSpectate: "Sair de Espectador",
		uninhabited: "Desabitada",
		barbarianTribe: "Tribo Bárbara",
		Despotism: [
			'Livre circulação através de telhas próprias',
			'Comece com a pólvora',
			'Comece com um bunker',
			'2x tamanho máximo de ataque do exército',
		],
		Monarchy: [
			'+2 defesa',
			'+1 cultura de 2 alimentos',
			'50% começando bônus cultural',
			'+2 dano de canhão',
		],
		Democracy: [
			'4x implantação máxima de tropas',
			'+3 tropas de reserva quando você perde um azulejo',
			'50% começando bônus de ciência',
			'Requisito de marco de cultura reduzido',
		],
		Fundamentalism: [
			'Superação: vitória instantânea com vantagem de 4x',
			'Infiltração: -1 estrutura de defesa',
			'Crescimento rápido: exigência de marcos alimentares reduzidos',
			'+2 bônus de recompensa de tropas',
		],
		Fascism: [
			'+1 ataque',
			'+1 ataque de telhas para cada estrutura defensiva',
			'+4 ataque vs bárbaros',
			'Tropa de bônus com cada implantação',
		],
		Republic: [
			'+1 energia',
			'Médicos de combate curam 50% das tropas após a vitória',
			'Comece com alvenaria',
			'+50% saqueie bónus de recompensa dos bárbaros',
		],
		Communism: [
			'Comece com uma ótima pessoa',
			'+1 ciência de 4 alimentos',
			'Pode implantar tropas em território desabitado',
			'2x bônus de recompensa descoberto de bárbaros',
		],
		removeCPU: 'Remover computador',
		addCPU: 'Adicionar computador',
		lobbyRankedMatch: 'Partida ranqueada',
		lobbyGameNameLabel: 'Nome do jogo',
		lobbyGamePasswordLabel: 'Senha',
		lobbyGameModeLabel: 'Modo de jogo',
		lobbyGameMapLabel: 'Mapa',
		lobbyMaxPlayersLabel: 'Máximo de jogadores',
		startGame: 'Começar o jogo',
		cancelGame: 'Saída',
		setNationName: 'Nome da nação',
		submitNationName: 'Atualizar nome da nação',
		setNationFlag: 'Bandeira nacional',
		leaderboardRankedBtn: 'Classificados',
		leaderboardFfaBtn: 'Grátis para todos',
		leaderboardTeamBtn: 'Equipe',
		playNowBtn: 'Jogue agora',
		create: 'Grátis para todos',
		createTeamBtn: 'Jogo de equipe',
		joinPrivateGameBtn: 'Participe do Jogo Privado',
		createRankedBtn: 'Criar um jogo classificado',
		joinRankedGame: 'Junte-se ao jogo classificado',
		toggleNation: 'Configurar nação',
		leaderboardBtn: 'Entre os melhores',
		gameTableName: 'Nome do jogo',
		gameTableMap: 'Mapa',
		gameTableType: 'Tipo',
		friendStatus: 'Mostrar lista de amigos',
		addFriend: 'Alternar Amigo',
		ignoreStatus: 'Mostrar lista de ignorados',
		ignoreUser: 'Ignorar conta',
		whoAccount: 'Conta de Consulta',
		whisperAccount: 'Mensagem privada',
		changeChannel: 'Mude o canal',
		getHelp: 'Comandos de Chat',
		howToPlay: 'Como jogar',
		brokenNet: 'Bem-vindo ao Broken.net!',
		optionsHeader: 'Opções',
		musicVolume: 'Volume da música',
		soundVolume: 'Volume do efeito sonoro',
		bibleMode: 'Modo Bíblico',
		windowSize: 'Tamanho da janela',
		currentWindowSize: 'Tela cheia',
		windowFullScreen: 'Tela cheia',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Sair do jogo',
		versionSpan: 'Versão ',
		foodMilestoneLabel: 'Comida',
		scienceMilestoneLabel: 'Ciência',
		cultureMilestoneLabel: 'Cultura',
	},
	spanish: {
		resetGame: 'Reiniciar el Juego',
		updateNationBtn: 'Hecho',
		playerColor: 'Color del jugador',
		team: 'Equipo',
		damage: ' dañar',
		hudAttack: 'Ataque: Seleccionar objetivo',
		hudSplitAttack: 'Ataque dividido: Seleccione un objetivo',
		hudFireCannons: 'Cañones de fuego',
		hudLaunchMissile: 'Lanzar misiles',
		hudLaunchNuke: 'Lanzar arma nuclear',
		resourceUiWidth: '24rem',
		selectTarget: 'Seleccione un objetivo',
		reserveLabel: 'Reserva',
		troopsLabel: 'Tropas',
		youHaveJoined: 'Te has unido al juego: ',
		startingGame: "Comenzando el juego en ",
		to: 'A ',
		whispers: ' susurros: ',
		joinedChannel: "Te has unido al canal: ",
		selectTeam: 'Selecciona un equipo',
		selectPlayerColor: 'Seleccionar color del jugador',
		difficulties: {
			'Very Easy': 'Muy fácil',
			Easy: 'Fácil',
			Normal: 'Normal',
			Hard: 'Difícil',
			'Very Hard': 'Muy duro',
			Mania: 'Manía',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotismo',
			Monarchy: 'Monarquía',
			Democracy: 'Democracia',
			Fundamentalism: 'Fundamentalismo',
			Fascism: 'Fascismo',
			Republic: 'República',
			Communism: 'Comunismo',
			Random: 'Aleatorio'
		},
		random: 'Aleatorio',
		abAttack: "Ataque",
		abSplitAttack: "Ataque dividido",
		abDeploy: "Implementar Tropas",
		abRush: "Tropas Apresuradas",
		abBuild: "Construir",
		abCannons: "Cañones de fuego",
		abMissile: "Lanzar misiles",
		abNuke: "Lanzar Nuke",
		abResearch: "Investigación",
		abMasonry: "Albañilería",
		abConstruction: "Construcción",
		abEngineering: "Ingenieria",
		abGunpowder: "Pólvora",
		abRocketry: "Cohetería",
		abAtomic: "Teoría atómica",
		abFuture: "Tecnología futura",
		hostLeft: "El anfitrión ha dejado el lobby.",
		needTwoPlayers: "¡Necesitas dos jugadores para comenzar un juego! Espere a que los jugadores se unan o agreguen un reproductor de computadora para comenzar.",
		failedToLoad: "Error al cargar los datos del juego.",
		flagChanged: "La bandera de tu nación está ahora: ",
		rankedSearch: "Buscando juegos clasificados...",
		noRankedFound: "No se encontraron juegos clasificados!<br>Intenta crear un juego clasificado en lugar.",
		notScience: "No hay suficiente ciencia!",
		needTwoUnits: "Necesitas al menos 2 tropas para mover o atacar!",
		maxUnits: "Necesitas al menos 2 tropas para mover o atacar!",
		friendlyFire: "¡Fuego amigo! Ese es tu compañero de equipo",
		notEnoughEnergy: '¡No suficiente energía!',
		notYourTile: 'Usted no es dueño de ese azulejo.',
		noTroopsAvailable: "¡No hay tropas disponibles para el despliegue!",
		badGameName: "El nombre del juego debe tener al menos 4-32 caracteres.",
		notEnoughPlayers: "El juego debe tener 2-8 jugadores.",
		newNationName: "El nombre de su nueva nación es: ",
		verifyingSteam: "Verificación de credenciales de Steam...",
		steamNotFound: "Incapaz de detectar Steam. Ejecute Steam y vuelva a intentarlo!",
		logoutSuccess: "Salir exitoso",
		logoutFailed: "Desconexión",
		ribbonTitle: ['',
			'Medalla Nacional de Combate',
			'Premio Tactical Nuke Recognition',
			'Premio de Buena Conducta',
			"Cinta de servicio del patriota",
			'Cinta del servicio cívico',//5
			'Medalla de bronce meritoria',
			'Medalla de Bronce Service',
			'Medalla Expedicionaria de Bronce',
			'Cruz de bronce',
			'Cruz de plata',//10
			'Cruz dorada',
			'Cruz de platino',
			'Premio Causa Revolucionaria',
			'Premio Estratégico de Guerra',
			'Premio del servicio de combate', //15
			'Premio Combat Gallantry',
			"Medalla de Conquistador Stalwart",
			"Espada del dictador",
			"Regalía del Rey",
			"Escalas de Archon",//20
			'Pacto Divino',
			"Fastos del emperador",
			"Rama del águila",
			"Hoz de camarada",
			'Medalla expedicionaria de oro',//25
			'Medalla de oro meritoria',
			'Medalla de servicio de oro',
			"Medalla del campeón",
			"Medalla de conquistador",
			"Medalla del Comandante",//30
			"Premio Intrepid Heroism",
			'Medalla Expedicionaria de la Guerra Global',
			'Medalla Expedicionaria de Plata',
			'Medalla de plata meritoria',
			'Medalla de plata del servicio',//35
			"Cinta de servicio del ingeniero",
		],
		ribbonDescription: ['', // 0
			'Estableció su nación',
			'Destruyó una fortaleza con un arma nuclear',
			'Agregó dos camaradas a su lista de amigos',
			'Actualizado su bandera nacional',
			"Actualizó el nombre de su nación",//5
			'Ganó 10 juegos clasificados',
			'Ganó 10 juegos de equipo',
			'Ganó 10 gratis para todos los juegos',
			'Alcanzó una calificación de 1800+',
			'Alcanzó la calificación de 2100+',//10
			'Alcanzó la calificación de 2400+',
			'Se alcanzó una calificación de 2700+',
			'Gran Revolucionario conquistó un azulejo con más de 100 unidades', //13
			'Gana un juego con una relación de muerte de 2 a 1',
			'Ganó 10 juegos seguidos', // 15
			'Ganó 25 juegos seguidos',
			'Conquistó un azulejo con una fortaleza',// 17
			"Ganó un juego bajo el despotismo",
			'Ganó un juego como monarquía',
			'Ganó un juego como una democracia',//20
			'Ganó un juego en Fundamentalismo',
			'Ganó un juego bajo el fascismo',
			'Ganó un juego como República',
			'Ganó un juego bajo el comunismo',
			'Ganó 500 gratis para todos los juegos',//25
			'Ganó 500 juegos clasificados',
			'Ganó 500 juegos de equipo',
			"Llegar a la cima # 10 en la clasificación clasificada",
			"Llegue a la cima # 100 en la clasificación clasificada",
			"Toca la parte superior # 1000 en la clasificación clasificada",//30
			"Derrotado el Juggernaut",
			'Gana un juego gratis para 8 jugadores para todos',
			'Ganó 100 gratis para todos los juegos',
			'Ganó 100 juegos clasificados',
			'Ganó 100 juegos de equipo',//35
			'Construye una fortaleza',
		],
		gameNameNotValid: "El nombre del juego no es válido!",
		congratulations: "Felicitaciones!",
		gameVictory: "Su campaña para la dominación global ha tenido éxito!",
		victory: "Victoria",
		armistice: "Armisticio!",
		gameArmistice: "La campaña ha sido suspendida!",
		ceaseFire: "Cese el fuego",
		defeat: "Derrota!",
		gameDefeat: "Su campaña para dominar el mundo ha fallado!",
		concede: "Conceder la derrota",
		spectate: "Spectate",
		defeatIn: "Derrota en ",
		statOverview: "Visión de conjunto",
		statUnits: "Unidades",
		statStructures: "Estructuras",
		statWeapons: "Armas",
		statResources: "Recursos",
		tabUnits: "Unidades",
		tabStructures: "Estructuras",
		tabWeapons: "Armas",
		tabResources: "Recursos",
		tabTotalScore: "Puntaje total",
		tabEarned: "Ganado",
		tabDeployed: "Desplegada",
		tabKilled: "Delicado",
		tabLost: "Perdido",
		tabBunkers: "Bunkers",
		tabWalls: "Paredes",
		tabFortresses: "Fortalezas",
		tabCannons: "Cañones",
		tabMissiles: "Misiles",
		tabNukes: "Bombas nucleares",
		tabEnergy: "Energía",
		tabScience: "Ciencia",
		tabFood: "Comida",
		tabCulture: "Cultura",
		gameDuration: "Duración del juego ",
		endGame: "Fin del juego",
		joinPrivateGameBtnConfirm: "Unete al juego",
		createGameHead: "Gratis para todos los juegos",
		createRankedGameHead: "Juego clasificado",
		createGameNameLabel: "Nombre del juego",
		createGamePasswordLabel: "Contraseña (opcional)",
		createGameMaxPlayerLabel: "Jugadores máximos:",
		createGameMapLabel: "Mapa",
		createGame: "Crear juego",
		createTeamGameHeadLabel: "Juego de equipo",
		noRankedGamesFound: "No se encontraron juegos clasificados!<br>Intenta crear un juego clasificado en lugar.",
		privateGameNameLabel: "Nombre del juego",
		privateGamePasswordLabel: "Contraseña",
		confirmSurrenderPrompt: "¿Rendición? ¿Estás seguro?",
		canceSurrenderButtonCancel: "Cancelar",
		canceSurrenderButtonConfirm: "Rendición",
		hotkeyUi: "[V] Alternar la interfaz de usuario",
		options: "[ESC] Opciones",
		researchMasonry: "[Y] Investigación de albañilería para desbloquear búnkers\r\n(20 segundos)",
		researchConstruction: "[O] Investigación de construcción para desbloquear muros\r\n(30 segundos)",
		researchEngineering: "[E] Ingeniería de investigación para desbloquear fortalezas\r\n(45 segundos)",
		researchGunpowder: "[G] Investiga pólvora para desbloquear cañones\r\n(25 segundos)",
		researchRocketry: "[K] Rocketry de investigación para desbloquear misiles\r\n(40 segundos)",
		researchAtomicTheory: "[T] Investigue la teoría atómica para desbloquear armas nucleares\r\n(60 segundos)",
		researchFutureTech: "[F] Investigue la tecnología futura\r\n(90 segundos)",
		attack: "[A] Ataque con todas las tropas",
		splitAttack: "[S] Ataca con la mitad de tus tropas",
		deploy: "[D] Despliega tropas de reserva a un azulejo",
		rush: "[R] Apresúrate a las tropas de tu ciudadanía. Impulsado por la bonificación cultural ",
		defenseLabel: ['Búnker', 'Pared', 'Fortaleza'],
		boostsTileDefenses: '[B] Aumenta las defensas de los azulejos +',
		reducesWeaponsBy: ' y reduce el daño de arma por ',
		fireCannons: '[C] Cañones de fuego en un azulejo adyacente. Impulsado por grandes generales.\r\n',
		launchMissile: '[M] Lanza un misil en cualquier territorio. Impulsado por grandes generales.\r\n',
		launchNuke: "[N] Lanza un arma nuclear en cualquier territorio. Mata al 80-99% de las tropas y destruye todas las estructuras.",
		foodBonusTitle: "Bonificación de alimentos",
		foodMilestoneTitle: "Hitos de alimentos producen tropas de reserva.",
		scienceBonusTitle: "Bonificación de ciencia",
		scienceMilestoneTitle: "La ciencia se usa para construir estructuras, armas de fuego y tecnología de investigación.",
		cultureBonusTitle: "Bonificación cultural",
		cultureMilestoneTitle: "Los hitos de la cultura producen recompensas especiales.",
		troopFlex: "Implementar tropas en territorios conquistados",
		currentYear: "Es el año actual!",
		energyWrap: "La energía se usa para atacar, mover, desplegar y atacar a las tropas.",
		foodWrap: "Hitos de alimentos producen tropas de reserva",
		scienceWrap: "La ciencia se usa para construir estructuras, armas y tecnología de investigación.",
		cultureWrap: "Los hitos de la cultura producen recompensas especiales",
		generalWrap: "Grandes generales impulsan el ataque de las tropas",
		tacticianWrap: "Los grandes tácticos impulsan la defensa de las tropas",
		energyTimerBase: "Actualización de recursos al final de cada turno.",
		hideUi: "[V] Ocultar interfaz de usuario",
		toggleFlags: "Alternar banderas",
		hotkeys: "Teclas de acceso rápido",
		gameOptions: "[ESC] Opciones",
		surrender: "Rendición",
		exitSpectate: "Salir de Spectate",
		uninhabited: "Deshabitado",
		barbarianTribe: "Tribu bárbara",
		Despotism: [
			'Movimiento libre a través de fichas propias',
			'Comience con pólvora',
			'Comience con un búnker',
			'2x tamaño máximo de ataque del ejército',
		],
		Monarchy: [
			'+2 defensa',
			'+1 cultura de 2 alimentos',
			'50% comenzando la bonificación cultural',
			'+2 daño de cañón',
		],
		Democracy: [
			'4x Despliegue máximo de tropas',
			'+3 tropas de reserva cuando pierdes un azulejo',
			'50% comenzando la bonificación científica',
			'Requisito de hito cultural reducido',
		],
		Fundamentalism: [
			'Desbordamiento: ganancia instantánea con 4x de ventaja',
			'Infiltración: -1 estructura de defensa',
			'Crecimiento rápido: requisito de hito de alimentación reducido',
			'+2 bonificación de recompensa de tropa',
		],
		Fascism: [
			'+1 ataque',
			'+1 ataque de fichas para cada estructura defensiva',
			'+4 ataque contra bárbaros',
			'Tropa de bonificación con cada despliegue',
		],
		Republic: [
			'+1 energía',
			'Los médicos de combate curan al 50% de las tropas tras la victoria',
			'Comience con mampostería',
			'+50% botín recompensa extra de los bárbaros',
		],
		Communism: [
			'Comience con una gran persona',
			'+1 ciencia de 4 alimentos',
			'Puede desplegar tropas en territorio deshabitado',
			'2x bonificación de recompensa descubierta de los bárbaros',
		],
		removeCPU: 'Eliminar la computadora',
		addCPU: 'Agregar computadora',
		lobbyRankedMatch: 'Partida igualada',
		lobbyGameNameLabel: 'Nombre del juego',
		lobbyGamePasswordLabel: 'Contraseña',
		lobbyGameModeLabel: 'Modo de juego',
		lobbyGameMapLabel: 'Mapa',
		lobbyMaxPlayersLabel: 'Jugadores máximos',
		startGame: 'Empezar juego',
		cancelGame: 'Salida',
		setNationName: 'Nombre de la nación',
		submitNationName: 'Actualizar el nombre de la nación',
		setNationFlag: 'Bandera nacional',
		leaderboardRankedBtn: 'Clasificado',
		leaderboardFfaBtn: 'Gratuita para todos',
		leaderboardTeamBtn: 'Equipo',
		playNowBtn: 'Reproducir ahora',
		create: 'Gratuita para todos',
		createTeamBtn: 'Juego de equipo',
		joinPrivateGameBtn: 'Unirse al juego privado',
		createRankedBtn: 'Crear partida igualada',
		joinRankedGame: 'Unirse al partido clasificado',
		toggleNation: 'Configurar Nación',
		leaderboardBtn: 'Tabla de clasificación',
		gameTableName: 'Nombre del juego',
		gameTableMap: 'Mapa',
		gameTableType: 'Tipo',
		friendStatus: 'Mostrar lista de amigos',
		addFriend: 'Alternar amigo',
		ignoreStatus: 'Mostrar Ignorar Lista',
		ignoreUser: 'Ignorar cuenta',
		whoAccount: 'Cuenta de consulta',
		whisperAccount: 'Mensaje privado',
		changeChannel: 'Cambia el canal',
		getHelp: 'Comandos de chat',
		howToPlay: 'Cómo jugar',
		brokenNet: 'Bienvenido a Broken.net!',
		optionsHeader: 'Opciones',
		musicVolume: 'Volumen de la música',
		soundVolume: 'Volumen del efecto de sonido',
		bibleMode: 'Modo Biblia',
		windowSize: 'Tamaño de ventana',
		currentWindowSize: 'Pantalla completa',
		windowFullScreen: 'Pantalla completa',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Salir del juego',
		versionSpan: 'Versión ',
		foodMilestoneLabel: 'Comida',
		scienceMilestoneLabel: 'Ciencia',
		cultureMilestoneLabel: 'Cultura',
	},
	french: {
		resetGame: 'Réinitialiser le Jeu',
		updateNationBtn: 'Terminé',
		playerColor: 'Couleur du joueur',
		team: 'Équipe',
		damage: ' dommage',
		hudAttack: 'Attaque: Sélectionner la cible',
		hudSplitAttack: 'Attaque de Split: Sélectionner la cible',
		hudFireCannons: 'Canons de feu',
		hudLaunchMissile: 'Lancer un missile',
		hudLaunchNuke: 'Lancer une bombe nucléaire',
		resourceUiWidth: '28rem',
		selectTarget: 'Sélectionner la cible',
		reserveLabel: 'réserve',
		troopsLabel: 'Troupes',
		youHaveJoined: 'Vous avez rejoint le jeu: ',
		startingGame: "Jeu de départ en ",
		to: 'À ',
		whispers: ' murmure: ',
		joinedChannel: "Vous avez rejoint la chaîne: ",
		selectTeam: 'Choisis une équipe',
		selectPlayerColor: 'Sélectionnez la couleur du lecteur',
		difficulties: {
			'Very Easy': 'Très facile',
			Easy: 'Facile',
			Normal: 'Ordinaire',
			Hard: 'Difficile',
			'Very Hard': 'Très dur',
			Mania: 'La manie',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotisme',
			Monarchy: 'Monarchie',
			Democracy: 'Démocratie',
			Fundamentalism: 'Fondamentalisme',
			Fascism: 'Fascisme',
			Republic: 'République',
			Communism: 'Communisme',
			Random: 'Au hasard'
		},
		random: 'au hasard',
		abAttack: "Attaque",
		abSplitAttack: "Attaque de Split",
		abDeploy: "Déployer des troupes",
		abRush: "Ruer Troupes",
		abBuild: "Construire",
		abCannons: "Canons de feu",
		abMissile: "Lancer un missile",
		abNuke: "Lancer une bombe nucléaire",
		abResearch: "Recherche",
		abMasonry: "Maçonnerie",
		abConstruction: "Construction",
		abEngineering: "Ingénierie",
		abGunpowder: "Poudre à canon",
		abRocketry: "Science de fusée",
		abAtomic: "Théorie atomique",
		abFuture: "Technologie future",
		hostLeft: "L'hôte a quitté le hall.",
		needTwoPlayers: "Vous avez besoin de deux joueurs pour commencer une partie! Attendez que les joueurs rejoignent ou ajoutent un lecteur d'ordinateur pour commencer.",
		failedToLoad: "Échec du chargement des données de jeu.",
		flagChanged: "Le drapeau de votre nation est maintenant: ",
		rankedSearch: "Recherche de jeux classés...",
		noRankedFound: "Aucun jeu classé n'a été trouvé!<br>Essayez plutôt de créer un jeu classé.",
		notScience: "Pas assez de science!",
		needTwoUnits: "Vous avez besoin d'au moins 2 troupes pour se déplacer ou attaquer!",
		maxUnits: "Ce territoire a le nombre maximum d'unités!",
		friendlyFire: "Tir ami! C'est ton coéquipier!",
		notEnoughEnergy: "Pas assez d'énergie!",
		notYourTile: 'Vous ne possédez pas cette tuile.',
		noTroopsAvailable: "Pas de troupes disponibles pour le déploiement!",
		badGameName: "Le nom du jeu doit comporter au moins 4 à 32 caractères.",
		notEnoughPlayers: "Le jeu doit avoir 2 à 8 joueurs.",
		newNationName: "Votre nouveau nom de nation est: ",
		verifyingSteam: "Vérification des informations d'identification Steam...",
		steamNotFound: "Impossible de détecter Steam. Veuillez lancer Steam et réessayer!",
		logoutSuccess: "Déconnexion réussie",
		logoutFailed: "La déconnexion a échoué",
		ribbonTitle: ['',
			'Médaille nationale de combat',
			'Prix de reconnaissance tactique Nuke',
			'Prix de bonne conduite',
			"Ruban de service Patriot",
			'Ruban de service civique',//5
			'Médaille méritoire en bronze',
			'Médaille du service de bronze',
			'Médaille expéditionnaire de bronze',
			'Croix de bronze',
			"Croix d'Argent",//10
			"Croix d'Or",
			'Croix Platine',
			'Prix de la cause révolutionnaire',
			'Prix de guerre stratégique',
			'Prix du service de combat', //15
			'Prix de la galanterie de combat',
			"Médaille du vainqueur",
			"Épée du dictateur",
			"Insignes royaux",
			"Les écailles d'Archon",//20
			'Divin engagement',
			"Fasces de l'empereur",
			"La branche de l'aigle",
			"La faucille du camarade",
			"Médaille expéditionnaire d'or",//25
			'Médaille méritoire dorée',
			"Médaille d'or du service",
			"Médaille du champion",
			"Médaille du conquérant",
			"Médaille du commandant",//30
			"Prix de l'héroïsme intrépide",
			'Médaille expéditionnaire mondiale de guerre',
			"Médaille expéditionnaire d'argent",
			'Médaille méritoire en argent',
			"Médaille du service d'argent",//35
			"Ruban de service de l'ingénieur",
		],
		ribbonDescription: ['', // 0
			'Établi votre nation',
			'Détruit une forteresse avec une arme nucléaire',
			"Ajouté deux camarades à votre liste d'amis",
			'Mise à jour de votre drapeau national',
			"Mise à jour du nom de votre nation",//5
			'A remporté 10 matchs classés',
			"A remporté 10 matchs d'équipe",
			'Won 10 gratuit pour tous les jeux',
			'Atteint 1800+ évaluation',
			'Atteint 2100+ évaluation',//10
			'Atteint 2400+ évaluation',
			'Atteint 2700+ évaluation',
			'Grand Révolutionnaire a conquis une tuile avec plus de 100 unités', //13
			'Gagnez un jeu avec un ratio de destruction de 2 à 1',
			"A remporté 10 matchs d'affilée", // 15
			"A remporté 25 matchs d'affilée",
			'Conquis une tuile avec une forteresse',// 17
			"A gagné un jeu sous le despotisme",
			'A remporté un jeu en tant que monarchie',
			'A gagné un jeu en tant que démocratie',//20
			'A gagné un jeu sous le fondamentalisme',
			'A remporté un match sous le fascisme',
			'A remporté un match en tant que République',
			'A gagné un jeu sous le communisme',
			'Won 500 gratuit pour tous les jeux',//25
			'A remporté 500 matchs classés',
			"A gagné 500 jeux d'équipe",
			"Hit top # 10 sur le classement par classement",
			"Hit top # 100 sur le classement par classement",
			"Hit top # 1000 sur le classement par classement",//30
			"Vaincu le Juggernaut",
			'Gagnez un 8 joueurs gratuit pour tous les jeux',
			'Gagné 100 gratuit pour tous les jeux',
			'A remporté 100 matchs classés',
			'A remporté 100 matchs par équipe',//35
			'Construire une forteresse',
		],
		gameNameNotValid: "Le nom du jeu n'est pas valide!",
		congratulations: "Toutes nos félicitations!",
		gameVictory: "Votre campagne pour la domination mondiale a réussi!",
		victory: "La victoire",
		armistice: "Armistice!",
		gameArmistice: "La campagne a été suspendue!",
		ceaseFire: "Cessez le feu",
		defeat: "Défaite!",
		gameDefeat: "Votre campagne pour la domination du monde a échoué!",
		concede: "Concéder la défaite",
		spectate: "Spectate",
		defeatIn: "Défaite dans ",
		statOverview: "Aperçu",
		statUnits: "Unités",
		statStructures: "Structures",
		statWeapons: "Armes",
		statResources: "Ressources",
		tabUnits: "Unités",
		tabStructures: "Structures",
		tabWeapons: "Armes",
		tabResources: "Ressources",
		tabTotalScore: "Score total",
		tabEarned: "Gagné",
		tabDeployed: "Déployé",
		tabKilled: "Tué",
		tabLost: "Perdu",
		tabBunkers: "Bunkers",
		tabWalls: "Des murs",
		tabFortresses: "Forteresses",
		tabCannons: "Canons",
		tabMissiles: "Missiles",
		tabNukes: "Armes nucléaires",
		tabEnergy: "Énergie",
		tabScience: "Science",
		tabFood: "Aliments",
		tabCulture: "Culture",
		gameDuration: "Durée du jeu ",
		endGame: "Fin du jeu",
		joinPrivateGameBtnConfirm: "Rejoins une partie",
		createGameHead: "Gratuit pour tous les jeux",
		createRankedGameHead: "Jeu classé",
		createGameNameLabel: "Nom du jeu",
		createGamePasswordLabel: "Mot de passe (facultatif)",
		createGameMaxPlayerLabel: "Maximum de joueurs:",
		createGameMapLabel: "Carte",
		createGame: "Créer un jeu",
		createTeamGameHeadLabel: "Jeu d'équipe",
		noRankedGamesFound: "Aucun jeu classé n'a été trouvé!<br>Essayez plutôt de créer un jeu classé.",
		privateGameNameLabel: "Nom du jeu",
		privateGamePasswordLabel: "Mot de passe",
		confirmSurrenderPrompt: "Abandon? Êtes-vous sûr?",
		canceSurrenderButtonCancel: "Annuler",
		canceSurrenderButtonConfirm: "Abandon",
		hotkeyUi: "[V] Basculer l'interface utilisateur",
		options: "[ESC] Options",
		researchMasonry: "[Y] Recherche maçonnerie pour débloquer des bunkers\r\n(20 secondes)",
		researchConstruction: "[O] Construction de recherche pour déverrouiller les murs\r\n(30 secondes)",
		researchEngineering: "[E] Ingénierie de recherche pour débloquer des forteresses\r\n(45 secondes)",
		researchGunpowder: "[G] Recherche de poudre à canon pour débloquer des canons\r\n(25 secondes)",
		researchRocketry: "[K] Recherche de fusées pour débloquer des missiles\r\n(40 secondes)",
		researchAtomicTheory: "[T] La recherche sur la théorie atomique pour débloquer des armes nucléaires\r\n(60 secondes)",
		researchFutureTech: "[F] Recherche future technologie\r\n(90 secondes)",
		attack: "[A] Attaque avec toutes les troupes",
		splitAttack: "[S] Attaque avec la moitié de vos troupes",
		deploy: "[D] Déployer des troupes de réserve sur une case",
		rush: "[R] Déplacez les troupes de vos citoyens. Boosté par le bonus de culture ",
		defenseLabel: ['Bunker', 'Mur', 'Forteresse'],
		boostsTileDefenses: '[B] Augmente les défenses des carreaux +',
		reducesWeaponsBy: ' et réduit les dégâts de l\'arme en ',
		fireCannons: '[C] Canons de feu sur une tuile adjacente. Boosté par les grands généraux.\r\n',
		launchMissile: '[M] Lancez un missile sur n\'importe quel territoire. Boosté par les grands généraux.\r\n',
		launchNuke: "[N] Lancer une arme nucléaire sur n'importe quel territoire. Tue 80 à 99% des troupes et détruit toutes les structures.",
		foodBonusTitle: "Bonus alimentaire",
		foodMilestoneTitle: "Les jalons alimentaires produisent des troupes de réserve.",
		scienceBonusTitle: "Bonus scientifique",
		scienceMilestoneTitle: "La science est utilisée pour construire des structures, des armes à feu et des technologies de recherche.",
		cultureBonusTitle: "Bonus de culture",
		cultureMilestoneTitle: "Les jalons de la culture produisent des récompenses spéciales.",
		troopFlex: "Déployer des troupes dans des territoires conquis",
		currentYear: "C'est l'année en cours!",
		energyWrap: "L'énergie est utilisée pour attaquer, déplacer, déployer et envoyer des troupes.",
		foodWrap: "Les jalons alimentaires produisent des troupes de réserve",
		scienceWrap: "La science est utilisée pour construire des structures, des armes et des technologies de recherche.",
		cultureWrap: "Les jalons de la culture produisent des récompenses spéciales",
		generalWrap: "Les grands généraux renforcent l'attaque des troupes",
		tacticianWrap: "Les grands tactiques renforcent la défense des troupes",
		energyTimerBase: "Mise à jour des ressources à la fin de chaque tour.",
		hideUi: "[V] Masquer l'interface utilisateur",
		toggleFlags: "Basculer les drapeaux",
		hotkeys: "Hotkeys",
		gameOptions: "[ESC] Options",
		surrender: "Abandon",
		exitSpectate: "Exit Spectate",
		uninhabited: "Inhabité",
		barbarianTribe: "Tribu barbare",
		Despotism: [
			'Libre circulation à travers ses propres carreaux',
			'Commencez avec de la poudre à canon',
			'Commencez avec un bunker',
			"2x taille d'attaque maximale de l'armée",
		],
		Monarchy: [
			'+2 défense',
			'+1 culture de 2 aliments',
			'50% départ de la culture bonus',
			'+2 dégâts de cannon',
		],
		Democracy: [
			'4x déploiement maximal des troupes',
			'+3 réserver des troupes lorsque vous perdez une tuile',
			'50% prime de départ en science',
			"Réduction de l'exigence de jalons de culture",
		],
		Fundamentalism: [
			'Envahi: Gagnez instantanément avec 4x avantage',
			'Infiltration: -1 défense de structure',
			'Croissance rapide: Réduction des besoins en produits alimentaires',
			'+2 prime de récompense de troupe',
		],
		Fascism: [
			'+1 attaque',
			'+1 attaque des tuiles pour chaque structure défensive',
			'+4 attaque contre les barbares',
			'Troupe Bonus à chaque déploiement',
		],
		Republic: [
			'+1 énergie',
			'Les infirmiers de combat soignent 50% des troupes après la victoire',
			'Commencez avec la maçonnerie',
			'+50% piller le bonus de récompense des barbares',
		],
		Communism: [
			'Commence avec une bonne personne',
			'+1 la science de 4 aliments',
			'Peut déployer des troupes en territoire inhabité',
			'2x découvert le bonus de récompense des barbares',
		],
		removeCPU: "Supprimer l'ordinateur",
		addCPU: 'Ajouter un ordinateur',
		lobbyRankedMatch: 'Match classé',
		lobbyGameNameLabel: 'Nom du jeu',
		lobbyGamePasswordLabel: 'Mot de passe',
		lobbyGameModeLabel: 'Mode de jeu',
		lobbyGameMapLabel: 'Carte',
		lobbyMaxPlayersLabel: 'Le maximum de joueurs',
		startGame: 'Démarrer jeu',
		cancelGame: 'Sortie',
		setNationName: 'Nom de la nation',
		submitNationName: 'Mettre à jour le nom',
		setNationFlag: 'Drapeau national',
		leaderboardRankedBtn: 'Classé',
		leaderboardFfaBtn: 'Gratuit pour tous',
		leaderboardTeamBtn: 'Équipe',
		playNowBtn: 'Joue maintenant',
		create: 'Gratuit pour tous',
		createTeamBtn: "Jeu d'équipe",
		joinPrivateGameBtn: 'Rejoindre un jeu privé',
		createRankedBtn: 'Créer un match classé',
		joinRankedGame: 'Rejoindre un match classé',
		toggleNation: 'Configurer Nation',
		leaderboardBtn: 'Classement',
		gameTableName: 'Nom du jeu',
		gameTableMap: 'Carte',
		gameTableType: 'Type',
		friendStatus: "Afficher la liste d'amis",
		addFriend: 'Bascule ami',
		ignoreStatus: 'Afficher la liste des ignorés',
		ignoreUser: 'Ignorer le compte',
		whoAccount: 'Compte de requête',
		whisperAccount: 'Message privé',
		changeChannel: 'Changer de chaîne',
		getHelp: 'Commandes de chat',
		howToPlay: 'Comment jouer',
		brokenNet: 'Bienvenue à Broken.net!',
		optionsHeader: 'Options',
		musicVolume: 'Volume de la musique',
		soundVolume: 'Volume sonore',
		bibleMode: 'Mode Bible',
		windowSize: 'La taille de la fenêtre',
		currentWindowSize: 'Plein écran',
		windowFullScreen: 'Full Screen',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Quitter le jeu',
		versionSpan: 'Version ',
		foodMilestoneLabel: 'Aliments',
		scienceMilestoneLabel: 'Science',
		cultureMilestoneLabel: 'Culture',
	},
	koreana: {
		resetGame: '게임 다시 설정',
		updateNationBtn: '끝난',
		playerColor: '플레이어 색상',
		team: '팀',
		damage: ' 손해',
		hudAttack: '공격: 대상 선택',
		hudSplitAttack: '스플릿 어택: 대상 선택',
		hudFireCannons: '화재 대포',
		hudLaunchMissile: '발사 미사일',
		hudLaunchNuke: '핵폭탄 발사',
		resourceUiWidth: '22rem',
		selectTarget: '대상 선택',
		reserveLabel: '비축',
		troopsLabel: '군대',
		youHaveJoined: '너는 게임에 가입했다.: ',
		startingGame: "에서 게임 시작 ",
		to: '에 ',
		whispers: ' 속삭이다: ',
		joinedChannel: "채널에 가입했습니다.: ",
		selectTeam: '팀 선택',
		selectPlayerColor: '플레이어 색상 선택',
		difficulties: {
			'Very Easy': '아주 쉽게',
			Easy: '쉬운',
			Normal: '표준',
			Hard: '단단한',
			'Very Hard': '열심히',
			Mania: '열광',
			Juggernaut: '절대적인 힘'
		},
		governments: {
			Despotism: '전제국',
			Monarchy: '군주국',
			Democracy: '민주주의',
			Fundamentalism: '근본주의',
			Fascism: '파시즘',
			Republic: '공화국',
			Communism: '공산주의',
			Random: '랜덤'
		},
		random: '랜덤',
		abAttack: "공격",
		abSplitAttack: "스플릿 어택",
		abDeploy: "군대 배치",
		abRush: "러쉬 부대",
		abBuild: "짓다",
		abCannons: "화재 대포",
		abMissile: "발사 미사일",
		abNuke: "핵폭탄 발사",
		abResearch: "연구",
		abMasonry: "석공 직",
		abConstruction: "구성",
		abEngineering: "공학",
		abGunpowder: "화약",
		abRocketry: "로켓 공학",
		abAtomic: "원자론",
		abFuture: "미래 기술",
		hostLeft: "호스트가 로비에서 나왔습니다..",
		needTwoPlayers: "게임을 시작하려면 두 명이 필요합니다! 플레이어가 컴퓨터 플레이어에 가입하거나 컴퓨터 플레이어를 추가 할 때까지 기다립니다.",
		failedToLoad: "게임 데이터를로드하지 못했습니다.",
		flagChanged: "네 나라 국기가 지금이다: ",
		rankedSearch: "순위가 매겨진 게임 검색...",
		noRankedFound: "순위 게임 없음!<br>대신 랭킹 게임 만들기.",
		notScience: "과학이 충분하지 않다.!",
		needTwoUnits: "이동하거나 공격하려면 최소 2 명의 병력이 필요합니다.!",
		maxUnits: "해당 지역에는 최대 단위 수가 있습니다.!",
		friendlyFire: "친절한 불! 그것은 당신의 동료입니다!",
		notEnoughEnergy: '에너지가 충분하지 않습니다!',
		notYourTile: '당신은 그 타일을 소유하고 있지 않습니다.',
		noTroopsAvailable: "배포 할 수있는 병력이 없습니다!",
		badGameName: "게임 이름은 4 ~ 32 자 이상이어야합니다.",
		notEnoughPlayers: "게임에는 2-8 명이 있어야합니다.",
		newNationName: "당신의 새로운 국가 이름은 : ",
		verifyingSteam: "스팀 자격 증명 확인...",
		steamNotFound: "증기를 감지 할 수 없습니다. Steam을 시작하고 다시 시도하십시오!",
		logoutSuccess: "로그 아웃 성공",
		logoutFailed: "로그 아웃하지 못했습니다.",
		ribbonTitle: ['',
			'국가 전투 메달',
			'전술 핵 심판 상',
			'선의의 행동 상',
			"패트리어트의 서비스 리본",
			'시민 서비스 리본',//5
			'청동 공적 메달',
			'브론즈 서비스 메달',
			'청동 원정 메달',
			'브론즈 크로스',
			'실버 크로스',//10
			'골든 크로스',
			'플래티넘 크로스',
			'혁명적 인 상',
			'전략적 전쟁 상',
			'전투 서비스 상', //15
			'전투 훈장',
			"스탈 왈트 정복자 메달",
			"독재자의 검",
			"왕의 의복",
			"아콘 스 저울",//20
			'신성한 약속',
			"황제의 거짓",
			"독수리 분기",
			"동지의 낫",
			'황금 원정 메달',//25
			'황금 공적 메달',
			'황금 봉사 훈장',
			"챔피언의 메달",
			"정복자의 메달",
			"사령관의 훈장",//30
			"대담한 영웅상",
			'세계 대전 원정 메달',
			'은 탐사 메달',
			'은 공적 훈장',
			'은 서비스 메달',//35
			"엔지니어 서비스 리본",
		],
		ribbonDescription: ['', // 0
			'네 나라 설립',
			'핵무기로 요새를 파괴했습니다.',
			'친구 목록에 2 명의 동지를 추가했습니다.',
			'국기 업데이트',
			"국가 이름 업데이트",//5
			'10 위 게임에 승리',
			'10 팀 경기 출전',
			'모든 게임에 대해 10 원 무료',
			'달성 된 1800+ 등급',
			'달성 된 2100+ 등급',//10
			'달성 된 2400+ 등급',
			'달성 된 2700+ 등급',
			'Great Revolutionary는 100 개 이상의 유닛으로 타일을 점령했습니다.', //13
			'2 : 1 킬레이트 비율로 게임하기',
			'10 연승', // 15
			'25 연승',
			'요새가있는 타일을 정복했다.',// 17
			"전제 하에서 게임을 얻었습니다.",
			'군주제로 게임을 얻다.',
			'민주주의로 게임을 얻다.',//20
			'근본주의에서 게임 승리',
			'파시즘 하에서 게임 승리',
			'공화국으로서의 게임 승리',
			'공산주의 하에서 게임 승리',
			'모든 게임에 500 원 무료',//25
			'500 위 게임에 승리했습니다.',
			'500 팀 경기 출전',
			"순위표에서 상위 10 위를 차지하십시오.",
			"순위표에서 톱 100 위를 차지하십시오.",
			"순위표에서 상위 1000 위 달성",//30
			"저거넛을 물리 쳤다.",
			'모든 게임에 8 명 무료 제공',
			'모든 게임에 대해 100 원 무료',
			'100 위 게임에 승리',
			'100 팀 경기 출전',//35
			'요새 건설',
		],
		gameNameNotValid: "게임 이름이 유효하지 않습니다!",
		congratulations: "치하!",
		gameVictory: "글로벌 지배를위한 귀하의 캠페인이 성공했습니다!",
		victory: "승리",
		armistice: "휴전!",
		gameArmistice: "캠페인이 일시 중지되었습니다.",
		ceaseFire: "불을 멈추다",
		defeat: "패배!",
		gameDefeat: "세계 지배를위한 캠페인이 실패했습니다!",
		concede: "양보 패배",
		spectate: "구경하다",
		defeatIn: "에서 패배하다 ",
		statOverview: "개요",
		statUnits: "단위",
		statStructures: "구조물",
		statWeapons: "무기",
		statResources: "자원",
		tabUnits: "단위",
		tabStructures: "구조물",
		tabWeapons: "무기",
		tabResources: "자원",
		tabTotalScore: "총 점수",
		tabEarned: "획득",
		tabDeployed: "배치 됨",
		tabKilled: "살해 된",
		tabLost: "잃어버린",
		tabBunkers: "벙커",
		tabWalls: "벽",
		tabFortresses: "요새",
		tabCannons: "대포",
		tabMissiles: "미사일",
		tabNukes: "핵폭탄",
		tabEnergy: "에너지",
		tabScience: "과학",
		tabFood: "식품",
		tabCulture: "문화",
		gameDuration: "게임 기간 ",
		endGame: "게임 종료",
		joinPrivateGameBtnConfirm: "게임 가입",
		createGameHead: "모든 게임 무료",
		createRankedGameHead: "게임 순위",
		createGameNameLabel: "게임 이름",
		createGamePasswordLabel: "비밀번호 (선택 사항)",
		createGameMaxPlayerLabel: "최대 플레이어 수 :",
		createGameMapLabel: "지도",
		createGame: "게임 만들기",
		createTeamGameHeadLabel: "팀 경기",
		noRankedGamesFound: "순위 게임을 찾지 못했습니다!<br>대신 랭킹 게임을 만들어보십시오.",
		privateGameNameLabel: "게임 이름",
		privateGamePasswordLabel: "암호",
		confirmSurrenderPrompt: "확실합니까?",
		canceSurrenderButtonCancel: "취소",
		canceSurrenderButtonConfirm: "항복",
		hotkeyUi: "[V] 사용자 인터페이스 토글",
		options: "[ESC] 옵션",
		researchMasonry: "[Y] 벙커를 여는 연구용 벽돌\r\n(20 초)",
		researchConstruction: "[O] 벽을 여는 연구 건설\r\n(30 초)",
		researchEngineering: "[E] 요새를 풀기위한 연구 공학\r\n(45 초)",
		researchGunpowder: "[G] 대포를 여는 연구용 화약\r\n(25 초)",
		researchRocketry: "[K] 미사일 발사를위한 로켓 연구\r\n(40 초)",
		researchAtomicTheory: "[T] 핵무기 개발을위한 원자 이론 연구\r\n(60 초)",
		researchFutureTech: "[F] 미래 기술 연구\r\n(90 초)",
		attack: "[A] 모든 군대와 공격",
		splitAttack: "[S] 군대 절반 공격",
		deploy: "[D] 타일에 예비 병력 배치",
		rush: "[R] 시민권 자로부터 군대를 끌어 내십시오. 문화 보너스로 상승 ",
		defenseLabel: ['벙커', '벽', '요새'],
		boostsTileDefenses: '[B] 타일 방어 강화 +',
		reducesWeaponsBy: ' 무기 피해를 감소시킨다。 ',
		fireCannons: '[C] 인접한 타일에있는 대포를 발사하십시오. 훌륭한 장성들에 의해 발전 됨。\r\n',
		launchMissile: '[M] 어떤 지역에서든 미사일 발사. 훌륭한 장성들에 의해 발전 됨。\r\n',
		launchNuke: "[N] 어떤 지역에서든 핵무기를 발사하십시오. 군대의 80 ~ 99 %를 죽이고 모든 구조물을 파괴합니다。",
		foodBonusTitle: "음식 보너스",
		foodMilestoneTitle: "예비군을 생산하는 음식 마일스톤。",
		scienceBonusTitle: "과학 보너스",
		scienceMilestoneTitle: "과학은 구조, 화재 무기 및 연구 기술을 구축하는 데 사용됩니다。",
		cultureBonusTitle: "문화 보너스",
		cultureMilestoneTitle: "문화 이정표는 특별한 보상을 제공합니다。",
		troopFlex: "정복 된 영토에 군대 배치",
		currentYear: "그것은 올해입니다!",
		energyWrap: "에너지는 군대를 공격, 이동, 배치 및 조종하는 데 사용됩니다。",
		foodWrap: "예비군을 생산하는 음식 마일스톤",
		scienceWrap: "과학은 구조, 무기 및 연구 기술을 구축하는 데 사용됩니다。",
		cultureWrap: "문화적 기념물로 특별 보상 제공",
		generalWrap: "위대한 장군이 병력 공격을 강화합니다。",
		tacticianWrap: "위대한 전술 진영은 병력 방어를 강화합니다。",
		energyTimerBase: "각 턴 끝에 자원이 업데이트됩니다.",
		hideUi: "[V] 사용자 인터페이스 숨기기",
		toggleFlags: "비녀장 국기",
		hotkeys: "단축키",
		gameOptions: "[ESC] 옵션",
		surrender: "항복",
		exitSpectate: "관상 동맥 출구",
		uninhabited: "무인도",
		barbarianTribe: "야만인 부족",
		Despotism: [
			'자기 타일을 통한 자유로운 이동',
			'화약으로 시작하십시오.',
			'벙커로 시작하십시오.',
			'2x 최대 군대 공격 규모',
		],
		Monarchy: [
			'+2 방어',
			'+1 2 가지 음식 문화',
			'50% 문화 보너스 시작',
			'+2 대포 피해',
		],
		Democracy: [
			'4x 병력 배치 최대화',
			'+3 타일을 잃을 때 군대를 예비해라.',
			'50% 과학 보너스 시작하기',
			'문화 이정표 요구 사항 감소',
		],
		Fundamentalism: [
			'오버런 : 4 배 이점으로 즉각적인 승리',
			'침투 : -1 구조 방어',
			'빠른 성장 : 식량 획기적인 요구 사항 감소',
			'+2 병력 보상 보너스',
		],
		Fascism: [
			'+1 공격',
			'+1 각 방어 구조에 대한 타일 공격',
			'+4 공격 대 야만인',
			'각 배치 별 보너스 병력',
		],
		Republic: [
			'+1 에너지',
			'전투 의료진이 승리시 50 % 병력을 치료합니다.',
			'석조로 시작하십시오.',
			'+50% 야만인들로부터의 약탈 보상 보너스',
		],
		Communism: [
			'훌륭한 사람으로 시작하십시오.',
			'+1 과학에서 4 음식',
			'무인도 지역에 병력 배치 가능',
			'2x 야만인으로부터 보상 보너스 발견',
		],
		removeCPU: '컴퓨터 제거',
		addCPU: '컴퓨터 추가',
		lobbyRankedMatch: '랭킹 경기',
		lobbyGameNameLabel: '게임 이름',
		lobbyGamePasswordLabel: '암호',
		lobbyGameModeLabel: '게임 모드',
		lobbyGameMapLabel: '지도',
		lobbyMaxPlayersLabel: '최대 플레이어',
		startGame: '게임을 시작하다',
		cancelGame: '출구',
		setNationName: '국가 이름',
		submitNationName: '국가 이름 업데이트',
		setNationFlag: '국기',
		leaderboardRankedBtn: '순위',
		leaderboardFfaBtn: '모두를위한 무료',
		leaderboardTeamBtn: '팀',
		playNowBtn: '지금 플레이하기',
		create: '모두를위한 무료',
		createTeamBtn: '팀 경기',
		joinPrivateGameBtn: '비공개 게임에 가입',
		createRankedBtn: '랭킹 매치 만들기',
		joinRankedGame: '경기 랭킹에 합류',
		toggleNation: '국가 구성',
		leaderboardBtn: '리더 보드',
		gameTableName: '게임 이름',
		gameTableMap: '지도',
		gameTableType: '유형',
		friendStatus: '친구 목록 표시',
		addFriend: '친구 전환',
		ignoreStatus: '무시 목록 표시',
		ignoreUser: '계정 무시',
		whoAccount: '검색어 계정',
		whisperAccount: '사신',
		changeChannel: '채널 변경',
		getHelp: '채팅 명령',
		howToPlay: '게임 방법',
		brokenNet: '에 오신 것을 환영합니다 Broken.net!',
		optionsHeader: '옵션',
		musicVolume: '음악 볼륨',
		soundVolume: '효과음 볼륨',
		bibleMode: '성경 모드',
		windowSize: '창 크기',
		currentWindowSize: '전체 화면',
		windowFullScreen: '전체 화면',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: '퇴장 게임',
		versionSpan: '번역 ',
		foodMilestoneLabel: '식품',
		scienceMilestoneLabel: '과학',
		cultureMilestoneLabel: '문화',
	},
	japanese: {
		resetGame: 'リセットゲーム',
		updateNationBtn: '完了',
		playerColor: 'プレーヤーの色',
		team: 'チーム',
		damage: ' 損傷',
		hudAttack: '攻撃: ターゲットを選択',
		hudSplitAttack: 'スプリットアタック: ターゲットを選択',
		hudFireCannons: '大砲',
		hudLaunchMissile: 'ミサイル発射',
		hudLaunchNuke: '核爆弾を発射する',
		resourceUiWidth: '27rem',
		selectTarget: 'ターゲットを選択',
		reserveLabel: '予約',
		troopsLabel: '軍',
		youHaveJoined: 'あなたはゲームに参加しました： ',
		startingGame: "ゲーム開始 ",
		to: 'に ',
		whispers: ' ささやき: ',
		joinedChannel: "あなたはチャンネルに参加しました： ",
		selectTeam: 'チームを選ぶ',
		selectPlayerColor: 'プレイヤーの色を選択',
		difficulties: {
			'Very Easy': '非常に簡単',
			Easy: '簡単',
			Normal: 'ノーマル',
			Hard: 'ハード',
			'Very Hard': 'とても厳しい',
			Mania: 'マニア',
			Juggernaut: 'ジャガーノート'
		},
		governments: {
			Despotism: '専制主義',
			Monarchy: '君主制',
			Democracy: '民主主義',
			Fundamentalism: '原理主義',
			Fascism: 'ファシズム',
			Republic: '共和国',
			Communism: '共産主義',
			Random: 'ランダム'
		},
		random: 'ランダム',
		abAttack: "攻撃",
		abSplitAttack: "スプリットアタック",
		abDeploy: "軍隊を展開する",
		abRush: "ラッシュトルーパーズ",
		abBuild: "ビルド",
		abCannons: "大砲",
		abMissile: "ミサイル発射",
		abNuke: "核爆弾を発射する",
		abResearch: "研究",
		abMasonry: "石積み",
		abConstruction: "建設",
		abEngineering: "エンジニアリング",
		abGunpowder: "火薬",
		abRocketry: "ロケット",
		abAtomic: "原子論",
		abFuture: "未来の技術",
		hostLeft: "ホストはロビーを出ました。",
		needTwoPlayers: "あなたはゲームを開始するには2人のプレイヤーが必要です！ プレイヤーが参加するか、コンピュータプレーヤーを追加して開始するのを待ちます。",
		failedToLoad: "ゲームデータの読み込みに失敗しました。",
		flagChanged: "あなたの国の旗は今である： ",
		rankedSearch: "ランキングされたゲームを検索中...",
		noRankedFound: "ランキングゲームは見つかりませんでした！<br>代わりにランクのゲームを作成してみてください。",
		notScience: "科学は十分ではありません！",
		needTwoUnits: "移動や攻撃には少なくとも2人の軍隊が必要です！",
		maxUnits: "その領土には最大数のユニットがあります！",
		friendlyFire: "フレンドリー・ファイア！ それがあなたのチームメイトです！",
		notEnoughEnergy: 'エネルギーが足りません！',
		notYourTile: 'あなたはそのタイルを所有していません。',
		noTroopsAvailable: "配備可能な軍隊はありません！",
		badGameName: "ゲーム名は少なくとも4〜32文字でなければなりません。",
		notEnoughPlayers: "ゲームは2-8人のプレーヤーがなければなりません。",
		newNationName: "あなたの新しい国名は： ",
		verifyingSteam: "スチームクレデンシャルの確認中...",
		steamNotFound: "蒸気を検出できません。 Steamを起動してもう一度お試しください！",
		logoutSuccess: "ログアウトに成功しました",
		logoutFailed: "ログアウトに失敗しました",
		ribbonTitle: ['',
			'国家戦闘勲章',
			'戦術核認定賞',
			'グッド・コンダクト賞',
			"パトリオットのサービスリボン",
			'市民サービスリボン',//5
			'ブロンズメリット勲章',
			'ブロンズサービスメダル',
			'ブロンズ遠征勲章',
			'ブロンズクロス',
			'シルバークロス',//10
			'ゴールデンクロス',
			'プラチナクロス',
			'革命原因賞',
			'戦略戦争賞',
			'コンバットサービス賞', //15
			'コンバットギャラントリー賞',
			"勇敢な征服者の勲章",
			"独裁者の剣",
			"キングスレガリア",
			"ジャッジズスケール",//20
			'聖なる約束',
			"天皇の華氏",
			"イーグルズブランチ",
			"同志の鎌",
			'ゴールデン遠征勲章',//25
			'ゴールデンメリット勲章',
			'ゴールデンサービス勲章',
			"チャンピオンの勲章",
			"征服者の勲章",
			"指揮官の勲章",//30
			"勇敢なヒロイズム賞",
			'グローバル戦争遠征勲章',
			'シルバー遠征勲章',
			'シルバーメリット勲章',
			'シルバーサービス勲章',//35
			"エンジニアサービスリボン",
		],
		ribbonDescription: ['', // 0
			'あなたの国を設立',
			'核兵器で要塞を破壊した',
			'友達リストに2人の仲間を追加しました',
			'国旗を更新しました',
			"あなたの国の名前を更新しました",//5
			'10ランクのゲームを獲得',
			'10チームのゲームを獲得',
			'すべてのゲームで10勝を無料',
			'1800+評価を達成しました',
			'2100+評価を達成しました',//10
			'2400+評価を達成しました',
			'2700+評価を達成しました',
			'大革命は100以上のユニットでタイルを征服しました', //13
			'2対1のキル率でゲームに勝つ',
			'10連勝', // 15
			'25連勝',
			'要塞を征服したタイル',// 17
			"専制主義の下で勝利",
			'君主制のゲームを勝ち取った',
			'民主主義としての勝利',//20
			'基本主義のもとで勝利',
			'ファシズム下でゲームを勝ち取った',
			'共和国としての勝利',
			'共産主義の下で勝利',
			'すべてのゲームで500勝を無料',//25
			'500勝のゲームを獲得',
			'500チームのゲームを獲得',
			"ランク付けされたリーダーボードでトップ10にヒット",
			"ランク付けされたリーダーボードでトップ＃100を達成",
			"ランク付けされたリーダーボードでトップ＃1000を獲得",//30
			"ジャガーノートを破った",
			'すべてのゲームで8人無料で勝つ',
			'すべてのゲームで100勝を無料',
			'100勝のゲームを獲得',
			'100チームのゲームを獲得',//35
			'要塞を建てる',
		],
		gameNameNotValid: "ゲーム名が無効です！",
		congratulations: "おめでとう！",
		gameVictory: "グローバルな支配のためのあなたのキャンペーンは成功しました！",
		victory: "勝利",
		armistice: "休戦！",
		gameArmistice: "キャンペーンは中止されました。",
		ceaseFire: "火を止める",
		defeat: "敗北！",
		gameDefeat: "あなたの世界支配キャンペーンは失敗しました！",
		concede: "敗北",
		spectate: "観る",
		defeatIn: "で敗北 ",
		statOverview: "概要",
		statUnits: "単位",
		statStructures: "構造",
		statWeapons: "兵器",
		statResources: "リソース",
		tabUnits: "単位",
		tabStructures: "構造",
		tabWeapons: "兵器",
		tabResources: "リソース",
		tabTotalScore: "合計スコア",
		tabEarned: "獲得した",
		tabDeployed: "デプロイされた",
		tabKilled: "殺された",
		tabLost: "失われた",
		tabBunkers: "バンカー",
		tabWalls: "壁",
		tabFortresses: "要塞",
		tabCannons: "大砲",
		tabMissiles: "ミサイル",
		tabNukes: "核爆弾",
		tabEnergy: "エネルギー",
		tabScience: "科学",
		tabFood: "フード",
		tabCulture: "文化",
		gameDuration: "ゲームの所要時間 ",
		endGame: "ゲーム終了",
		joinPrivateGameBtnConfirm: "ゲームに参加します",
		createGameHead: "すべてのゲームで無料",
		createRankedGameHead: "ランキングゲーム",
		createGameNameLabel: "ゲーム名",
		createGamePasswordLabel: "パスワード（オプション）",
		createGameMaxPlayerLabel: "最大のプレイヤー：",
		createGameMapLabel: "地図",
		createGame: "ゲームを作る",
		createTeamGameHeadLabel: "チームゲーム",
		noRankedGamesFound: "ランキングゲームは見つかりませんでした！<br>代わりにランクのゲームを作成してみてください。",
		privateGameNameLabel: "ゲーム名",
		privateGamePasswordLabel: "パスワード",
		confirmSurrenderPrompt: "降伏？ 本気ですか？",
		canceSurrenderButtonCancel: "キャンセル",
		canceSurrenderButtonConfirm: "降伏",
		hotkeyUi: "[V] ユーザーインターフェイスの切り替え",
		options: "[ESC] オプション",
		researchMasonry: "[Y] バンカーを解錠するための研究用石積み\r\n(20 秒)",
		researchConstruction: "[O] 壁のロックを解除するための研究開発\r\n(30 秒)",
		researchEngineering: "[E] 要塞を解く研究工学\r\n(45 秒)",
		researchGunpowder: "[G] 大砲を解錠するための研究用火薬\r\n(25 秒)",
		researchRocketry: "[K] ミサイルを発射するためのロケット弾の研究\r\n(40 秒)",
		researchAtomicTheory: "[T] 核兵器のロック解除のための原子論の研究\r\n(60 秒)",
		researchFutureTech: "[F] 将来の技術を研究する\r\n(90 秒)",
		attack: "[A] すべての部隊との攻撃",
		splitAttack: "[S] あなたの部隊の半分で攻撃する",
		deploy: "[D] 予備軍をタイルに配置する",
		rush: "[R] あなたの市民からの軍隊を急いでください。 文化のボーナスによって支えられた ",
		defenseLabel: ['バンカー', '壁', '要塞'],
		boostsTileDefenses: '[B] タイル防御を強化する +',
		reducesWeaponsBy: ' 武器の被害を軽減する ',
		fireCannons: '[C] 隣接するタイルの火砲。 偉大な将軍によって支えられた。\r\n',
		launchMissile: '[M] どの地域でもミサイルを発射する。 偉大な将軍によって支えられた。\r\n',
		launchNuke: "[N] どの地域でも核兵器を発射する。 軍隊の80〜99％を殺し、すべての構造物を破壊する。",
		foodBonusTitle: "フードボーナス",
		foodMilestoneTitle: "食糧マイルストーンは予備軍を生み出します。",
		scienceBonusTitle: "サイエンスボーナス",
		scienceMilestoneTitle: "科学は構造物、火器、研究技術の構築に使われます。",
		cultureBonusTitle: "文化のボーナス",
		cultureMilestoneTitle: "文化のマイルストーンは特別な報酬を生む。",
		troopFlex: "軍を征服した領土に展開する",
		currentYear: "今年です！",
		energyWrap: "エネルギーは、軍隊を攻撃し、移動し、展開し、突進させるために使用されます。",
		foodWrap: "食糧マイルストーンは予備軍を生み出す",
		scienceWrap: "科学は構造物、兵器、研究技術の構築に使われます。",
		cultureWrap: "文化のマイルストーンは特別な報酬を生み出します",
		generalWrap: "偉大な将軍が軍隊攻撃を後押しする",
		tacticianWrap: "大手タクティシャンが軍隊防衛を強化",
		energyTimerBase: "各ターンの終わりにリソースが更新されます。",
		hideUi: "[V] ユーザーインターフェイスを隠す",
		toggleFlags: "フラグをトグルする",
		hotkeys: "ホットキー",
		gameOptions: "[ESC] オプション",
		surrender: "降伏",
		exitSpectate: "スペクトラムを終了",
		uninhabited: "無人",
		barbarianTribe: "野蛮人部族",
		Despotism: [
			'独自のタイルによる自由な動き',
			'火薬で始める',
			'バンカーで始める',
			'最大2倍の軍の攻撃サイズ',
		],
		Monarchy: [
			'+2防御',
			'2つの食物から+1の文化',
			'50％の文化のボーナスを開始',
			'+2大砲ダメージ',
		],
		Democracy: [
			'最大4倍の展開',
			'あなたがタイルを紛失したときに3の予備軍',
			'科学のボーナスを開始する50％',
			'文化的マイルストーン要件の削減',
		],
		Fundamentalism: [
			'オーバーラン：4倍の優位性で即時に勝利',
			'浸透：-1構造防御',
			'速い成長：食糧マイルストーン要件の削減',
			'+2軍隊報酬ボーナス',
		],
		Fascism: [
			'+1の攻撃',
			'防御構造ごとにタイルから+1の攻撃',
			'+4攻撃対野蛮人',
			'各展開のボーナス軍',
		],
		Republic: [
			'+1エネルギー',
			'戦闘医は勝利時に50％の兵士を癒す',
			'石積みから始めよう',
			'野蛮人の50％の報酬ボーナス',
		],
		Communism: [
			'偉大な人から始めましょう',
			'4食から+1科学',
			'無人地帯に軍隊を配備できる',
			'野蛮人から2倍の報酬ボーナスが見つかりました',
		],
		removeCPU: 'コンピュータを削除する',
		addCPU: 'コンピュータを追加する',
		lobbyRankedMatch: 'ランキングマッチ',
		lobbyGameNameLabel: 'ゲーム名',
		lobbyGamePasswordLabel: 'パスワード',
		lobbyGameModeLabel: 'ゲームモード',
		lobbyGameMapLabel: '地図',
		lobbyMaxPlayersLabel: '最大プレイヤー',
		startGame: 'ゲームをスタート',
		cancelGame: '出口',
		setNationName: '国名',
		submitNationName: '国名を更新する',
		setNationFlag: '国旗',
		leaderboardRankedBtn: 'ランキング',
		leaderboardFfaBtn: '万人に無料',
		leaderboardTeamBtn: 'チーム',
		playNowBtn: '今すぐプレー',
		create: '万人に無料',
		createTeamBtn: 'チームゲーム',
		joinPrivateGameBtn: 'プライベートゲームに参加する',
		createRankedBtn: 'マッチを作成する',
		joinRankedGame: 'マッチ',
		toggleNation: '国を設定する',
		leaderboardBtn: 'リーダーボード',
		gameTableName: 'ゲーム名',
		gameTableMap: '地図',
		gameTableType: 'タイプ',
		friendStatus: '友達リストを表示',
		addFriend: '友だちを切り替える',
		ignoreStatus: '無視リストを表示する',
		ignoreUser: 'アカウントを無視する',
		whoAccount: 'クエリアカウント',
		whisperAccount: 'プライベートメッセージ',
		changeChannel: 'チャネルを変更する',
		getHelp: 'チャットコマンド',
		howToPlay: '遊び方',
		brokenNet: 'ようこそ Broken.net!',
		optionsHeader: 'オプション',
		musicVolume: 'ミュージックボリューム',
		soundVolume: '効果音のボリューム',
		bibleMode: '聖書モード',
		windowSize: 'ウィンドウサイズ',
		currentWindowSize: '全画面表示',
		windowFullScreen: '全画面表示',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'ゲームを終了',
		versionSpan: 'バージョン ',
		foodMilestoneLabel: 'フード',
		scienceMilestoneLabel: '科学',
		cultureMilestoneLabel: '文化',
	},
	turkish: {
		resetGame: 'Oyunu Sıfırla',
		updateNationBtn: 'Tamam',
		playerColor: 'Oyuncu Rengi',
		team: 'Takım',
		damage: ' hasar',
		hudAttack: 'saldırı: Hedef seç',
		hudSplitAttack: 'Bölünmüş Saldırı: Hedef seç',
		hudFireCannons: 'Ateş topları',
		hudLaunchMissile: 'Füze Başlat',
		hudLaunchNuke: 'Nükleer Bomba Başlat',
		resourceUiWidth: '28rem',
		selectTarget: 'Hedef seç',
		reserveLabel: 'Rezerv',
		troopsLabel: 'Asker',
		youHaveJoined: 'Oyuna katıldınız: ',
		startingGame: "Oyun başlatılıyor ",
		to: 'için ',
		whispers: ' fısıldıyor ',
		joinedChannel: "Kanala katıldık: ",
		selectTeam: 'Takım Seç',
		selectPlayerColor: 'Oyuncu Rengi Seç',
		difficulties: {
			'Very Easy': 'Çok kolay',
			Easy: 'Kolay',
			Normal: 'Normal',
			Hard: 'Zor',
			'Very Hard': 'Çok zor',
			Mania: 'Cinnet',
			Juggernaut: 'önüne gelen her şeyi yıkan güç'
		},
		governments: {
			Despotism: 'Despotluk',
			Monarchy: 'Monarşi',
			Democracy: 'Demokrasi',
			Fundamentalism: 'Aşırı tutuculuk',
			Fascism: 'Faşizm',
			Republic: 'Cumhuriyet',
			Communism: 'Komünizm',
			Random: 'Rasgele'
		},
		random: 'Random',
		abAttack: "Saldırı",
		abSplitAttack: "Bölünmüş Saldırı",
		abDeploy: "Askerleri dağıt",
		abRush: "Acele asker",
		abBuild: "İnşa etmek",
		abCannons: "Ateş topları",
		abMissile: "Füze Başlat",
		abNuke: "Nükleer Bomba Başlat",
		abResearch: "Araştırma",
		abMasonry: "Duvarcılık",
		abConstruction: "İnşaat",
		abEngineering: "Mühendislik",
		abGunpowder: "Barut",
		abRocketry: "Füze bilimi",
		abAtomic: "Atomik teori",
		abFuture: "Gelecek Teknoloji",
		hostLeft: "Ev sahibi lobiden ayrıldı.",
		needTwoPlayers: "Oyuna başlamak için iki oyuncuya ihtiyacın var! Oyuna başlamak için oyuncuların katılmasını veya bir bilgisayar oyuncusu eklemesini bekleyin.",
		failedToLoad: "Oyun verileri yüklenemedi.",
		flagChanged: "Ülkenizin bayrağı şimdi: ",
		rankedSearch: "Sıralı oyunlar aranıyor ...",
		noRankedFound: "Sıralı oyun bulunamadı!<br>Bunun yerine sıralı bir oyun oluşturmayı deneyin.",
		notScience: "Yeterli bilim yok!",
		needTwoUnits: "Hareket etmek veya saldırmak için en az 2 askere ihtiyacınız var!",
		maxUnits: "Bu bölgede maksimum sayıda birim var!",
		friendlyFire: "Dost ateşi! Bu senin takım arkadaşın!",
		notEnoughEnergy: 'Yeterli enerji yok!',
		notYourTile: 'Bu karoya sahip değilsin.',
		noTroopsAvailable: "Dağıtım için asker yok!",
		badGameName: "Oyun adı en az 4-32 karakter olmalıdır.",
		notEnoughPlayers: "Oyunun 2-8 oyuncu olması gerekir.",
		newNationName: "Yeni ulusun adı: ",
		verifyingSteam: "Steam Kimlik Bilgilerini Doğrulama ...",
		steamNotFound: "Steam algılanamıyor. Lütfen Steam'i başlatın ve tekrar deneyin!",
		logoutSuccess: "Çıkış başarılı",
		logoutFailed: "Çıkış başarısız",
		ribbonTitle: ['',
			'Ulusal Savaş Madalyası',
			'Taktik Nuke Tanıma Ödülü',
			'İyi Davranış Ödülü',
			"Vatansever Hizmet Şeridi",
			'Sivil Hizmet Şeridi',//5
			'Bronz Meritorious Madalyası',
			'Bronz Hizmet Madalyası',
			'Bronz Seferi Madalyası',
			'Bronz çapraz',
			'Gümüş haç',//10
			'Altın haç',
			'Platin Çapraz',
			'Devrimci Sebep Ödülü',
			'Stratejik Savaş Ödülü',
			'Savaş Hizmet Ödülü', //15
			'Savaş Gallantry Ödülü',
			"Stalwart Conqueror'ın Madalyası",
			"Diktatörün Kılıcı",
			"Kral Regalia",
			"Archon'un Ölçekleri",//20
			'İlahi Antlaşma',
			"İmparator'un Fascesine",
			"Kartal Şubesi",
			"Yoldaşın Orakı",
			'Altın Sefer Madalyası',//25
			'Altın Meritorious Madalyası',
			'Altın Servis Madalyası',
			"Şampiyon Madalyası",
			"Fatih'in Madalyası",
			"Komutanın Madalyası",//30
			"Cesur Kahramanlık Ödülü",
			'Küresel Savaş Seferi Madalyası',
			'Gümüş Sefer Madalyası',
			'Gümüş Meritorious Madalyası',
			'Gümüş Servis Madalyası',//35
			"Mühendisin Servis Şeridi",
		],
		ribbonDescription: ['', // 0
			'Ulusunu kurdu',
			'Nükleer silahlı bir kaleyi yok etti',
			'Arkadaş listene iki yoldaş ekle',
			'Ulusal bayrağını güncelledi',
			"Ülkenizin adını güncellendi",//5
			'10 sıralı oyunlar kazanıldı',
			'10 takım oyununu kazandım',
			'Tüm oyunlar için 10 bedava kazanıldı',
			'Elde edilen 1800+ değerlendirme',
			'Elde edilen 2100+ değerlendirme',//10
			'Elde edilen 2400+ değerlendirme',
			'Elde edilen 2700+ değerlendirme',
			'Büyük Devrimci, 100+ birimle bir çini fethetti', //13
			'2 ile 1 arasında öldürme oranıyla oyun kazanın',
			'Üst üste 10 oyun kazanıldı', // 15
			'Üst üste 25 oyun kazanıldı',
			'Bir kale ile bir kiremit fethetti',// 17
			"Despotizm altında bir oyun kazandı",
			'Monarşi olarak bir oyun kazandı',
			'Demokrasi olarak bir oyun kazandı',//20
			'Temelcilik altında bir oyun kazandı',
			'Faşizmin altında bir oyun kazandı',
			'Cumhuriyet olarak oyun kazanıldı',
			'Komünizm altında bir oyun kazandı',
			'Tüm oyunlar için bedava 500 kazanıldı',//25
			'500 sıralı oyunlar kazanıldı',
			'500 takım oyunu kazandı',
			"Sıralı skor tablosunda en üst sırada # 10",
			"Sıralı skor tablosunda en üstte 100 numara",
			"Sıralı skor tablosunda en üst # 1000",//30
			"Juggernaut'u yendi",
			'Tüm oyun için 8 oyuncu ücretsiz kazanın',
			'Tüm oyunlar için 100 bedava kazanıldı',
			'100 sıralı oyunlar kazanıldı',
			'100 takım oyunu kazandı',//35
			'Bir kale inşa et',
		],
		gameNameNotValid: "Oyun ismi geçerli değil!",
		congratulations: "Tebrik ederiz!",
		gameVictory: "Küresel tahakküm kampanyanız başarılı oldu!",
		victory: "Zafer",
		armistice: "Mütareke!",
		gameArmistice: "Kampanya askıya alındı!",
		ceaseFire: "Ateş etmeyin",
		defeat: "Yenilgi!",
		gameDefeat: "Dünya hakimiyeti için kampanyanız başarısız oldu!",
		concede: "Yenilgiyi kabul et",
		spectate: "Spectate",
		defeatIn: "Yenilgi ",
		statOverview: "Genel bakış",
		statUnits: "Birimler",
		statStructures: "Yapılar",
		statWeapons: "Silahlar",
		statResources: "Kaynaklar",
		tabUnits: "Birimler",
		tabStructures: "Yapılar",
		tabWeapons: "Silahlar",
		tabResources: "Kaynaklar",
		tabTotalScore: "Toplam puan",
		tabEarned: "Kazanılan",
		tabDeployed: "Dağıtılan",
		tabKilled: "Öldürülen",
		tabLost: "Kayıp",
		tabBunkers: "Bunker'lar",
		tabWalls: "Duvarlar",
		tabFortresses: "Kale",
		tabCannons: "Toplar",
		tabMissiles: "Füzeler",
		tabNukes: "Nükleer bombalar",
		tabEnergy: "Enerji",
		tabScience: "Bilim",
		tabFood: "Gıda",
		tabCulture: "Kültür",
		gameDuration: "Oyun Süresi ",
		endGame: "Son Oyun",
		joinPrivateGameBtnConfirm: "Oyuna katılmak",
		createGameHead: "Tüm Oyun İçin Ücretsiz",
		createRankedGameHead: "Sıralama Oyunu",
		createGameNameLabel: "Oyun Adı",
		createGamePasswordLabel: "Şifre (isteğe bağlı)",
		createGameMaxPlayerLabel: "Maksimum Oyuncular:",
		createGameMapLabel: "Harita",
		createGame: "Oyun oluştur",
		createTeamGameHeadLabel: "Takım oyunu",
		noRankedGamesFound: "Sıralı oyun bulunamadı!<br>Bunun yerine sıralı bir oyun oluşturmayı deneyin.",
		privateGameNameLabel: "Oyun Adı",
		privateGamePasswordLabel: "Parola",
		confirmSurrenderPrompt: "Teslim? Emin misiniz?\n",
		canceSurrenderButtonCancel: "İptal etmek",
		canceSurrenderButtonConfirm: "Teslim",
		hotkeyUi: "[V] Kullanıcı Arayüzünü Değiştir",
		options: "[ESC] Seçenekler",
		researchMasonry: "[Y] Bunker kilidini açmak için araştırma masonluğu\r\n(20 saniye)",
		researchConstruction: "[O] Duvarların kilidini açmak için araştırma inşaatı\r\n(30 saniye)",
		researchEngineering: "[E] Kalenin kilidini açmak için araştırma mühendisliği\r\n(45 saniye)",
		researchGunpowder: "[G] Silah kilidini açmak için araştırma barutu\r\n(25 saniye)",
		researchRocketry: "[K] Füzeleri açmak için araştırma roketry\r\n(40 saniye)",
		researchAtomicTheory: "[T] Nükleer silahların kilidini açmak için atomik teori araştırma\r\n(60 saniye)",
		researchFutureTech: "[F] Gelecekteki teknolojiyi araştırın\r\n(90 saniye)",
		attack: "[A] Tüm birliklere saldır",
		splitAttack: "[S] Askerlerinizin yarısına saldırı",
		deploy: "[D] Yedek birlikleri bir döşemeye dağıt",
		rush: "[R] Askerlerinizden acele et. Kültür bonusu ile artırıldı ",
		defenseLabel: ['Sığınak', 'Duvar', 'Kale'],
		boostsTileDefenses: '[B] Fayans savunmasını güçlendirir +',
		reducesWeaponsBy: ' ve silah hasarını azaltır ',
		fireCannons: '[C] Bitişik bir kiremitte ateş topları. Büyük generaller tarafından desteklendi.\r\n',
		launchMissile: '[M] Herhangi bir bölgede bir füze fırlatın. Büyük generaller tarafından desteklendi.\r\n',
		launchNuke: "[N] Herhangi bir bölgede nükleer silahı fırlatın. Askerlerin% 80-99'unu öldürür ve tüm yapıları yok eder.",
		foodBonusTitle: "Yemek Bonusu",
		foodMilestoneTitle: "Gıda kilometre taşları yedek birlikler üretir.",
		scienceBonusTitle: "Bilim Bonusu",
		scienceMilestoneTitle: "Bilim yapıları, yangın silahlarını ve araştırma teknolojisini inşa etmek için kullanılır.",
		cultureBonusTitle: "Kültür Bonusu",
		cultureMilestoneTitle: "Kültür kilometre taşları özel ödüller üretir.",
		troopFlex: "Askerleri fethedilen bölgelere dağıtmak",
		currentYear: "Bu yıl geçerli!",
		energyWrap: "Enerji, birliklere saldırmak, taşımak, konuşlandırmak ve acele etmek için kullanılır.",
		foodWrap: "Gıda kilometre taşları yedek birlikler üretir",
		scienceWrap: "Bilim yapıları, silahları ve araştırma teknolojisini inşa etmek için kullanılır.",
		cultureWrap: "Kültür kilometre taşları özel ödüller üretir",
		generalWrap: "Büyük generaller asker saldırısını hızlandırdı",
		tacticianWrap: "Büyük taktikçiler asker savunma savunmak",
		energyTimerBase: "Kaynaklar her dönüşün sonunda güncellenir.",
		hideUi: "[V] Kullanıcı Arayüzünü Gizle",
		toggleFlags: "Bayrakları Değiştir",
		hotkeys: "Kısayol tuşları",
		gameOptions: "[ESC] Seçenekler",
		surrender: "Teslim",
		exitSpectate: "Çıkış Spectate",
		uninhabited: "Issız",
		barbarianTribe: "Barbar kabilesi",
		Despotism: [
			'Kendi çinileri ile serbest hareket',
			'Barut ile başla',
			'Bir sığınakla başla',
			'2x maksimum ordu saldırı boyutu',
		],
		Monarchy: [
			'+2 savunma',
			'2 yemek +1 kültür',
			'% 50 başlangıç kültürü bonusu',
			'+2 top hasarı',
		],
		Democracy: [
			'4x maksimum asker dağıtımı',
			'Bir döşemeyi kaybettiğinde +3 yedek birliği',
			'% 50 başlayan bilim bonusu',
			'Azaltılmış kültür kilometre taşı gerekliliği',
		],
		Fundamentalism: [
			'Taşma: 4x avantajı ile anında kazanç',
			'Sızma: -1 yapı savunması',
			'Hızlı büyüme: Azaltılmış gıda kilometre taşı gerekliliği',
			'+2 asker ödül bonusu',
		],
		Fascism: [
			'+1 saldırı',
			'Her savunma yapısı için fayanstan +1 saldırı',
			'Barbarlar vs + 4 saldırı',
			'Her dağıtımda bonus birliği',
		],
		Republic: [
			'+1 enerji',
			'Savaş sağlık görevlileri zafere karşı% 50 asker toplar',
			'Duvardan başla',
			'Barbarlardan +% 50 yağma ödül bonusu',
		],
		Communism: [
			'Harika biriyle başla',
			'4 gıdadan +1 bilim',
			'Askerleri ıssız bölgelere dağıtabilir',
			'Barbarlardan 2x keşif ödül bonusu',
		],
		removeCPU: 'Bilgisayarı Kaldır',
		addCPU: 'Bilgisayar ekle',
		lobbyRankedMatch: 'Dereceli maç',
		lobbyGameNameLabel: 'Oyun Adı',
		lobbyGamePasswordLabel: 'Parola',
		lobbyGameModeLabel: 'Oyun modu',
		lobbyGameMapLabel: 'Harita',
		lobbyMaxPlayersLabel: 'Maksimum oyuncu',
		startGame: 'Oyunu başlatmak',
		cancelGame: 'çıkış',
		setNationName: 'Ulus adı',
		submitNationName: 'Nation Adını Güncelle',
		setNationFlag: 'Ulusal Bayrak',
		leaderboardRankedBtn: 'sırada',
		leaderboardFfaBtn: 'Herkes tek',
		leaderboardTeamBtn: 'Takım',
		playNowBtn: 'Şimdi oyna',
		create: 'Herkes tek',
		createTeamBtn: 'Takım oyunu',
		joinPrivateGameBtn: 'Özel Oyuna Katıl',
		createRankedBtn: 'Benzer Eşlemeyi Oluşturun',
		joinRankedGame: 'Benzer Eşleşmeye Katıl',
		toggleNation: 'Ulus yapılandır',
		leaderboardBtn: 'Liderler Sıralaması',
		gameTableName: 'Oyun Adı',
		gameTableMap: 'Harita',
		gameTableType: 'tip',
		friendStatus: 'Arkadaş Listesini Göster',
		addFriend: 'Arkadaşını Değiştir',
		ignoreStatus: 'Yoksayılanları Göster',
		ignoreUser: 'Hesabı Yoksay',
		whoAccount: 'Sorgu Hesabı',
		whisperAccount: 'Özel mesaj',
		changeChannel: 'Kanalı değiştir',
		getHelp: 'Sohbet Komutları',
		howToPlay: 'Nasıl oynanır',
		brokenNet: 'Hoşgeldiniz Broken.net!',
		optionsHeader: 'Seçenekler',
		musicVolume: 'Müzik sesi',
		soundVolume: 'Ses efekti ses',
		bibleMode: 'İncil modu',
		windowSize: 'Pencere boyutu',
		currentWindowSize: 'Tam ekran',
		windowFullScreen: 'Tam ekran',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Oyundan çıkış',
		versionSpan: 'Versiyon ',
		foodMilestoneLabel: 'Gıda',
		scienceMilestoneLabel: 'Bilim',
		cultureMilestoneLabel: 'Kültür',
	},
	polish: {
		resetGame: 'Zresetuj Grę',
		updateNationBtn: 'Gotowe',
		playerColor: 'Kolor gracza',
		team: 'Zespół',
		damage: ' uszkodzić',
		hudAttack: 'Atak: Wybierz cel',
		hudSplitAttack: 'Rozdzielać Atak: Wybierz cel',
		hudFireCannons: 'Ogniowe działa',
		hudLaunchMissile: 'Uruchom pocisk',
		hudLaunchNuke: 'Uruchom bombę jądrową',
		resourceUiWidth: '28rem',
		selectTarget: 'Wybierz cel',
		reserveLabel: 'Rezerwować',
		troopsLabel: 'Wojsko',
		youHaveJoined: 'Wstąpiłeś do gry: ',
		startingGame: "Rozpoczęcie gry w ",
		to: 'Do ',
		whispers: ' szepty: ',
		joinedChannel: "Dołączyłeś kanał: ",
		selectTeam: 'Wybierz drużynę',
		selectPlayerColor: 'Wybierz Kolor odtwarzacza',
		difficulties: {
			'Very Easy': 'Bardzo łatwe',
			Easy: 'Łatwo',
			Normal: 'Normalna',
			Hard: 'Ciężko',
			'Very Hard': 'Bardzo trudny',
			Mania: 'Mania',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Despotyzm',
			Monarchy: 'Monarchia',
			Democracy: 'Demokracja',
			Fundamentalism: 'Fundamentalizm',
			Fascism: 'Faszyzm',
			Republic: 'Republika',
			Communism: 'Komunizm',
			Random: 'Losowy'
		},
		random: 'Losowy',
		abAttack: "Atak",
		abSplitAttack: "Rozdzielać Atak",
		abDeploy: "Rozmieść oddziały",
		abRush: "Pośpiech Wojsko",
		abBuild: "Budować",
		abCannons: "Ogniowe działa",
		abMissile: "Uruchom pocisk",
		abNuke: "Uruchom bombę jądrową",
		abResearch: "Badania",
		abMasonry: "Kamieniarstwo",
		abConstruction: "Budowa",
		abEngineering: "Inżynieria",
		abGunpowder: "Proch strzelniczy",
		abRocketry: "Technika rakietowa",
		abAtomic: "Teoria atomowa",
		abFuture: "Przyszłość Technologia",
		hostLeft: "Gospodarz opuścił hol.",
		needTwoPlayers: "Aby rozpocząć grę, potrzebujesz dwóch graczy! Zaczekaj, aż gracze dołączą lub dodaj odtwarzacz komputerowy, aby rozpocząć.",
		failedToLoad: "Nie udało się wczytać danych gry.",
		flagChanged: "Flaga twojego narodu jest teraz: ",
		rankedSearch: "Wyszukiwanie gier rankingowych ...",
		noRankedFound: "Nie znaleziono gier rankingowych!<br>Spróbuj zamiast tego utworzyć grę rankingową.",
		notScience: "Za mało nauki!",
		needTwoUnits: "Do przeniesienia lub ataku potrzeba co najmniej 2 żołnierzy!",
		maxUnits: "To terytorium ma maksymalną liczbę jednostek!",
		friendlyFire: "Przyjazny ogień! To twój kolega z drużyny!",
		notEnoughEnergy: 'Niewystarczająco energii!',
		notYourTile: 'Nie jesteś właścicielem tego kafelka.',
		noTroopsAvailable: "Brak oddziałów do rozmieszczenia!",
		badGameName: "Nazwa gry musi składać się z co najmniej 4-32 znaków.",
		notEnoughPlayers: "Gra musi mieć 2-8 graczy.",
		newNationName: "Twoja nowa nazwa to: ",
		verifyingSteam: "Weryfikuję poświadczenia Steam ...",
		steamNotFound: "Nie można wykryć Steam. Uruchom Steam i spróbuj ponownie!",
		logoutSuccess: "Wylogowanie zakończone powodzeniem",
		logoutFailed: "Logout nie powiódł się",
		ribbonTitle: ['',
			'Krajowy Medal walki',
			'Nagroda Tactical Nuke Uznanie',
			'Nagroda za dobrą kondycję',
			"Wstążka służbowa Patriota",
			'Wstążka usługi obywatelskiej',//5
			'Brązowy Medal Zasłużony',
			'Brązowy Medal za usługę',
			'Brązowy Medal Ekspedycyjny',
			'Brązowy krzyż',
			'Srebrny Krzyż',//10
			'Złoty Krzyż',
			'Krzyż platynowy',
			'Rewolucyjna nagroda za przyczynę',
			'Nagroda Strategic Działania wojenne',
			'Nagroda za Walka Usługa', //15
			'Walka Galanteria Nagroda',
			"Medal Koronnego Zwycięzcy",
			"Miecz dyktatora",
			"Regalia króla",
			"Łuski Archonta",//20
			'Boskie Przymierze',
			"Fasci Cesarza",
			"Oddział Orzeł",
			"Sierp Towarzysza",
			'Złoty Medal Ekspedycyjny',//25
			'Złoty Zasłużony Medal',
			'Złoty Medal za usługę',
			"Medal Czempiona",
			"Medal Zdobywcy",
			"Medal dowódcy",//30
			"Nagroda Nieustraszonego Bohatera",
			'Światowy Wojna Medal ekspedycyjny',
			'Srebro Medal ekspedycyjny',
			'Srebrny Medal Zasłużony',
			'Srebrny Medal za usługę',//35
			"Wstążka serwisowa inżyniera",
		],
		ribbonDescription: ['', // 0
			'Ustanowiłeś swój naród',
			'Zniszcz fortecę z bronią nuklearną',
			'Dodano dwóch towarzyszy do twojej listy znajomych',
			'Zaktualizowałeś swoją flagę narodową',
			"Zaktualizowałem nazwę twojego kraju",//5
			'Wygrał 10 gier rankingowych',
			'Wygrał 10 gier zespołowych',
			'Wygrałem 10 za darmo dla wszystkich gier',
			'Uzyskano ocenę 1800+',
			'Uzyskano ocenę 2100+',//10
			'Uzyskano ocenę 2400+',
			'Uzyskano ocenę 2700+',
			'Great Revolutionary zdobyli dachówkę z ponad 100 jednostkami', //13
			'Wygraj grę ze współczynnikiem zabicia 2 do 1',
			'Wygrał 10 gier z rzędu', // 15
			'Wygrał 25 gier z rzędu',
			'Podbił dachówkę z fortecą',// 17
			"Wygrał grę pod despotyzmem",
			'Wygrał grę jako Monarchia',
			'Wygrał grę jako Demokracja',//20
			'Wygrał grę w ramach Fundamentalizmu',
			'Wygrał grę pod faszyzmem',
			'Wygrał grę jako Republika',
			'Wygrał grę w komunizmie',
			'Wygrał 500 za darmo dla wszystkich gier',//25
			'Wygrał 500 gier rankingowych',
			'Wygrał 500 gier zespołowych',
			"Uderz w górę # 10 na tablicy wyników rankingu",
			"Uderz w górę # 100 na tablicy wyników rankingu",
			"Uderzaj w górę # 1000 na tablicy wyników rankingu",//30
			"Pokonaj Juggernaut",
			'Wygraj 8 graczy za darmo dla wszystkich gier',
			'Wygrałem 100 za darmo we wszystkich grach',
			'Wygrał 100 gier rankingowych',
			'Wygrał 100 gier zespołowych',//35
			'Zbuduj fortecę',
		],
		gameNameNotValid: "Nazwa gry jest nieprawidłowa!",
		congratulations: "Gratulacje!",
		gameVictory: "Twoja kampania na globalną dominację się udało!",
		victory: "Zwycięstwo",
		armistice: "Zawieszenie broni!",
		gameArmistice: "Kampania została zawieszona!",
		ceaseFire: "Zaprzestań ognia",
		defeat: "Pokonać!",
		gameDefeat: "Twoja kampania na rzecz dominacji nad światem się nie udała!",
		concede: "Przyznać Pokonać",
		spectate: "spostrzegać każdego",
		defeatIn: "Pokonaj w ",
		statOverview: "Przegląd",
		statUnits: "Jednostki",
		statStructures: "Struktury",
		statWeapons: "Bronie",
		statResources: "Zasoby",
		tabUnits: "Jednostki",
		tabStructures: "Struktury",
		tabWeapons: "Bronie",
		tabResources: "Zasoby",
		tabTotalScore: "Całkowity wynik",
		tabEarned: "Zdobyte",
		tabDeployed: "Wdrożone",
		tabKilled: "Zabity",
		tabLost: "Stracony",
		tabBunkers: "Bunkry",
		tabWalls: "Ściany",
		tabFortresses: "Fortece",
		tabCannons: "Armaty",
		tabMissiles: "Pociski",
		tabNukes: "Bomby atomowe",
		tabEnergy: "Energia",
		tabScience: "Nauka",
		tabFood: "jedzenie",
		tabCulture: "Kultura",
		gameDuration: "Czas trwania gry ",
		endGame: "Koniec gry",
		joinPrivateGameBtnConfirm: "Dołącz do gry",
		createGameHead: "Darmowe gry dla wszystkich",
		createRankedGameHead: "Gra rankingowa",
		createGameNameLabel: "Nazwa gry",
		createGamePasswordLabel: "Hasło (opcjonalnie)",
		createGameMaxPlayerLabel: "Maksymalna liczba graczy:",
		createGameMapLabel: "Mapa",
		createGame: "Tworzyć grę",
		createTeamGameHeadLabel: "Gra zespołowa",
		noRankedGamesFound: "Nie znaleziono gier rankingowych!<br>Spróbuj zamiast tego utworzyć grę rankingową.",
		privateGameNameLabel: "Nazwa gry",
		privateGamePasswordLabel: "Hasło",
		confirmSurrenderPrompt: "Poddanie się? Jesteś pewny?\n",
		canceSurrenderButtonCancel: "Anuluj",
		canceSurrenderButtonConfirm: "Poddanie się",
		hotkeyUi: "[V] Przełącz interfejs użytkownika",
		options: "[ESC] Opcje",
		researchMasonry: "[Y] Badaj mury, aby odblokować bunkry\r\n(20 sekundy)",
		researchConstruction: "[O] Zbadaj konstrukcję, aby odblokować ściany\r\n(30 sekundy)",
		researchEngineering: "[E] Inżynieria badawcza, by odblokować fortece\r\n(45 sekundy)",
		researchGunpowder: "[G] Zbadaj proch, by odblokować działa\r\n(25 sekundy)",
		researchRocketry: "[K] Badaj rakietę, aby odblokować pociski\r\n(40 sekundy)",
		researchAtomicTheory: "[T] Zbadaj teorię atomową, aby odblokować broń nuklearną\r\n(60 sekundy)",
		researchFutureTech: "[F] Badaj przyszłą technologię\r\n(90 sekundy)",
		attack: "[A] Atakuj ze wszystkimi żołnierzami",
		splitAttack: "[S] Atakuj z połową swoich żołnierzy",
		deploy: "[D] Rozmieść oddziały rezerwowe na kafelek",
		rush: "[R] Pośpiekaj żołnierzy ze swoich obywateli. Zwiększona dzięki premii kultury ",
		defenseLabel: ['Bunkier', 'Ściana', 'Twierdza'],
		boostsTileDefenses: '[B] Zwiększa obronę płytek +',
		reducesWeaponsBy: ' i zmniejsza obrażenia broni o ',
		fireCannons: '[C] Działa ogniowe na sąsiedniej płytce. Wzmocniony przez wielkich generałów.\r\n',
		launchMissile: '[M] Uruchom rakietę na dowolnym terytorium. Wzmocniony przez wielkich generałów.\r\n',
		launchNuke: "[N] Uruchom broń jądrową na dowolnym terytorium. Zabija 80-99% żołnierzy i niszczy wszystkie struktury.",
		foodBonusTitle: "Bonus żywnościowy",
		foodMilestoneTitle: "Kamienie milowe żywności wytwarzają oddziały rezerwowe.",
		scienceBonusTitle: "Bonus naukowy",
		scienceMilestoneTitle: "Nauka służy budowaniu struktur, broni palnej i technologii badawczej.",
		cultureBonusTitle: "Bonus kulturowy",
		cultureMilestoneTitle: "Kamienie milowe kultury dają specjalne nagrody.",
		troopFlex: "Rozmieść oddziały na podbite terytoria",
		currentYear: "To jest bieżący rok!",
		energyWrap: "Energia służy do atakowania, przemieszczania, rozmieszczania i spieszenia żołnierzy.",
		foodWrap: "Kamienie milowe żywności wytwarzają oddziały rezerwowe",
		scienceWrap: "Nauka służy budowaniu struktur, broni i technologii badawczej.",
		cultureWrap: "Kamienie milowe kultury dają specjalne nagrody",
		generalWrap: "Wielcy generałowie zwiększają natarcie wojsk",
		tacticianWrap: "Wielcy Taktycy zwiększają obronę wojsk",
		energyTimerBase: "Aktualizacja zasobów pod koniec każdej tury.",
		hideUi: "[V] Ukryj interfejs użytkownika",
		toggleFlags: "Przełącz flagi",
		hotkeys: "Skróty klawiszowe",
		gameOptions: "[ESC] Opcje",
		surrender: "Poddanie się",
		exitSpectate: "Wyjdź z Spectate",
		uninhabited: "Bezludny",
		barbarianTribe: "Barbarzyńskie plemię",
		Despotism: [
			'Swobodny przepływ przez własne płytki',
			'Zacznij od prochu strzelniczego',
			'Zacznij od bunkra',
			'2x maksymalny rozmiar ataku armii',
		],
		Monarchy: [
			'+2 obrona',
			'+1 kultura z 2 pokarmów',
			'50% premii za kulturę początkową',
			'+2 obrażenia od armat',
		],
		Democracy: [
			'4x maksymalne rozmieszczenie wojsk',
			'+3 rezerwowe wojska, gdy stracisz dachówkę',
			'50% początkowej premii naukowej',
			'Zredukowane wymagania dotyczące kamienia milowego',
		],
		Fundamentalism: [
			'Najechać: Natychmiastowa wygrana z przewagą 4x',
			'Infiltracja: -1 obrona konstrukcji',
			'Szybki wzrost: Zredukowane zapotrzebowanie na kamień milowy',
			'+2 bonus od nagrody wojskowej',
		],
		Fascism: [
			'+1 atak',
			'+1 atak z kafli dla każdej struktury obronnej',
			'+4 atak kontra barbarzyńcy',
			'Oddział bonusowy przy każdym wdrożeniu',
		],
		Republic: [
			'+1 energia',
			'Bojowi medaliści leczą 50% żołnierzy po zwycięstwie',
			'Zacznij od muru',
			'+ 50% rabunku premii od barbarzyńców',
		],
		Communism: [
			'Zacznij od świetnej osoby',
			'+1 nauka z 4 pokarmów',
			'Może rozmieścić oddziały na niezamieszkane terytorium',
			'2x odkrył premię od barbarzyńców',
		],
		removeCPU: 'Usuń komputer',
		addCPU: 'Dodaj komputer',
		lobbyRankedMatch: 'Mecz rankingowy',
		lobbyGameNameLabel: 'Nazwa gry',
		lobbyGamePasswordLabel: 'Hasło',
		lobbyGameModeLabel: 'Tryb gry',
		lobbyGameMapLabel: 'Mapa',
		lobbyMaxPlayersLabel: 'Maksimum graczy',
		startGame: 'Rozpocząć grę',
		cancelGame: 'Wyjście',
		setNationName: 'Nazwa narodu',
		submitNationName: 'Zaktualizuj nazwę narodu',
		setNationFlag: 'Flaga narodowa',
		leaderboardRankedBtn: 'Miejsce',
		leaderboardFfaBtn: 'Darmowy dla wszystkich',
		leaderboardTeamBtn: 'Zespół',
		playNowBtn: 'Zagraj teraz',
		create: 'Darmowy dla wszystkich',
		createTeamBtn: 'Gra zespołowa',
		joinPrivateGameBtn: 'Dołącz do prywatnej gry',
		createRankedBtn: 'Utwórz dopasowanie rankingowe',
		joinRankedGame: 'Dołącz do meczu rankingowego',
		toggleNation: 'Skonfiguruj naród',
		leaderboardBtn: 'Tablica rekordów',
		gameTableName: 'Nazwa gry',
		gameTableMap: 'Mapa',
		gameTableType: 'Rodzaj',
		friendStatus: 'Pokaż listę znajomych',
		addFriend: 'Przełącz znajomego',
		ignoreStatus: 'Pokaż listę ignorowanych',
		ignoreUser: 'Zignoruj konto',
		whoAccount: 'Konto zapytania',
		whisperAccount: 'Prywatna wiadomość',
		changeChannel: 'Zmień kanał',
		getHelp: 'Polecenia czatu',
		howToPlay: 'Jak grać',
		brokenNet: 'Witamy w Broken.net!',
		optionsHeader: 'Opcje',
		musicVolume: 'Głośność muzyki',
		soundVolume: 'Głośność efektu dźwiękowego',
		bibleMode: 'Tryb biblijny',
		windowSize: 'Rozmiar okna',
		currentWindowSize: 'Pełny ekran',
		windowFullScreen: 'Pełny ekran',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Wyjdź z gry',
		versionSpan: 'Wersja ',
		foodMilestoneLabel: 'Jedzenie',
		scienceMilestoneLabel: 'Nauka',
		cultureMilestoneLabel: 'Kultura',
	},
	italian: {
		resetGame: 'Reimposta il Gioco',
		updateNationBtn: 'Fatto',
		playerColor: 'Colore del giocatore',
		team: 'Squadra',
		damage: ' danno',
		hudAttack: 'Attacco: Seleziona Target',
		hudSplitAttack: 'Attacco Diviso: Seleziona Target',
		hudFireCannons: 'Cannoni antincendio',
		hudLaunchMissile: 'Lancio del missile',
		hudLaunchNuke: 'Lancio della bomba nucleare',
		resourceUiWidth: '28rem',
		selectTarget: 'Seleziona Target',
		reserveLabel: 'Riserva',
		troopsLabel: 'Truppe',
		youHaveJoined: 'Ti sei iscritto al gioco: ',
		startingGame: "Iniziare il gioco in ",
		to: 'A ',
		whispers: ' sussurra ',
		joinedChannel: "Hai aderito al canale: ",
		selectTeam: 'Selezionare squadra',
		selectPlayerColor: 'Seleziona Colore giocatore',
		difficulties: {
			'Very Easy': 'Molto facile',
			Easy: 'Facile',
			Normal: 'Normale',
			Hard: 'Difficile',
			'Very Hard': 'Molto difficile',
			Mania: 'Mania',
			Juggernaut: 'Juggernaut'
		},
		governments: {
			Despotism: 'Dispotismo',
			Monarchy: 'Monarchia',
			Democracy: 'Democrazia',
			Fundamentalism: 'Fondamentalismo',
			Fascism: 'Fascismo',
			Republic: 'Repubblica',
			Communism: 'Comunismo',
			Random: 'Casuale'
		},
		random: 'Casuale',
		abAttack: "Attacco",
		abSplitAttack: "Attacco Diviso",
		abDeploy: "Distribuisci le truppe",
		abRush: "Corsa le truppe",
		abBuild: "Costruire",
		abCannons: "Cannoni antincendio",
		abMissile: "Lancio del missile",
		abNuke: "Lancio della bomba nucleare",
		abResearch: "Ricerca",
		abMasonry: "Opere murarie",
		abConstruction: "Costruzione",
		abEngineering: "Ingegneria",
		abGunpowder: "Polvere da sparo",
		abRocketry: "Missilistica",
		abAtomic: "Teoria atomica",
		abFuture: "Tecnologia del futuro",
		hostLeft: "L'host ha lasciato la lobby.",
		needTwoPlayers: "Hai bisogno di due giocatori per iniziare una partita! Attendi che i giocatori si uniscano o aggiungano un giocatore di computer per iniziare.",
		failedToLoad: "Impossibile caricare i dati di gioco.",
		flagChanged: "La bandiera della tua nazione è ora: ",
		rankedSearch: "Ricerca di giochi classificati ...",
		noRankedFound: "Nessun gioco classificato!<br>Prova invece a creare un gioco classificato.",
		notScience: "Non abbastanza scienza!",
		needTwoUnits: "Hai bisogno di almeno 2 truppe per muoverti o attaccare!",
		maxUnits: "Quel territorio ha il numero massimo di unità!",
		friendlyFire: "Fuoco amico! Questo è il tuo compagno di squadra!",
		notEnoughEnergy: 'Non abbastanza energia!',
		notYourTile: 'Non possiedi quella tessera.',
		noTroopsAvailable: "Nessuna truppa disponibile per la distribuzione!",
		badGameName: "Il nome del gioco deve essere di almeno 4-32 caratteri.",
		notEnoughPlayers: "Il gioco deve avere 2-8 giocatori.",
		newNationName: "Il tuo nuovo nome di nazione è: ",
		verifyingSteam: "Verifica delle credenziali di Steam ...",
		steamNotFound: "Impossibile rilevare Steam. Si prega di avviare Steam e riprovare!",
		logoutSuccess: "Logout riuscito",
		logoutFailed: "Logout fallito",
		ribbonTitle: ['',
			'Medaglia nazionale di combattimento',
			'Tactical Recke Award',
			'Premio di buona condotta',
			"Nastro di servizio del patriota",
			'Nastro di servizio civile',//5
			'Medaglia meritoria in bronzo',
			'Medaglia di bronzo',
			'Medaglia di spedizione in bronzo',
			'Croce di bronzo',
			"Croce d'argento",//10
			"Croce d'oro",
			'Croce di platino',
			'Premio causa rivoluzionaria',
			'Premio strategico di guerra',
			'Premio per il servizio di combattimento', //15
			'Premio per la lotta alla galanteria',
			"La potente medaglia conquistatrice",
			"Spada del dittatore",
			"Re's Regalia",
			"Scale di Archon",//20
			'Patto Divino',
			"Figli dell'Imperatore",
			"Ramo dell'aquila",
			"Falce del compagno",
			"Medaglia d'oro per spedizione",//25
			"Medaglia d'oro meritoria",
			"Medaglia d'oro del servizio",
			"La medaglia del campione",
			"Medaglia del conquistatore",
			"Medaglia del comandante",//30
			"Premio di eroismo intrepido",
			'Medaglia di spedizione della guerra globale',
			"Medaglia di spedizione d'argento",
			"Medaglia d'argento meritoria",
			"Medaglia d'argento al servizio",//35
			"Nastro di servizio tecnico",
		],
		ribbonDescription: ['', // 0
			'Stabilito la tua nazione',
			"Distrutto una fortezza con un'arma nucleare",
			'Aggiunti due compagni alla tua lista amici',
			'Aggiornata la tua bandiera nazionale',
			"Aggiornato il nome della tua nazione",//5
			'Ha vinto 10 giochi classificati',
			'Ha vinto 10 giochi di squadra',
			'Ha vinto 10 gratis per tutti i giochi',
			'Ottenuto una valutazione di 1800+',
			'Raggiunto il punteggio di 2100+',//10
			'Raggiunto il punteggio di 2400+',
			'Ottenuto una valutazione di 2700+',
			'Great Revolutionary ha conquistato una tessera con oltre 100 unità', //13
			'Vinci una partita con un rapporto di uccisione 2-a-1',
			'Ha vinto 10 partite di fila', // 15
			'Ha vinto 25 partite di fila',
			'Conquistato una tessera con una fortezza',// 17
			"Ha vinto un gioco sotto il dispotismo",
			'Ha vinto un gioco come una monarchia',
			'Ha vinto un gioco come una democrazia',//20
			'Ha vinto una partita sotto il fondamentalismo',
			'Ha vinto una partita sotto il fascismo',
			'Ha vinto un gioco come Repubblica',
			'Ha vinto una partita sotto il comunismo',
			'Hai vinto 500 gratis per tutti i giochi',//25
			'Hai vinto 500 partite classificate',
			'Ha vinto 500 giochi di squadra',
			"Hit top 10 nella classifica classificata",
			"Hit top 100 nella classifica classificata",
			"Hit top # 1000 nella classifica classificata",//30
			"Sconfitto il Juggernaut",
			'Vinci un 8 giocatori gratis per tutti i giochi',
			'Ha vinto 100 gratis per tutti i giochi',
			'Ha vinto 100 giochi classificati',
			'Won 100 team gamesHa vinto 100 giochi di squadra',//35
			'Costruisci una fortezza',
		],
		gameNameNotValid: "Il nome del gioco non è valido!",
		congratulations: "Complimenti!",
		gameVictory: "La tua campagna per il dominio globale è riuscita!",
		victory: "Vittoria",
		armistice: "Armistizio!",
		gameArmistice: "La campagna è stata sospesa!",
		ceaseFire: "Cessate il fuoco",
		defeat: "La sconfitta!",
		gameDefeat: "La tua campagna per il dominio del mondo ha fallito!",
		concede: "Concedere la sconfitta",
		spectate: "Spettare",
		defeatIn: "Sconfiggi dentro ",
		statOverview: "Panoramica",
		statUnits: "Unità",
		statStructures: "Strutture",
		statWeapons: "Armi",
		statResources: "Risorse",
		tabUnits: "Unità",
		tabStructures: "Strutture",
		tabWeapons: "Armi",
		tabResources: "Risorse",
		tabTotalScore: "Punteggio totale",
		tabEarned: "Guadagnato",
		tabDeployed: "Schierato",
		tabKilled: "Ucciso",
		tabLost: "Perduto",
		tabBunkers: "Bunkers",
		tabWalls: "Muri",
		tabFortresses: "Fortezze",
		tabCannons: "Cannoni",
		tabMissiles: "Missili",
		tabNukes: "Bombe nucleari",
		tabEnergy: "Energia",
		tabScience: "Scienza",
		tabFood: "Cibo",
		tabCulture: "Cultura",
		gameDuration: "Durata del gioco ",
		endGame: "Fine del gioco",
		joinPrivateGameBtnConfirm: "Unisciti al gioco",
		createGameHead: "Unisciti al gioco",
		createRankedGameHead: "Gioco classificato",
		createGameNameLabel: "Nome del gioco",
		createGamePasswordLabel: "Password (opzionale)",
		createGameMaxPlayerLabel: "Giocatori massimi:",
		createGameMapLabel: "Carta geografica",
		createGame: "Crea gioco",
		createTeamGameHeadLabel: "Gioco di squadra",
		noRankedGamesFound: "Nessun gioco classificato!<br>Prova invece a creare un gioco classificato.",
		privateGameNameLabel: "Nome del gioco",
		privateGamePasswordLabel: "Parola d'ordine",
		confirmSurrenderPrompt: "Resa? Sei sicuro?",
		canceSurrenderButtonCancel: "Annulla",
		canceSurrenderButtonConfirm: "Resa",
		hotkeyUi: "[V] Attiva l'interfaccia utente",
		options: "[ESC] Opzioni",
		researchMasonry: "[Y] Ricerca in muratura per sbloccare bunker\r\n(20 secondi)",
		researchConstruction: "[O] Ricerca costruzione per sbloccare i muri\r\n(30 secondi)",
		researchEngineering: "[E] Ingegneria della ricerca per sbloccare le fortezze\r\n(45 secondi)",
		researchGunpowder: "[G] Cerca la polvere da sparo per sbloccare i cannoni\r\n(25 secondi)",
		researchRocketry: "[K] Ricerca missilistica per sbloccare i missili\r\n(40 secondi)",
		researchAtomicTheory: "[T] Ricerca teoria atomica per sbloccare armi nucleari\r\n(60 secondi)",
		researchFutureTech: "[F] Ricerca tecnologia futura\r\n(90 secondi)",
		attack: "[A] Attacca con tutte le truppe",
		splitAttack: "[S] Attacca con metà delle tue truppe",
		deploy: "[D] Distribuisci truppe di riserva su una tessera",
		rush: "[R] Prendi le truppe dalla tua cittadinanza. Promosso dal bonus culturale ",
		defenseLabel: ['Bunker', 'Parete', 'Fortezza'],
		boostsTileDefenses: '[B] Aumenta le difese delle tessere +',
		reducesWeaponsBy: " e riduce i danni dell'arma di ",
		fireCannons: '[C] Cannoni da fuoco in una tessera adiacente. Spinta dai grandi generali.\r\n',
		launchMissile: '[M] Lancio di un missile su qualsiasi territorio. Spinta dai grandi generali.\r\n',
		launchNuke: "[N] Lanciare un'arma nucleare su qualsiasi territorio. Uccide l'80-99% delle truppe e distrugge tutte le strutture.",
		foodBonusTitle: "Bonus alimentare",
		foodMilestoneTitle: "Le pietre miliari del cibo producono truppe di riserva.",
		scienceBonusTitle: "Bonus scientifico",
		scienceMilestoneTitle: "La scienza viene utilizzata per costruire strutture, armi da fuoco e tecnologia di ricerca.",
		cultureBonusTitle: "Bonus culturale",
		cultureMilestoneTitle: "Le tappe della cultura producono premi speciali.",
		troopFlex: "Dispiega le truppe nei territori conquistati",
		currentYear: "È l'anno in corso!",
		energyWrap: "L'energia è usata per attaccare, spostare, schierare e precipitare le truppe.",
		foodWrap: "Le pietre miliari del cibo producono truppe di riserva",
		scienceWrap: "La scienza viene utilizzata per costruire strutture, armi e tecnologia di ricerca.",
		cultureWrap: "Le tappe della cultura producono premi speciali",
		generalWrap: "I grandi generali potenziano l'attacco delle truppe",
		tacticianWrap: "I grandi tattici potenziano la difesa delle truppe",
		energyTimerBase: "Aggiornamento delle risorse alla fine di ogni turno.",
		hideUi: "[V] Nascondi interfaccia utente",
		toggleFlags: "Attiva / disattiva le bandiere",
		hotkeys: "Tasti di scelta rapida",
		gameOptions: "[ESC] Opzioni",
		surrender: "Resa",
		exitSpectate: "Esci Spectate",
		uninhabited: "Disabitato",
		barbarianTribe: "Tribù dei barbari",
		Despotism: [
			'Libertà di movimento attraverso le proprie tessere',
			'Inizia con polvere da sparo',
			'Inizia con un bunker',
			'2x dimensioni massime di attacco dell\'esercito',
		],
		Monarchy: [
			'+2 difesa',
			'+1 cultura da 2 cibo',
			'50% di bonus alla cultura iniziale',
			'+2 danni al cannone',
		],
		Democracy: [
			'4x massima dispiegamento di truppe',
			'+3 riserva le truppe quando perdi una tessera',
			'50% di bonus scientifici iniziali',
			'Requisito pietra miliare cultura ridotta',
		],
		Fundamentalism: [
			'Invadere: Vittoria istantanea con 4x vantaggio',
			'Infiltrazione: -1 difesa della struttura',
			'Crescita rapida: Requisito pietra miliare di cibo ridotto',
			'+2 bonus ricompensa truppa',
		],
		Fascism: [
			'+1 attacco',
			'+1 attacco da tessere per ogni struttura difensiva',
			'+4 attacco vs barbari',
			'Truppa bonus con ogni schieramento',
		],
		Republic: [
			'+1 energia',
			'I medici combattenti curano il 50% delle truppe alla vittoria',
			'Inizia con la muratura',
			'+ 50% di bonus per i saccheggi da parte dei barbari',
		],
		Communism: [
			'Inizia con una grande persona',
			'+1 scienza da 4 cibo',
			'Può schierare truppe in territori disabitati',
			'2x bonus premio scoperto dai barbari',
		],
		removeCPU: 'Rimuovi computer',
		addCPU: 'Aggiungi computer',
		lobbyRankedMatch: 'Partita classificata',
		lobbyGameNameLabel: 'Nome del gioco',
		lobbyGamePasswordLabel: "Parola d'ordine",
		lobbyGameModeLabel: 'Modalità di gioco',
		lobbyGameMapLabel: 'Carta geografica',
		lobbyMaxPlayersLabel: 'Giocatori massimi',
		startGame: 'Inizia il gioco',
		cancelGame: 'Uscita',
		setNationName: 'Nome Nazione',
		submitNationName: 'Aggiorna nome nazione',
		setNationFlag: 'Bandiera nazionale',
		leaderboardRankedBtn: 'Classifica',
		leaderboardFfaBtn: 'Gratuito per tutti',
		leaderboardTeamBtn: 'Squadra',
		playNowBtn: 'Riproduci ora',
		create: 'Gratuito per tutti',
		createTeamBtn: 'Gioco di squadra',
		joinPrivateGameBtn: 'Partecipa al gioco privato',
		createRankedBtn: 'Crea una partita classificata',
		joinRankedGame: 'Partecipa alla partita classificata',
		toggleNation: 'Configura nazione',
		leaderboardBtn: 'Classifica',
		gameTableName: 'Nome del gioco',
		gameTableMap: 'Carta geografica',
		gameTableType: 'Genere',
		friendStatus: 'Mostra elenco amici',
		addFriend: 'Attiva amico',
		ignoreStatus: 'Mostra elenco ignora',
		ignoreUser: 'Ignora account',
		whoAccount: 'Account di query',
		whisperAccount: 'Messaggio privato',
		changeChannel: 'Cambia canale',
		getHelp: 'Comandi di chat',
		howToPlay: 'Come giocare',
		brokenNet: 'Benvenuto a Broken.net!',
		optionsHeader: 'Opzioni',
		musicVolume: 'Volume della musica',
		soundVolume: "Volume dell'effetto sonoro",
		bibleMode: 'Modalità Bibbia',
		windowSize: 'Dimensione della finestra',
		currentWindowSize: 'A schermo intero',
		windowFullScreen: 'A schermo intero',
		window19201080: '1920 x 1080',
		window1600900: '1600 x 900',
		window1360768: '1360 x 768',
		window1280720: '1280 x 720',
		exitGame: 'Esci dal gioco',
		versionSpan: 'Versione ',
		foodMilestoneLabel: 'Cibo',
		scienceMilestoneLabel: 'Scienza',
		cultureMilestoneLabel: 'Cultura',
	},
	alternateSupportedLanguages: [
		'russian', //1
		'schinese',
		'german',
		'portuguese',
		'brazilian',
		'spanish',
		'french',
		'koreana',
		'japanese',
		'turkish',
		'polish',
		'italian',
	],
	apiLanguageCode: [
		'arabic',
		'bulgarian',
		'schinese', //5
		'tchinese',
		'czech',
		'danish',
		'dutch',
		'finnish', //13
		'french', //4
		'german', //2
		'greek', //14
		'hungarian',
		'italian', //7
		'japanese', //12
		'koreana', //11
		'norwegian',
		'polish', //9
		'portuguese', //3
		'brazilian',
		'romanian',
		'russian', //1
		'spanish', //6
		'swedish',
		'thai',
		'turkish', //10
		'ukrainian', //8
	]
};
lang['brazilian'] = lang.portuguese;
// all game maps
maps.getMap = function(key) {
	var str = '<div id="worldWater"></div>' +
		this.head +
		this.filters +
		'<g id="landWrap">'+ this[key].land + '</g>' +
		this.mapLayers +
		'<g class="paths">' + this[key].paths + '</g>' +
		'<g id="textWrap">' + this[key].text + '</g>' +
		this.mapTargeting + '</svg>';
	return str;
};
maps.head = `
<?xml version="1.1" encoding="UTF-8" standalone="no"?> 
	<svg
	   xmlns:dc="http://purl.org/dc/elements/1.1/"
	   xmlns:cc="http://creativecommons.org/ns#"
	   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
	   xmlns:svg="http://www.w3.org/2000/svg"
	   xmlns="http://www.w3.org/2000/svg"
	   version="1.1" 
	   id="world">`;

maps.filters = `
		<defs>  
		<marker id="arrowhead"
			orient="auto"
			markerWidth="2" 
			markerHeight="4"
			refX=".1" 
			refY="2">
		<path id="arrowhead-tip" 
			d="M0,0 V4 L2,2 Z" />
		  </marker>
			<marker id="arrowhead-border"
				orient="auto"
				markerWidth="2.1" 
				markerHeight="4.2"
				refX=".25" 
				refY="2.1">
			<path id="arrowhead-tip-head" 
				d="M0,0 V4.2 L2.1,2.1 Z" />
		  </marker>
		  
			<filter id="darken">
				<feColorMatrix type="matrix"
				values=".2   0   0   0   0
						 0  .2   0   0   0
						 0   0  .2   0   0
						 0   0   0   1   0 "/>
			</filter>
				
			<filter id="emboss" color-interpolation-filters="sRGB">  
				<feGaussianBlur 
					in="SourceAlpha" 
					result="result0" 
					stdDeviation="2"/>        
				<feSpecularLighting 
					in="result0" 
					result="result1" 
					lighting-color="#fff" 
					surfaceScale="5" 
					specularConstant=".3" 
					specularExponent="33">  
					  <feDistantLight azimuth="235" elevation="70"/>  
				 </feSpecularLighting>  
				 <feComposite 
					k2="1" 
					k3="1" 
					in="SourceGraphic" 
					result="result4" 
					operator="arithmetic"/>  
				 <feComposite 
					in2="SourceAlpha" 
					in="result4" 
					result="result2" 
					operator="in"/>  
			</filter>
			
			<pattern id="smallGrid" width="22" height="22" patternUnits="userSpaceOnUse">
				<path d="M 22 0 L 0 0 0 22" fill="none" stroke="rgba(32, 64, 96, 1)" stroke-width="2" />
			</pattern>
			
		</defs>
		<rect id="grid" fill="url(#smallGrid)" width="100%" height="100%" />`;

maps.mapLayers = `
		<g id="mapFlagWrap" class="no-pointer"></g>
		<g id="mapBars" class="no-pointer"></g>
		<g id="mapAnimations" class="no-pointer"></g>`;

maps.mapTargeting = `
		<g id="targetCrosshair">
		<path stroke="black" stroke-width="8"
		   d="m 384.645,256 c 0,70.942 -57.702,128.655 -128.655,128.655 -70.942,0 -128.655,-57.712 -128.655,-128.655 0,-70.912 57.723,-128.635 128.655,-128.635 70.963,0 128.655,57.713 128.655,128.635 z M 255.99,98.969 c -86.558,0 -157.02,70.42 -157.02,157.031 0,86.611 70.462,157.041 157.02,157.041 86.579,0 157.061,-70.441 157.061,-157.041 0,-86.61 -70.482,-157.03 -157.061,-157.03 z"></path>
		<path stroke="black" stroke-width="8"
		   d="m 270.192,216.75 0,-206.428 -28.395,0 0,206.418 c 4.485,-1.607 9.196,-2.631 14.203,-2.631 5.007,0 9.707,1.024 14.192,2.642 z"></path>
		<path stroke="black" stroke-width="8"
		   d="m 241.787,295.26 0,206.418 28.395,0 0,-206.418 c -4.485,1.608 -9.195,2.642 -14.203,2.642 -5.008,0 -9.708,-1.034 -14.192,-2.642 z"></path>
		<path stroke="black" stroke-width="8"
		   d="m 216.73,241.808 -212.121,0 0,28.375 212.121,0 c -1.618,-4.454 -2.642,-9.185 -2.642,-14.213 0,-4.976 1.024,-9.718 2.642,-14.162 z"></path>
		<path stroke="black" stroke-width="8"
		   d="m 507.392,241.808 -212.142,0 c 1.618,4.444 2.642,9.175 2.642,14.172 0,5.018 -1.024,9.758 -2.642,14.213 l 212.142,0 0,-28.386 z"></path>
		  </g>
		  
			<path id="targetLineShadow"
			   d="M 0,0 Q 0 0 0 0"
			   class="paths"></path>
			   
			<path id="targetLineBorder"
				marker-end="url(#arrowhead-border)"
			   d="M 0,0 Q 0 0 0 0"
			   class="paths"></path>
			   
			<path id="targetLine"
				marker-mid="url(#mid-marker)"
				marker-end="url(#arrowhead)"
			   d="M 0,0 Q 0 0 0 0"
			   class="paths"></path>
		  
		  <g>
			<path id="motionPath"
			   d="M 0,0 Q 0 0 0 0"
			   class="paths"></path>
		  </g>`;

maps.Placeholder = {
	land: ``,
	paths: ``,
	text: ``,
};
// stats.js 
// scoreboard data values

(function(){
	// attempt auto login
	var isLoggedIn = $("#titleMenu").length;
	if (!isLoggedIn){
		var email = localStorage.getItem('email');
		var token = localStorage.getItem('token');
		if (email){
			// attempt persistent login
			if (token){
				$.ajax({
					type: 'POST',
					url: app.url + '/php/master1.php',
					data: {
						run: "authenticate",
						email: email,
						token: token
					}
				}).done(function(data){
					if (data === "Login successful!"){
						$.ajax({
							type: 'POST',
							url: app.url + '/php/master1.php',
							data: {
								run: "getToken",
								email: email
							}
						}).done(function(data){
							token = data;
							$.ajax({
								type: 'POST',
								url: app.url + '/php/master1.php',
								data: {
									run: "authenticate",
									email: email,
									token: token
								}
							}).done(function(data){
								void 0;
								localStorage.setItem('token', token);
								location.reload();
							}).fail(function(data){
								void 0;
							});
						});
					} else {
						void 0;
					}
				});
			} else {
				$.ajax({
					type: 'POST',
					url: app.url + '/php/master1.php',
					data: {
						run: "getToken",
						email: email
					}
				}).done(function(data){
					token = data;
				});
			}
		}
	}
})();

var stats = {
	init: function(data){
		var flag = my.flag;
		var str = '<img id="statWorld" src="images/FlatWorld90.jpg">';
		str +=
		'<div id="statResult" class="no-select">\
			<img class="statResultFlag" src="images/flags/'+ flag +'">\
			<span id="statGameResult">'+ lang[my.lang].defeatIn + ui.transformYear(data.resourceTick) +'</span>\
			<img class="statResultFlag" src="images/flags/'+ flag +'">\
		</div>\
		<div id="statTabWrap" class="no-select shadow4">\
			<div id="statOverview" class="statTabs active">\
				'+ lang[my.lang].statOverview +'\
			</div><div id="statUnits" class="statTabs">\
				'+ lang[my.lang].statUnits +'\
			</div><div id="statStructures" class="statTabs">\
				'+ lang[my.lang].statStructures +'\
			</div><div id="statWeapons" class="statTabs">\
				'+ lang[my.lang].statWeapons +'\
			</div><div id="statResources" class="statTabs">\
				'+ lang[my.lang].statResources +'\
			</div>\
		</div>\
		<table id="gameStatsTable" class="table"></table>\
		<div id="statFooter" class="container-fluid">\
			<div class="row">\
				<div id="statQuote" class="col-xs-7 shadow4 stagBlue">\
					<div id="muh-bible">'+ stats.data.quote +'</div>\
					<div id="statVerse" class="text-right">'+ stats.data.verse +'</div>\
				</div>\
				<div id="statDuration" class="col-xs-4 stagBlue text-center">\
					<div id="gameDuration">'+ lang[my.lang].gameDuration + stats.gameDuration(g.gameDuration) +'</div>\
					<button id="statsEndGame" class="btn btn-md btn-block btn-responsive shadow4 lobbyButtons">'+ lang[my.lang].endGame +'</button>\
				</div>\
			</div>\
		</div>\
		<div id="ribbonBackdrop"></div>\
		<div id="ribbonReward" class="fw-primary title-modals">\
			<div class="header text-center">\
				<h2 class="header">Achievement Unlocked!</h2>\
			</div>\
			<hr class="fancyhr">\
			<div id="ribbonBody"></div>\
		</div>';
		document.getElementById('statWrap').innerHTML = str;
		stats.events();
		animate.muhBible();
		TweenMax.to("#statWorld", 300, {
			startAt: {
				xPercent: -50,
				yPercent: -50,
				rotation: -360
			},
			rotation: 0,
			repeat: -1,
			ease: Linear.easeNone
		});
		stats.setLeaderValues();
	},
	setBibleMode: function(state) {
		var e = document.createElement('style');
		e.id = 'bible-state';
		e.type = 'text/css';
		e.innerHTML = '#statQuote { visibility: visible!important }';

		if (!state) {
			e.innerHTML = '#statQuote { visibility: hidden }';
		}
		$("#bible-state").remove();
		document.head.appendChild(e);
		localStorage.setItem('bible', state ? 1 : 0);
	},
	show: function(){
		DOM.bgmusic.loop = true;
		stats.setView('statOverview');
		if (g.victory){
			audio.play('bell-8');
			audio.play('TheAssault', 1);
			document.getElementById('statGameResult').textContent =
				"Victory in "+ ui.transformYear(stats.data.resourceTick);
		}
		else {
			audio.play('defeat');
			audio.play("JourneyOfForgottenSoldiers", 1);
		}
		void 0;
		document.getElementById('statWrap').style.visibility = 'visible';
		TweenMax.to('#gameWrap', .5, {
			startAt: {
				alpha: 0
			},
			alpha: 1
		});
		if (stats.achievements.length){
			audio.play('ding3');
			TweenMax.to('#ribbonBackdrop', .5, {
				startAt: {
					visibility: 'visible',
					alpha: 0
				},
				alpha: 1
			});
			TweenMax.to('#ribbonReward', 1, {
				startAt: {
					visibility: 'visible',
					alpha: 0,
					top: 0,
					y: 0
				},
				alpha: 1,
				y: 30
			});
		}
		$("#worldWrap, #targetWrap, #ui2, #resources-ui, #diplomacy-ui, #chat-ui, #chat-input-open, #chat-input-wrap, #surrenderScreen").remove();
	},
	events: function(){
		$("#statWrap").on(ui.click, '.statTabs', function(){
			$(".statTabs").removeClass('active');
			$(this).addClass('active');
			audio.play('switch13');
			// load data
			var id = $(this).attr('id');
			stats.setView(id);
		}).on(ui.click, '#statsEndGame', function(){
			location.reload();
		}).on(ui.click, '#ribbonBackdrop', function(){
			TweenMax.to('#ribbonBackdrop, #ribbonReward', .25, {
				alpha: 0,
				onComplete: function(){
					TweenMax.set('#ribbonBackdrop, #ribbonReward', {
						visibility: 'hidden'
					});
				}
			});
		});
		
	},
	maxValue: {
		unitsTotal: 0,
		structuresTotal: 0,
		weaponsTotal: 0,
		resourcesTotal: 0,
		overviewTotal: 0
	},
	setLeaderValues: function(){
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (d !== undefined){
				for (var key in d){
					if (i === 1){
						stats.maxValue[key] = d[key];
					} else {
						if (d[key] > stats.maxValue[key]){
							stats.maxValue[key] = d[key];
						}
					}
				}
				var units = stats.unitsTotal(i),
					structures = stats.structuresTotal(i),
					weapons = stats.weaponsTotal(i),
					resources = stats.resourcesTotal(i),
					overview = stats.overviewTotal(i);
				
				if (units > stats.maxValue.unitsTotal){
					stats.maxValue.unitsTotal = stats.unitsTotal(i);
				}
				if (structures > stats.maxValue.structuresTotal){
					stats.maxValue.structuresTotal = structures;
				}
				if (weapons > stats.maxValue.weaponsTotal){
					stats.maxValue.weaponsTotal = weapons;
				}
				if (resources > stats.maxValue.resourcesTotal){
					stats.maxValue.resourcesTotal = resources;
				}
				if (overview > stats.maxValue.overviewTotal){
					stats.maxValue.overviewTotal = overview;
				}
			}
		}
	},
	currentTabId: '',
	setView: function(id){
		if (id !== stats.currentTabId){
			stats.currentTabId = id;
			var str = stats[id]();
			document.getElementById('gameStatsTable').innerHTML = str;
		}
	},
	barAnimate: new TweenMax.delayedCall(0, ''),
	animate: function(a, delay){
		setTimeout(function(){
			var x = {
				max: 100,
				lastVal: 0
			};
			stats.barAnimate.kill();
			stats.barAnimate = TweenMax.to(x, delay, {
				startAt: {
					max: 0
				},
				max: 100,
				onUpdate: function(){
					if (~~x.lastVal !== ~~x.max){
						x.lastVal = x.max;
						audio.play('rollover5');
					}
				},
				onComplete: function(){
					audio.play('switch11');
				},
				ease: Sine.easeOut
			});
			for (var i=1, len=a.length; i<len; i++){
				var d = a[i];
				(function(d, e, bar, Sine){
					TweenMax.to(d, delay, {
						startAt: {
							max: 0
						},
						max: d.max,
						onUpdate: function(){
							e.textContent = ~~d.max;
						},
						ease: Sine.easeOut
					});
					TweenMax.to(bar, delay, {
						startAt: {
							width: 0
						},
						width : ((d.max / stats.maxValue[d.key]) * 100) + '%',
						ease: Sine.easeOut
					});
				})(d, document.getElementById(d.id), document.getElementById(d.id + '-bar'), Sine);
			}
		});
	},
	statOverview: function(){
		// head
		var str = stats.playerHead([
			lang[my.lang].tabUnits,
			lang[my.lang].tabStructures,
			lang[my.lang].tabWeapons,
			lang[my.lang].tabResources,
			lang[my.lang].tabTotalScore
		]);
		// player rows
		var animate = [];
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (stats.data[i] !== undefined){
				// player data exists
				var a = [{}, {
						id: 'p'+ i +'-units',
						max: stats.unitsTotal(i),
						key: 'unitsTotal'
					}, {
						id: 'p'+ i +'-structures',
						max: stats.structuresTotal(i),
						key: 'structuresTotal'
					}, {
						id: 'p'+ i +'-weapons',
						max: stats.weaponsTotal(i),
						key: 'weaponsTotal'
					}, {
						id: 'p'+ i +'-resources',
						max: stats.resourcesTotal(i),
						key: 'resourcesTotal'
					}, {
						id: 'p'+ i +'-total',
						max: stats.overviewTotal(i),
						key: 'overviewTotal'
					},
				]
				stats.animate(a, 1.5);
				str += '<tr class="statRow no-pointer">' +
					stats.playerCell(d, i);
					var color = game.player[i].playerColor,
						a = ['units', 'structures', 'weapons', 'resources', 'total'],
						len = a.length;
					for (var j=0; j<len; j++){
						var sumRow = (j+1 === len) ? ' statSum' : '';
						str += 
						'<td class="stagBlue statTD">\
							<div class="statBar pb'+ color +'">\
								<div id="p'+ i +'-'+ a[j] +'-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
								<div id="p'+ i +'-'+ a[j] +'" class="statVal'+ sumRow +'">0</div>\
							</div>\
						</td>';
					}
				str += '</tr>\
				<tr class="statSpacer"></tr>';
			}
		}
		return str;
	},
	statUnits: function(){
		// head
		var str = stats.playerHead([
			lang[my.lang].tabEarned,
			lang[my.lang].tabDeployed,
			lang[my.lang].tabKilled,
			lang[my.lang].tabLost,
		]);
		// player rows
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (d !== undefined){
				// player data exists
				var a = [{}, {
						id: 'p'+ i +'-earned',
						max: d.earned,
						key: 'earned'
					}, {
						id: 'p'+ i +'-deployed',
						max: d.deployed,
						key: 'deployed'
					}, {
						id: 'p'+ i +'-killed',
						max: d.killed,
						key: 'killed'
					}, {
						id: 'p'+ i +'-lost',
						max: d.lost,
						key: 'lost'
					},
				]
				stats.animate(a, 1.5);
				str += '<tr class="stagBlue statRow no-pointer">' +
					stats.playerCell(d, i);
					var color = game.player[i].playerColor,
						a = ['earned', 'deployed', 'killed', 'lost'],
						len = a.length;
					for (var j=0; j<len; j++){
						str += 
						'<td class="stagBlue statTD">\
							<div class="statBar pb'+ color +'">\
								<div id="p'+ i +'-'+ a[j] +'-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
								<div id="p'+ i +'-'+ a[j] +'" class="statVal">0</div>\
							</div>\
						</td>';
					}
				str += '</tr>\
				<tr class="statSpacer"></tr>';
			}
		}
		return str;
	},
	statStructures: function(){
		// head
		var str = stats.playerHead([
			lang[my.lang].tabBunkers,
			lang[my.lang].tabWalls,
			lang[my.lang].tabFortresses
		]);
		// player rows
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (d !== undefined){
				// player data exists
				var a = [{}, {
						id: 'p'+ i +'-bunkers',
						max: d.bunkers,
						key: 'bunkers'
					}, {
						id: 'p'+ i +'-walls',
						max: d.walls,
						key: 'walls'
					}, {
						id: 'p'+ i +'-fortresses',
						max: d.fortresses,
						key: 'fortresses'
					}
				]
				stats.animate(a, 1);
				str += '<tr class="stagBlue statRow no-pointer">' +
					stats.playerCell(d, i);
					var color = game.player[i].playerColor,
						a = ['bunkers', 'walls', 'fortresses'],
						len = a.length;
					for (var j=0; j<len; j++){
						str += 
						'<td class="stagBlue statTD">\
							<div class="statBar pb'+ color +'">\
								<div id="p'+ i +'-'+ a[j] +'-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
								<div id="p'+ i +'-'+ a[j] +'" class="statVal">0</div>\
							</div>\
						</td>';
					}
					str += '</tr>\
				<tr class="statSpacer"></tr>';
			}
		}
		return str;
	},
	statWeapons: function(){
		// head
		var str = stats.playerHead([
			lang[my.lang].tabCannons,
			lang[my.lang].tabMissiles,
			lang[my.lang].tabNukes
		]);
		// player rows
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (d !== undefined){
				// player data exists
				var a = [{}, {
						id: 'p'+ i +'-cannons',
						max: d.cannons,
						key: 'cannons'
					}, {
						id: 'p'+ i +'-missiles',
						max: d.missiles,
						key: 'missiles'
					}, {
						id: 'p'+ i +'-nukes',
						max: d.nukes,
						key: 'nukes'
					}
				]
				stats.animate(a, 1);
				str += '<tr class="stagBlue statRow no-pointer">'+
					stats.playerCell(d, i);
					var color = game.player[i].playerColor,
						a = ['cannons', 'missiles', 'nukes'],
						len = a.length;
					for (var j=0; j<len; j++){
						str += 
						'<td class="stagBlue statTD">\
							<div class="statBar pb'+ color +'">\
								<div id="p'+ i +'-'+ a[j] +'-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
								<div id="p'+ i +'-'+ a[j] +'" class="statVal">0</div>\
							</div>\
						</td>';
					}
					str += '</tr>\
				<tr class="statSpacer"></tr>';
			}
		}
		return str;
	},
	statResources: function(){
		// head
		var str = stats.playerHead([
			lang[my.lang].tabEnergy,
			lang[my.lang].tabScience,
			lang[my.lang].tabFood,
			lang[my.lang].tabCulture
		]);
		// player rows
		for (var i=1; i<=8; i++){
			var d = stats.data[i];
			if (d !== undefined){
				// player data exists
				var a = [{}, {
						id: 'p'+ i +'-moves',
						max: d.moves,
						key: 'moves'
					}, {
						id: 'p'+ i +'-production',
						max: d.production,
						key: 'production'
					}, {
						id: 'p'+ i +'-food',
						max: d.food,
						key: 'food'
					}, {
						id: 'p'+ i +'-culture',
						max: d.culture,
						key: 'culture'
					}
				]
				stats.animate(a, 1.5);
				str += '<tr class="stagBlue statRow no-pointer">' +
					stats.playerCell(d, i);
					var color = game.player[i].playerColor;
					str += '<td class="stagBlue statTD">\
						<div class="statBar pb'+ color +'">\
							<div id="p'+ i +'-moves-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
							<div id="p'+ i +'-moves" class="statVal">0</div>\
						</div>\
					</td>\
					<td class="stagBlue statTD">\
						<div class="statBar pb'+ color +'">\
							<div id="p'+ i +'-production-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
							<div id="p'+ i +'-production" class="statVal">0</div>\
						</div>\
					</td>\
					<td class="stagBlue statTD">\
						<div class="statBar pb'+ color +'">\
							<div id="p'+ i +'-food-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
							<div id="p'+ i +'-food" class="statVal">0</div>\
						</div>\
					</td>\
					<td class="stagBlue statTD">\
						<div class="statBar pb'+ color +'">\
							<div id="p'+ i +'-culture-bar" class="statBarBg pbar'+ color +'">&nbsp</div>\
							<div id="p'+ i +'-culture" class="statVal">0</div>\
						</div>\
					</td>\
				</tr>\
				<tr class="statSpacer"></tr>';
			}
		}
		return str;
	},
	playerHead: function(column){
		var str = '<tr><th style="width: 420px"></th>';
		for (var i=0, len=column.length; i<len; i++){
			if (i === 4){
				str += '<th class="text-center statHead chat-warning">'+ column[i] +'</th>';
			} else {
				str += '<th class="text-center statHead">'+ column[i] +'</th>';
			}
		}
		str += '</tr><tr class="statSpacer2"></tr>';
		return str;
	},
	playerCell: function(p, i){
		var z = game.player[i],
			color = z.playerColor,
			flag = p.flag.split('.')[0];
		flag = flag + ui.getFlagExt(flag);
		var str = '<td class="stat-detail-wrap">\
			<div class="statWrapper">\
				<img class="statFlagBG" src="images/flags/'+ flag +'">\
			</div>\
			<img class="statsFlags" src="images/flags/'+ flag +'">\
			<div class="statsPlayerWrap">\
				<div class="statsAccount chat-warning nowrap">' + lobby.governmentIcon(z);
					if (g.teamMode){
						str += '<span class="diploTeam">'+ z.team +'</span>';
					}
					// TODO: undefined error here on difficulty after CPU was eliminated and I surrendered
					var account = p.cpu === 1 ? z.difficulty : p.account;
					str += account +
				'</div>\
				<div class="statsNation nowrap">'+ p.nation +'</div>\
			</div>\
		</td>'
		return str;
	},
	data: {},
	gameDuration: function(data){
		return stats.hours(data) + stats.minutes(data) +':'+ stats.seconds(data)
	},
	hours: function(data){
		var hours = '';
		if (data >= 3600){
			hours = ~~(data / 3600) + ':';
		}
		return hours;
	},
	minutes: function(data){
		var min = '';
		if (data < 60){
			if (data >= 3600){
				min = '00:';
			}
		} else {
			min = ~~(data / 60 % 60);
			if (min < 10){
				min = '0' + min + '';
			}
		}
		return min;
	},
	seconds: function(data){
		var sec = ~~(data % 60);
		if (sec < 10){
			return '0' + sec + '';
		}
		return sec;
	},
	get: function(){
		$.ajax({
			url: app.url + 'php/stats.php',
		}).done(function(data){
			stats.data = data;
			stats.init(data);
			stats.notifyRibbons(data.ribbons);
			stats.notifySteam(data.ribbons);
		});
	},
	achievements: [],
	notifyRibbons: function(data){
		var str = '';
		data.forEach(function(e){
			str += 
			'<div class="ribbonName ranked">'+ lang[my.lang].ribbonTitle[e] +'</div>\
			<div class="ribbonDescription ranked">'+ lang[my.lang].ribbonDescription[e] +'</div>\
			<img class="giantRibbon block" src="images/ribbons/ribbon'+ e +'.jpg">';  
		});
		document.getElementById('ribbonBody').innerHTML = str;
		stats.achievements = data;
		if (stats.achievements.length){
			new Audio('sound/ding3.mp3');
			if (app.isApp) {
				// notify Steam
				var greenworks = require('./greenworks');
				if (greenworks.initAPI()) {
					greenworks.init();
					// send achievement data
				}
			}
		}
	},
	notifySteam: function(data) {
		if (app.isApp) {
			var greenworks = require('./greenworks');
			if (greenworks.initAPI()) {
				greenworks.init();
				data.forEach(function(i) {
					greenworks.activateAchievement('medal' + i, function(){});
				});
			}
		}
	},
	overviewTotal: function(i){
		var x = stats.data[i];
		return this.unitsTotal(i) + this.structuresTotal(i) + this.weaponsTotal(i) + this.resourcesTotal(i);
	},
	unitsTotal: function(i){
		var x = stats.data[i];
		return (x.deployed * 100) + (x.killed * 3);
	},
	structuresTotal: function(i){
		var x = stats.data[i];
		return (x.bunkers * 80) + (x.walls * 140) + (x.fortresses * 200);
	},
	weaponsTotal: function(i){
		var x = stats.data[i];
		return (x.cannons * 40) + (x.missiles * 60) + (x.nukes * 400);
	},
	resourcesTotal: function(i){
		var x = stats.data[i];
		return ~~( (x.food / 20) + (x.culture / 60) + (x.production / 20) );
	}
}
// animate.js
var animate = {
	colors: [
		'#ffffff',
		'#fff',
		'#eeffee',
		'#ffffee',
		'#99ff99',
		'#eefff3',
		'#ddddff'
	],
	randomColor: function(){
		return animate.colors[~~(Math.random()*6)];
	},
	getXY: function(tile){
		var box = DOM['unit' + tile].getBBox(),
			o = {
				x: box.x,
				y: box.y
			}
		return o;
	},
	icon: {
		troops: {
			audio: '',
			image: 'troops.png',
			color: '#ff0'
		},
		energy: {
			audio: '',
			image: 'energy.png',
			color: '#ffa'
		},
		food: {
			audio: '',
			image: 'food.png',
			color: '#b5ff00'
		},
		production: {
			audio: '',
			image: 'production.png',
			color: '#7cf'
		},
		culture: {
			audio: '',
			image: 'culture.png',
			color: '#d2d'
		},
		shield: {
			audio: 'build',
			image: 'tile-defense.png',
			color: '#ff0'
		}
	},
	upgrade: function(tile, type, count){
		if (animate.icon[type].audio){
			audio.play(animate.icon[type].audio);
		}
		var box = DOM['unit' + tile].getBBox();
		var x = box.x + box.width/2 - 10;
		var y = box.y + box.height/2 + 10;
		// show icon
		var wrap = document.createElementNS('http://www.w3.org/2000/svg', 'g');
		var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
		text.setAttributeNS(null,"x",x - 10);
		text.setAttributeNS(null,"y",y + 10);
        text.style.fontFamily = 'FontAwesome';
        text.style.fontSize = '20px';
        text.style.fill = animate.icon[type].color;
		if (count){
			text.textContent = '+'+ count;
		} else {
			//text.textContent = animate.icon[type].text;
		}
		var image = document.createElementNS('http://www.w3.org/2000/svg', 'image');
		image.setAttributeNS(null,"width",'3rem');
		image.setAttributeNS(null,"height",'3rem');
		image.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/icons/"+ animate.icon[type].image);
		image.setAttributeNS(null,"x",x + 10);
		image.setAttributeNS(null,"y",y - 20);
		wrap.appendChild(image);
		wrap.appendChild(text);
		DOM.mapAnimations.appendChild(wrap);
		TweenMax.to([text, image], .5, {
			startAt: {
				xPercent: -50,
				yPercent: -50,
				transformOrigin: '50% 50%',
				alpha: 1,
				scale: .1
			},
			scale: 1,
			ease: Back.easeOut.config(3)
		});
		TweenMax.to([text, image], 1.5, {
			y: '-=30'
		});
		TweenMax.to([text, image], .5, {
			delay: 1.5,
			alpha: 0,
			onComplete: function(){
				wrap.parentNode.removeChild(wrap);
			}
		});
		// update bars
		this.updateMapBars(tile);
	},
	paths: function() {
		/*TweenMax.to('.paths > path', 2, {
			startAt: {
				strokeDashoffset: 0
			},
			strokeDashoffset: -12,
			repeat: -1,
			ease: Linear.easeNone
		});*/
	},
	rifle: function() {
		TweenMax.to(DOM.troopIcon, .05, {
			startAt: {
				x: -1,
				y: -2
			},
			x: 1,
			y: 2,
			repeat:3,
			yoyo:true,
			ease: RoughEase.ease.config({
				template: Power0.easeNone,
				strength: 2,
				points: 5,
				taper: "none",
				randomize: true,
				clamp: false
			}),
			onComplete: function(){
				TweenMax.to(this.target, 1.5, {
					y:0,
					ease:Elastic.easeOut
				})
			}
		});
	},
	updateMapBars: function(tile){
		var box = DOM['unit' + tile].getBBox(),
			x = box.x + box.width/2 - 10,
			y = box.y + box.height/2 + 10;
		$(".mapBars" + tile).remove();
		this.initMapBars(tile, x, y);
	},
	target: function() {
		var o = {
			brightness: 200
		};
		TweenMax.to(o, .5, {
			brightness: 100,
			onUpdate: function() {
				animate.brightness(DOM.targetUiWrap, o.brightness);
			}
		})
	},
	initMapBars: function(i, x, y){
		var e = DOM['unit' + i],
			x = e.getAttribute('x') - 25,
			y = e.getAttribute('y') - 24,
			boxHeight = 0,
			barHeight = 5,
			barPad = 1,
			widthPerTick = 5,
			widthMax = 40;
		
		if (game.tiles[i].food){
			boxHeight += barHeight + barPad;
		}
		if (game.tiles[i].production){
			boxHeight += barHeight + barPad;
		}
		if (game.tiles[i].culture){
			boxHeight += barHeight + barPad; 
		}
		var totalDef = game.tiles[i].defense;
		if (totalDef){
			boxHeight += barHeight + barPad;
		}
		var foodWidth = game.tiles[i].food * widthPerTick;
		if (foodWidth > widthMax){
			foodWidth = widthMax;
		}
		// wrapper
		x += barHeight
		if (boxHeight){
			var svg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
			svg.setAttributeNS(null, 'width', widthMax);
			svg.setAttributeNS(null, 'height', boxHeight);
			svg.setAttributeNS(null,"x",x);
			svg.setAttributeNS(null,"y",y + 26);
			svg.setAttributeNS(null,"fill","#151515");
			svg.setAttributeNS(null,"stroke","#000000");
			svg.setAttributeNS(null,"stroke-width",1);
			svg.setAttributeNS(null,"opacity",1);
			svg.setAttributeNS(null,"class","mapBars" + i);
			DOM.mapBars.appendChild(svg);
			// food
			y += 23; // fixed value?
			//x += 1 // padding
			if (game.tiles[i].food){
				y += barHeight + barPad;
				var svg = document.createElementNS('http://www.w3.org/2000/svg', 'line');
				svg.setAttributeNS(null,"x1",x);
				svg.setAttributeNS(null,"y1",y);
				svg.setAttributeNS(null,"x2",x + foodWidth);
				svg.setAttributeNS(null,"y2",y);
				svg.setAttributeNS(null,"stroke","#b5ff00");
				svg.setAttributeNS(null,"stroke-width",widthPerTick);
				svg.setAttributeNS(null,"opacity",1);
				svg.setAttributeNS(null,"class","mapBars mapBars" + i);
				DOM.mapBars.appendChild(svg);
			}
			// production
			if (game.tiles[i].production){
				y += barHeight + barPad;
				var productionWidth = game.tiles[i].production * (widthPerTick * 2);
				if (productionWidth > widthMax){
					productionWidth = widthMax;
				}
				var svg = document.createElementNS('http://www.w3.org/2000/svg', 'line');
				svg.setAttributeNS(null,"x1",x);
				svg.setAttributeNS(null,"y1",y);
				svg.setAttributeNS(null,"x2",x + productionWidth);
				svg.setAttributeNS(null,"y2",y);
				svg.setAttributeNS(null,"stroke","#7cf");
				svg.setAttributeNS(null,"stroke-width",widthPerTick);
				svg.setAttributeNS(null,"opacity",1);
				svg.setAttributeNS(null,"class","mapBars mapBars2x mapBars" + i);
				DOM.mapBars.appendChild(svg);
			}
			// culture
			if (game.tiles[i].culture){
				y += barHeight + barPad;
				var cultureWidth = game.tiles[i].culture * widthPerTick;
				if (cultureWidth > widthMax){
					cultureWidth = widthMax;
				}
				var svg = document.createElementNS('http://www.w3.org/2000/svg', 'line');
				svg.setAttributeNS(null,"x1",x);
				svg.setAttributeNS(null,"y1",y);
				svg.setAttributeNS(null,"x2",x + cultureWidth);
				svg.setAttributeNS(null,"y2",y);
				svg.setAttributeNS(null,"stroke","#dd22dd");
				svg.setAttributeNS(null,"stroke-width",widthPerTick);
				svg.setAttributeNS(null,"opacity",1);
				svg.setAttributeNS(null,"class","mapBars mapBars" + i);
				DOM.mapBars.appendChild(svg);
			}
			// defense
			if (totalDef){
				y += barHeight + barPad;
				var defWidth =
					totalDef * (widthMax/4),
					svg = document.createElementNS('http://www.w3.org/2000/svg', 'line');

				svg.setAttributeNS(null,"x1",x);
				svg.setAttributeNS(null,"y1",y);
				svg.setAttributeNS(null,"x2",x + defWidth);
				svg.setAttributeNS(null,"y2",y);
				svg.setAttributeNS(null,"stroke","#ffff00");
				svg.setAttributeNS(null,"stroke-width",barHeight);
				svg.setAttributeNS(null,"opacity",1);
				svg.setAttributeNS(null,"class","mapBars mapBars3x mapBars" + i);
				DOM.mapBars.appendChild(svg);
			}
		}
	},
	gunfire: function(atkTile, defTile, volume){
		var box1 = DOM['unit' + atkTile].getBBox(),
			box2 = DOM['unit' + defTile].getBBox();
		var sfx = ~~(Math.random()*9);
		var delay = [.6, .6, .43, .43, .43, .43, .9, .43, .76, .43];
		if (volume){
			audio.play('machine' + sfx, null, volume);
			game.tiles[atkTile].player === my.player && animate.rifle();
		}
		var shots = 30,
			w1 = 50,
			h1 = 50;
			//w2 = w1/2,
			//h2 = h1/2 - 10;
		for (var i=0; i<shots; i++){
			(function(){
				var path = document.createElementNS("http://www.w3.org/2000/svg","path"),
					x2 = box2.x + (Math.random() * w1),
					y2 = box2.y + (Math.random() * h1),
					x1 = box1.x + ~~(Math.random()*16)-8,
					y1 = box1.y + ~~(Math.random()*16)-8,
					drawPath = Math.random() > .5 ?
						"M "+ x1 +","+ y1 + ' '+ x2 +","+ y2 :
						"M "+ x2 +","+ y2 +' ' + x1 +","+ y1;

				path.setAttributeNS(null,"stroke",animate.randomColor());
				path.setAttributeNS(null,"stroke-width",1);
				DOM.world.appendChild(path);
				/*TweenLite.to(path, .1, {
					delay: (i / shots) * delay[sfx],
					startAt: {
						attr: {
							d: drawPath
						},
						drawSVG: '0%'
					},
					drawSVG: '0% 100%',
					ease: Power2.easeIn,
					onComplete: function(){
						TweenLite.to(path, .15, {
							drawSVG: '100% 100%',
							ease: Power2.easeOut,
							onComplete: function(){
								this.target.parentNode.removeChild(this.target);
							}
						});
					}
				});*/
				TweenLite.to(path, .08, {
					delay: (i / shots) * delay[sfx],
					startAt: {
						attr: {
							d: drawPath
						},
						drawSVG: '0% 25%'
					},
					drawSVG: '75% 100%',
					ease: Linear.easeIn,
					onComplete: function(){
						TweenLite.to(path, .033, {
							drawSVG: '100% 100%',
							ease: Linear.easeOut,
							onComplete: function(){
								this.target.parentNode.removeChild(this.target);
							}
						});
					}
				});

				if (i % 8 === 0) {
					animate.flash({
						d: .2,
						scale: 2,
						x: x2 - 100,
						y: y2 - 100,
					});
				}
				else if (i % 8 === 4) {
					animate.flash({
						d: .15,
						scale: 1.5,
						x: x1 - 100,
						y: y1 - 100,
					});
				}

			})();
		}
	},
	flash: function(o) {
		var image = document.createElementNS('http://www.w3.org/2000/svg', 'image');
		image.setAttributeNS(null,"width",'200px');
		image.setAttributeNS(null,"height",'200px');
		image.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash.png");
		image.setAttributeNS(null, 'class', 'no-pointer');
		image.setAttributeNS(null,"x",o.x);
		image.setAttributeNS(null,"y",o.y);
		DOM.world.appendChild(image);
		TweenLite.to(image, o.d, {
			startAt: {
				transformOrigin: '50% 50%',
				scale: o.scale
			},
			scale: 0,
			onComplete: function() {
				this.target.parentNode.removeChild(this.target);
			}
		});
	},
	flashNuke: function(o) {
		var image = document.createElementNS('http://www.w3.org/2000/svg', 'image');
		image.setAttributeNS(null,"width",'200px');
		image.setAttributeNS(null,"height",'200px');
		image.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash.png");
		image.setAttributeNS(null, 'class', 'no-pointer');
		image.setAttributeNS(null,"x",o.x);
		image.setAttributeNS(null,"y",o.y);
		DOM.world.appendChild(image);
		TweenLite.to(image, o.d, {
			startAt: {
				transformOrigin: '50% 50%',
				scale: 0
			},
			scale: o.scale,
			onComplete: function() {
				this.target.parentNode.removeChild(this.target);
			}
		});
		TweenLite.to(image, o.d - 1.8, {
			delay: 1.8,
			opacity: 0,
		})
	},
	cannons: function(atkTile, defTile, playSound, delay, delay2){
		var box1 = DOM['unit' + atkTile].getBBox(),
			box2 = DOM['land' + defTile].getBBox(),
			box3 = DOM['unit' + defTile].getBBox()
			delay = delay === undefined ? .08 : delay;

		if (game.tiles[atkTile].player === my.player ||
			game.tiles[defTile].player === my.player){
			var a = [5, 6, 8];
			var sfx = ~~(Math.random() * 3);
			playSound && audio.play('grenade' + a[sfx]);
		}
		var x1 = box1.x + box1.width * .5,
			y1 = box1.y + box1.height * .5,
			w1 = box2.width * .5,
			w2 = w1/2,
			h1 = box2.height * .5,
			h2 = h1/2 - 10;

		for (var i=0; i<20; i++){
			(function(Math){
				var circ = document.createElementNS("http://www.w3.org/2000/svg","circle"),
					x2 = box3.x + (Math.random() * w1) - w2,
					y2 = box3.y + (Math.random() * h1) - h2;
				circ.setAttributeNS(null,"cx",x1);
				circ.setAttributeNS(null,"cy",y1);
				circ.setAttributeNS(null,"r",4);
				circ.setAttributeNS(null,"fill",g.color[game.player[game.tiles[atkTile].player].playerColor]);
				circ.setAttributeNS(null, 'class', 'no-pointer');
				circ.setAttributeNS(null,"stroke",animate.randomColor());
				circ.setAttributeNS(null,"strokeWidth",1);
				DOM.mapAnimations.appendChild(circ);
				
				TweenLite.to(circ, delay, {
					delay: i * .0125,
					startAt: {
						alpha: 1
					},
					attr: {
						cx: x2,
						cy: y2
					},
					ease: Linear.easeNone,
					onComplete: function(){
						// explode outward
						var d1 = Math.random()*.5 + .3,
							d2 = delay2 === undefined ? d1/2 : delay2,
							s1 = (d1 * 10) + 3;
						TweenLite.to(circ, d2, {
							startAt: {
								fill: 'none',
								strokeWidth: 0,
								attr: {
									r: 0
								}
							},
							strokeWidth: s1,
							attr: {
								r: s1/2
							},
							ease: Linear.easeNone,
							onComplete: function(){
							// explode fades from inner
								if (i % 2 === 0) {
									animate.flash({
										d: .25,
										scale: 1,
										x: x2 - 100,
										y: y2 - 100,
									});
								}
								TweenLite.to(circ, d2, {
									attr: {
										r: s1
									},
									strokeWidth: 0,
									ease: Sine.easeOut
								});
								TweenLite.to(circ, d2, {
									alpha: 0,
									onComplete: function(){
										this.target.parentNode.removeChild(this.target);
									},
									ease: Sine.easeOut
								});
							}
						});
					}
				});
				if (i === 0) {
					animate.flash({
						d: 1,
						scale: 2,
						x: x1 - 100,
						y: y1 - 100,
					});
				}
			})(Math);
		}
		animate.smoke(defTile, box3.x, box3.y, .8);
	},
	missile: function(attacker, defender, playSound){
		if (playSound){
			audio.play('missile7');
		}
		var e2 = DOM['unit' + attacker],
			boxA = e2.getBBox(),
			x1 = boxA.x + boxA.width/2,
			y1 = boxA.y + boxA.height/2,
			e3 = DOM['unit' + defender],
			boxB = e3.getBBox(),
			x2 = boxB.x + boxB.width/2,
			y2 = boxB.y + boxB.height/2;
			
		// get missile line coordinates
		my.motionPath[0] = e2.getAttribute('x')*1 - 10;
		my.motionPath[1] = e2.getAttribute('y')*1 - 10;
		my.motionPath[4] = e3.getAttribute('x')*1 - 10;
		my.motionPath[5] = e3.getAttribute('y')*1 - 10;
		my.motionPath[2] = (my.motionPath[0] + my.motionPath[4]) / 2;
		my.motionPath[3] = ((my.motionPath[1] + my.motionPath[5]) / 2) - (Math.abs(x1-x2)/3);
		TweenMax.set(DOM.motionPath, {
			attr: {
				d: "M " + my.motionPath[0] +","+ my.motionPath[1] + ' ' +
					+ my.motionPath[4] +" "+ my.motionPath[5]
			}
		});
		// missile flash
		var flash = document.createElementNS('http://www.w3.org/2000/svg', 'image');
		flash.setAttributeNS(null,"width",'200px');
		flash.setAttributeNS(null,"height",'200px');
		flash.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash-orange.png");
		flash.setAttributeNS(null, 'class', 'no-pointer');
		flash.setAttributeNS(null,"x",x1);
		flash.setAttributeNS(null,"y",y1);
		//console.info('1', x1, y1);
		//console.info('2', x2, y2);
		DOM.mapAnimations.appendChild(flash);
		TweenLite.to(flash, 1, {
			startAt: {
				xPercent: -50,
				yPercent: -50
			},
			x: x2 - x1 - 24,
			y: y2 - y1 - 24,
			ease: Power2.easeIn,
			onComplete: function() {
				this.target.parentNode.removeChild(this.target);
			}
		});

		var mis = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		mis.setAttributeNS(null, "cx", x1);
		mis.setAttributeNS(null, "cy", y1);
		mis.setAttributeNS(null, "r", 12);
		mis.setAttributeNS(null, "fill", g.color[game.player[game.tiles[attacker].player].playerColor]);
		mis.setAttributeNS(null,"stroke","#ffddaa");
		mis.setAttributeNS(null,"stroke-width",2);
		mis.setAttributeNS(null, 'class', 'no-pointer');
		DOM.mapAnimations.appendChild(mis);
		var count = 0;
		TweenMax.to(mis, .1, {
			attr: {
				r: 3
			},
			repeat: -1
		});
		TweenLite.to(mis, 1, {
			startAt: {
				alpha: 1,
				xPercent: -50,
				yPercent: -50
			},
			attr: {
				cx: x2,
				cy: y2
			},
			ease: Power2.easeIn,
			onUpdate: function(){
				count++;
				if (count % 2 === 0){
					// smoke trail
					var svg = document.createElementNS('http://www.w3.org/2000/svg', 'image');
					svg.setAttributeNS(null, 'height', 40);
					svg.setAttributeNS(null, 'width', 40);
					svg.setAttributeNS(null, 'opacity', 1);
					svg.setAttributeNS(null, "x", mis.getAttribute('cx')-10);
					svg.setAttributeNS(null, "y", mis.getAttribute('cy')-10);
					svg.setAttributeNS(null, 'class', 'no-pointer');
					svg.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', 'images/smoke.png');
					DOM.mapAnimations.appendChild(svg);
					TweenLite.to(svg, .3, {
						startAt: {
							xPercent: -50,
							yPercent: -50,
							transformOrigin: '50% 50%'
						},
						scale: 3,
						onComplete: function(){
							this.target.parentNode.removeChild(this.target);
						}
					});
					TweenLite.to(svg, .5, {
						alpha: 0
					});
				}
			},
			onComplete: function(){
				this.target.parentNode.removeChild(this.target);
				animate.missileExplosion(defender, g.color[game.player[game.tiles[attacker].player].playerColor]);
			}
		});
		animate.flash({
			d: 1,
			scale: 3,
			x: x1 - 100,
			y: y1 - 100,
		});
		animate.flash({
			d: 1,
			scale: 3,
			x: x1 - 100,
			y: y1 - 100,
		});
	},
	missileExplosion: function(tile, misColor){
		var box = DOM['unit' + tile].getBBox(),
			a = [5, 6, 8],
			sfx = ~~(Math.random() * 3);
		audio.play('grenade' + a[sfx]);
		// animate.screenShake(5, 3, .016);
		var x = 0,
			y = 0;
		for (var i=0; i<5; i++){
			(function(Math){
				animate.flash({
					d: .5,
					scale: 3,
					x: x - 100,
					y: y - 100,
				});
				animate.flash({
					d: .5,
					scale: 2,
					x: x - 100,
					y: y - 100,
				});
				var circ = document.createElementNS("http://www.w3.org/2000/svg","circle");
				x = box.x + Math.random() * 60 - 30;
				y = box.y + Math.random() * 60 - 30;
				circ.setAttributeNS(null,"cx",x);
				circ.setAttributeNS(null,"cy",y);
				circ.setAttributeNS(null,"r",0);
				circ.setAttributeNS(null, 'class', 'no-pointer');
				circ.setAttributeNS(null,"fill",misColor);
				circ.setAttributeNS(null,"stroke",'#ffffaa');
				DOM.mapAnimations.appendChild(circ);
				
				var delay = i * .05;
				TweenLite.to(circ, .75, {
					delay: delay,
					attr: {
						r: 32
					},
					onComplete: function(){
						TweenMax.to(circ, 1, {
							attr: {
								r: 1
							},
							ease: Power1.easeIn,
							onComplete: function(){
								this.target.parentNode.removeChild(this.target);
							},
						});
					},
					ease: Power4.easeOut
				});
				TweenMax.to(circ, .1, {
					fill: "hsl(+=0%, +=0%, +="+ ~~(Math.random()*100) +"%)",
					repeat: -1
				});
				TweenLite.to(circ, 1.75, {
					startAt:{
						alpha: 1
					},
					alpha: 0,
					ease: Power2.easeIn
				});
			})(Math);
		}
		animate.smoke(tile, x, y, 1);
	},
	nuke: function(tile, attacker){
		var box = DOM['unit' + tile].getBBox();
		var x = box.x;
		var y = box.y;
		// bomb shadow
		shadow = document.createElementNS("http://www.w3.org/2000/svg","ellipse");
		shadow.setAttributeNS(null,"cx",x);
		shadow.setAttributeNS(null,"cy",y);
		shadow.setAttributeNS(null,"rx",2);
		shadow.setAttributeNS(null,"ry",1);
		shadow.setAttributeNS(null,"fill",'#000000');
		shadow.setAttributeNS(null,"stroke",'none');
		DOM.mapAnimations.appendChild(shadow);
		TweenMax.to(shadow, 1, {
			startAt: {
				opacity: .5
			},
			attr: {
				rx: 10,
				ry: 5
			},
			ease: Power1.easeIn,
			onComplete: function(){
				this.target.parentNode.removeChild(this.target);
			}
		});
		// drop bomb svg
		var bomb = document.createElementNS("http://www.w3.org/2000/svg", "circle");
		bomb.setAttributeNS(null, "cx", x);
		bomb.setAttributeNS(null, "cy", y - window.innerHeight);
		bomb.setAttributeNS(null, "r", 15);
		bomb.setAttributeNS(null,"fill",g.color[game.player[attacker].playerColor]);
		bomb.setAttributeNS(null,"stroke","#ffddaa");
		bomb.setAttributeNS(null, 'class', 'no-pointer');
		bomb.setAttributeNS(null,"stroke-width",2);
		DOM.mapAnimations.appendChild(bomb);
		TweenLite.to(bomb, .1, {
			attr: {
				r: 3
			},
			ease: Linear.easeIn,
			repeat: -1
		});
		TweenLite.to(bomb, 1, {
			startAt: {
				alpha: 1,
			},
			attr: {
				cy: y
			},
			ease: Power1.easeIn,
			onComplete: function(){
				this.target.parentNode.removeChild(bomb);
			}
		});
		// start bomb explosion sequence
		TweenLite.to(g, 1, {
			onComplete: function(){
				audio.play('bomb9');
				animate.screenShake(33, 7, .033, 1);
				animate.sepia();
				animate.flashNuke({
					d: 2.5,
					scale: 5,
					opacity: 0,
					x: x - 100,
					y: y - 100,
				});
				animate.flashNuke({
					d: 2.5,
					scale: 4,
					x: x - 100,
					y: y - 100,
				});
				animate.flashNuke({
					d: 2.5,
					scale: 3,
					x: x - 100,
					y: y - 100,
				});
				animate.flashNuke({
					d: 2.5,
					scale: 2,
					x: x - 100,
					y: y - 100,
				});
				TweenMax.to(DOM.screenFlash, .05, {
					startAt: {
						opacity: .7,
						background: '#ffffff'
					},
					opacity: 0,
					background: '#ff8800',
					ease: Expo.easeOut
				});
				// shake
				// animate.screenShake(16, 10, .016, true);
				var circ = document.createElementNS("http://www.w3.org/2000/svg","circle");
				circ.setAttributeNS(null,"cx",x);
				circ.setAttributeNS(null,"cy",y);
				circ.setAttributeNS(null,"r",1);
				circ.setAttributeNS(null,"fill",g.color[game.player[attacker].playerColor]);
				circ.setAttributeNS(null,"stroke",'#ffdd88');
				circ.setAttributeNS(null, 'class', 'no-pointer');
				DOM.mapAnimations.appendChild(circ);
				
				TweenLite.to(circ, 1.5, {
					startAt: {
						alpha: 1
					},
					attr: {
						r: 80
					},
					onComplete: function(){
						TweenMax.to(circ, 1, {
							attr: {
								r: 50
							},
							ease: Power1.easeIn
						});
					},
					ease: Power3.easeOut
				});
				TweenMax.to(circ, .05, {
					fill: "hsl(+=0%, +=0%, +=20%)",
					repeat: -1,
					yoyo: true,
					ease: SteppedEase.config(6)
				});
				TweenLite.to(circ, 2.5, {
					alpha: 0,
					ease: Power4.easeIn,
					onComplete: function(){
						this.target.parentNode.removeChild(this.target);
					}
				});
				
				animate.smoke(tile, x, y);
				animate.smoke(tile, x, y);
				animate.smoke(tile, x, y);
				animate.smoke(tile, x, y);
			}
		});
	},
	sepia: function() {
		var o = {
			sepia: 100,
			brightness: 200,
			blur: 3
		};

		TweenLite.to(o, 2.5, {
			sepia: 0,
			brightness: 100,
			blur: 0,
			ease: Power3.easeOut,
			onUpdate: function() {
				TweenMax.set(DOM.worldWrap, {
					filter: 'sepia(' + o.sepia +'%) brightness(' +
						o.brightness +'%) blur(' +
						o.blur +'px)'
				})
			}
		})
	},
	smoke: function(tile, x, y, scale){
		if (x === undefined){
			var o = animate.getXY(tile);
			x = o.x;
			y = o.y;
		}
		if (scale === undefined){
			scale = 1.25;
		}
		var smoke = document.createElementNS("http://www.w3.org/2000/svg","image");
		smoke.setAttributeNS(null,"width",256);
		smoke.setAttributeNS(null,"height",256);
		smoke.setAttributeNS(null,"x",x);
		smoke.setAttributeNS(null,"y",y);
		smoke.setAttributeNS(null,"opacity",0);
		smoke.setAttributeNS(null, 'class', 'no-pointer');
		smoke.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/smoke.png");
		DOM.mapAnimations.appendChild(smoke);
		TweenLite.to(smoke, 3, {
			startAt: {
				alpha: 1,
				transformOrigin: '50% 50%',
				xPercent: -50,
				yPercent: -50,
				scale: 0
			},
			ease: Power4.easeOut,
			scale: scale
		});
		TweenLite.to(smoke, 3, {
			alpha: 0,
			onComplete: function(){
				this.target.parentNode.removeChild(this.target);
			}
		});
		
	},
	screenShake: function(count, d, interval, fade){
		// number of shakes, distance of shaking, interval of shakes
		var foo = 0;
		(function doit(count, d, interval, e, M){
			var d2 = d/2;
			if (fade){
				if (foo % 2 === 0){
					d--;
					if (d < 2){
						d = 2;
					}
				}
			}
			TweenLite.to(e, interval, {
				x: ~~(M.random()*(d)-d2),
				y: ~~(M.random()*(d)-d2),
				onComplete:function(){
					TweenMax.to(e, interval, {
						x: ~~(M.random()*(d)-d2),
						y: ~~(M.random()*(d)-d2),
						onComplete:function(){
							TweenMax.to(e, interval, {
								x: ~~(M.random()*(d)-d2),
								y: ~~(M.random()*(d)-d2),
								onComplete:function(){
									TweenMax.to(e, interval,{
										x: 0,
										y: 0,
										onComplete: function(){
											foo++;
											if(foo < count){ 
												doit(count, d, interval, e, M); 
											}
										}
									});
								}
							});
						}
					});
				}
			});
		})(count, d, interval, DOM.gameWrap, Math);
	},
	selectTile: function(oldTgt, newTgt){
		TweenLite.set(DOM['land' + oldTgt], {
			filter: '',
			fill: g.color[game.player[game.tiles[oldTgt].player].playerColor],
			stroke: game.tiles[oldTgt].player ? g.color[game.player[game.tiles[oldTgt].player].playerColor] : '#aaa',
			strokeDasharray: 'none',
			strokeDashoffset: 0,
			strokeWidth: 1,
			onComplete: function(){
				if (game.tiles[oldTgt].player){
					TweenMax.set(this.target, {
						strokeWidth: 1,
						stroke: "hsl(+=0%, +=0%, -=30%)"
					});
				}
			}
		});
		// move to top
		var x = DOM['land' + newTgt].cloneNode(true);
		DOM.landWrap.appendChild(x);
		DOM['land' + newTgt].parentNode.removeChild(DOM['land' + newTgt]);
		// cache
		DOM['land' + newTgt] = document.getElementById('land' + newTgt);
		
		var newStroke = g.color[game.player[!game.tiles[newTgt].player ? 
			my.player : game.tiles[newTgt].player].playerColor];
		var newFill = g.color[game.player[!game.tiles[newTgt].player ? 
			0 : game.tiles[newTgt].player].playerColor];
		TweenLite.set(DOM['land'+ newTgt], {
			fill: newFill,
			stroke: newStroke,
			onComplete: function(){
				TweenMax.set(this.target, {
					stroke: "hsl(+=0%, +=0%, +=15)"
				});
			}
		});
		TweenMax.to(DOM['land' + newTgt], .4, {
			startAt: {
				filter: 'url(#emboss)',
				strokeDasharray: '5,5',
				strokeWidth: 3,
				strokeDashoffset: 0
			},
			strokeDashoffset: 10,
			repeat: -1,
			ease: Linear.easeNone
		});
	},
	brightness: function(e, brightness) {
		TweenLite.set(e, {
			filter: 'brightness('+ brightness +'%)'
		});
	},
	muhBible: function() {
		var tl = new TimelineMax();
		var split = new SplitText(document.getElementById('muh-bible'), {
			type: "words,chars"
		});
		var chars = split.chars;
		tl.staggerFromTo(chars, .2, {
			immediateRender: true,
			alpha: 0
		}, {
			delay: .1,
			alpha: 1
		}, .033);
	},
	energyBar: function(year){
		// 2.7 for 12? 2.9 for 15? this is really confusing
		TweenLite.to(DOM.energyIndicator, g.speed * 2.8, {
			startAt: {
				strokeDasharray: '0,100'
			},
			force3D: true,
			strokeDasharray: '100,100',
			ease: Linear.easeNone
		});
		TweenLite.to(DOM.currentYear, 3, {
			startAt: { color: '#ff0' },
			color: '#fff',
		});
		if (year) {
			DOM.currentYear.textContent = ui.transformYear(year);
			var o = {
				blur: 15
			};
			TweenLite.to(o, 1, {
				blur: 0,
				ease: Linear.easeIn,
				onUpdate: function() {
					animate.blur(DOM.currentYear, o.blur);
				}
			});
			/*TweenLite.to(DOM.currentYear, 2, {
				scrambleText:{
					text: ui.transformYear(year),
      				chars: "1234567890ABCD.",
					tweenLength: false,
					ease: Linear.easeIn
				}
			});*/
		}
	},
	blur: function(e, blur) {
		TweenLite.set(e, {
			filter: 'blur('+ blur +'px)'
		})
	},
	research: function(o) { // element, duration, tech, method
		// create new DOM element
		var e = document.createElement('div'),
			e2 = document.createElement('div'),
			e3 = document.createElement('div'),
			e4 = document.createElement('div'),
			ref = document.getElementById(o.element);

		e.className = 'research-progress';

		e2.className = 'research-label';
		e2.innerHTML = o.tech;

		e3.className = 'research-bar';

		e4.className = 'research-bar-bg';

		ref.parentNode.insertBefore(e, ref.nextSibling);
		e.appendChild(e2);
		e.appendChild(e3);
		e3.appendChild(e4);

		TweenMax.to(e4, o.duration, {
			startAt: { width: 0 },
			width: '100%',
			ease: Linear.easeIn,
			onComplete: function() {
				e.parentNode.removeChild(e);
				research[o.method]();
				if (o.tech === 'Future Tech') {
					$("#researchFutureTech").css('display', 'flex');
				}
			}
		});
		// remove original element
		if (o.tech === 'Future Tech') {
			$("#researchFutureTech").css('display', 'none');
		}
		else {
			ref.parentNode.removeChild(ref);
		}
		// remove stale tooltip
		$(".tooltip.in").remove();
	}
}
// my.js
var my = {
	window: 'Full Screen',
	lastReceivedWhisper: '',
	account: '',
	channel: '',
	player: 0,
	playerColor: 0,
	team: 0,
	gameName: 'Earth Alpha',
	max: 8,
	tgt: 1,
	lastTgt: 1,
	capital: 0,
	lastTarget: {},
	units: 0,
	food: 0,
	production: 25,
	culture: 0,
	oBonus: -1,
	dBonus: -1,
	productionBonus: -1,
	foodBonus: -1,
	cultureBonus: -1,
	foodMax: 25,
	cultureMax: 300,
	manpower: 0,
	moves: 4,
	sumMoves: 4,
	sumFood: 0,
	sumProduction: 0,
	sumCulture: 0,
	flag: "",
	targetLine: [0,0,0,0,0,0],
	motionPath: [0,0,0,0,0,0],
	attackOn: false,
	splitAttack: false,
	splitAttackCost: 1,
	attackCost: 2,
	deployCost: 1,
	rushCost: 2,
	maxDeployment: 12,
	cannonBonus: 0,
	targetData: {},
	selectedFlag: "blank",
	selectedFlagFull: "blank.png",
	government: 'Despotism',
	tech: {
		masonry: 0,
		construction: 0,
		engineering: 0,
		gunpowder: 0,
		rocketry: 0,
		atomicTheory: 0
	},
	hud: function(msg, d){
		timer.hud.kill();
		DOM.hud.style.visibility = 'visible';
		DOM.hud.textContent = msg;
		if (d){
			timer.hud = TweenMax.to(DOM.hud, 5, {
				onComplete: function(){
					DOM.hud.style.visibility = 'hidden';
				}
			});
		}
	},
	clearHud: function(){
		timer.hud.kill();
		DOM.hud.style.visibility = 'hidden';
		TweenMax.set([DOM.targetLine, DOM.targetLineBorder, DOM.targetLineShadow, DOM.targetCrosshair], {
			visibility: 'hidden',
			strokeDashoffset: 0
		});
		$("#style-land-pointer").remove();
		$DOM.head.append('<style id="style-land-pointer">.land{ cursor: pointer; }</style>');
	},
	checkSelectLastTarget: function(){
		if (game.tiles[my.tgt].player !== my.player){
			if (game.tiles[my.lastTgt].player === my.player){
				my.nextTarget(false, my.lastTgt);
			} else {
				my.nextTarget(false);
			}
		}

	},
	nextTarget: function(backwards, setTgt){
		void 0;
		if (!g.spectateStatus){
			my.lastTgt = my.tgt;
			var count = 0,
				len = game.tiles.length;
			if (setTgt === undefined){
				// TAB targeting
				backwards ? my.tgt-- : my.tgt++;
			}
			else {
				my.tgt = setTgt;
			}
			if (my.tgt < 0){
				my.tgt = len-1;
			}
			while (count < len && my.player !== game.tiles[my.tgt % len].player){
				backwards ? my.tgt-- : my.tgt++;
				if (my.tgt < 0){
					my.tgt = len - 1;
				}
				count++;
			}
			if (setTgt === undefined){
				// TAB targeting
				if (!backwards){
					my.tgt = my.tgt % len;
				}
				else {
					my.tgt = Math.abs(my.tgt);
				}
			}
			else {
				my.tgt = setTgt;
			}
			my.focusTile(my.tgt, .1);
			animate.selectTile(my.lastTgt, my.tgt);
		}
	},
	// shift camera to tile
	focusTile: function(tile, d){
		var e = DOM['land' + tile];
		if (e !== null){
			var box = e.getBBox();
			if (d === undefined){
				d = .5;
			}
			// 300 is left padding; 200 top padding
			var x = -box.x - (box.width/2) - 300 + (window.innerWidth/2);
			if (x > 0){
				x = 0;
			}
			var xMin = (g.map.sizeX - window.innerWidth) * -1;
			if (x < xMin){
				x = xMin;
			}

			var y = -box.y - (box.height/2) - 200 + (window.innerHeight/2);
			if (y > 0){
				y = 0;
			}
			var yMin = (g.map.sizeY - window.innerHeight) * -1;
			if (y < yMin){
				y = yMin;
			}
			TweenMax.to(DOM.worldWrap, d, {
				force3D: false,
				x: x * g.resizeX,
				y: y * g.resizeY
			});
			ui.showTarget(DOM['land' + tile], false, 1);
		}
	}
};
// core.js
$.ajaxSetup({
	type: 'POST',
	timeout: 5000
});
TweenMax.defaultEase = Quad.easeOut;
var g = {
	attackTimer: 0,
	splitAttackTimer: 0,
	cannonTimer: 0,
	missileTimer: 0,
	nukeTimer: 0,
	Msg: document.getElementById('Msg'),
	msgTimer: new TweenMax.delayedCall(0, ''),
	camel: function(str){
		str = str.split("-");
		for (var i=1, len=str.length; i<len; i++){
			str[i] = str[i].charAt(0).toUpperCase() + str[i].substr(1);
		}
		return str.join("");
	},
	msg: function(msg, d) {
		if (!msg.trim()) return;
		if (d === 0){
			TweenMax.set(g.Msg, {
				overwrite: 1,
				startAt: {
					opacity: 1
				}
			});
		}
		else {
			if (d === undefined || d < 2){
				d = 2;
			}
			g.msgTimer.kill();
			g.msgTimer = TweenMax.to(g.Msg, d, {
				startAt: {
					scaleY: 1,
					opacity: 1
				},
				onComplete: function(){
					g.msgClose();
				}
			});
		}
		if (msg) {
			g.Msg.innerHTML = msg;
		}
		// split text animation
		var tl = new TimelineMax(),
			split = new SplitText(g.Msg, {
				type: "words,chars"
			}),
			chars = split.chars;

		tl.staggerFromTo(chars, .01, {
			immediateRender: true,
			alpha: 0
		}, {
			delay: .1,
			alpha: 1
		}, .01);
	},
	msgClose: function() {
		TweenMax.to(g.Msg, .3, {
			scaleY: 0
		});
	},
	gameDuration: 0,
	spectateStatus: 0,
	modalSpeed: .5,
	friends: [],
	ignore: [],
	color: [
		"#02063a",
		"#bb0000",
		"#0077ff",
		"#a5a500",
		"#006000",
		"#b06000",
		"#33ddff",
		"#b050b0",
		"#5500aa",
		"#660000",
		"#0000bb",
		"#663300",
		"#33dd33",
		"#222222",
		"#00ff99",
		"#ff6666",
		"#ff00ff",
		'#e4e4e4',
		'#220088',
		'#404000',
		'#888888'
	],
	rankedMode: 0,
	teamMode: 0,
	joinedGame: false,
	searchingGame: false,
	defaultTitle: 'Firmament Wars',
	titleFlashing: false,
	name: "",
	password: "",
	speed: 12,
	focusUpdateNationName: false,
	focusGameName: false,
	view: "title",
	resizeX: 1,
	resizeY: 1,
	sfxFood: false,
	sfxCulture: false,
	chatOn: false,
	overlay: document.getElementById("overlay"),
	over: 0,
	showSpectateButton: 1,
	victory: false,
	startTime: Date.now(),
	keyLock: false,
	loadAttempts: 0,
	upgradeCost: [40, 50, 60],
	isModalOpen: false,
	lock: function(clear){
		g.overlay.style.display = "block";
		g.overlay.style.opacity = clear === void 0 ? 0 : 1;
		g.keyLock = true;
	},
	unlock: function(clear){
		g.overlay.style.display = "none";
		clear ? g.overlay.style.opacity = 0 : g.overlay.style.opacity = 1;
		g.keyLock = false;
	},
	unlockFade: function(d){
		if (!d){
			d = 1;
		}
		TweenMax.to(g.overlay, d, {
			startAt: {
				opacity: 1,
			},
			ease: Power3.easeIn,
			opacity: 0,
			onComplete: function(){
				g.overlay.style.display = 'none';
			}
		});
	},
	TDC: function(){
		return new TweenMax.delayedCall(0, '');
	},
	screen: {
		resizeMap: function(){
			// set worldWrap CSS
			$("#mapStyle").remove();
			var css =
				'<style id="mapStyle">#worldWrap{ '+
					'position: absolute; '+
					'top: 0%; '+
					'left: 0%; '+
					'width: ' + ((g.map.sizeX / window.innerWidth) * 100) + '%; '+
					'height: ' + ((g.map.sizeY / window.innerHeight) * 100) + '%; '+
				'}</style>';
			$DOM.head.append(css);
		}
	},
	mouse: {
		x: 0,
		y: 0,
		zoom: 100,
		mouseTransX: 50,
		mouseTransY: 50
	},
	map: {
		sizeX: 5099,
		sizeY: 2627,
		name: 'Alpha Earth',
		key: 'AlphaEarth',
		tiles: 143
	},
	updateUserInfo: function(){
		if (location.host !== 'localhost'){
			$.ajax({
				async: true,
				type: 'GET',
				dataType: 'jsonp',
				url: 'https://geoip-db.com/json/geoip.php?jsonp=?'
			}).done(function(data){
				data.latitude += '';
				data.longitude += '';
				g.geo = data;
				$.ajax({
					url: app.url + 'php/updateUserInfo.php',
					data: {
						location: g.geo
					}
				}).done(function(){
					localStorage.setItem('geo', JSON.stringify(g.geo));
					localStorage.setItem('geoSeason', 1);
					localStorage.setItem('geoTime', Date.now());
				});
				//console.info('loc: ', g.geo);
			});
		}
	},
	checkPlayerData: function(){
		var geo = localStorage.getItem(my.account+ '_geo'),
			geoTime = localStorage.getItem(my.account+ '_geoTime'),
			geoSeason = localStorage.getItem(my.account+ '_geoSeason');

		if (geoTime !== null || geoSeason === null){
			// longer than 90 days?
			if ((Date.now() - geoTime) > 7776000 || geoSeason === null){
				g.updateUserInfo();
			}
		}
		else if (geo === null){
			g.updateUserInfo();
		}
		// ignore list
		var ignore = localStorage.getItem('ignore');
		if (ignore !== null){
			g.ignore = JSON.parse(ignore);
		} else {
			// first time user... open configure nation
			app.isApp && title.configureNation();
			var foo = [];
			localStorage.setItem('ignore', JSON.stringify(foo));
		}
		var bible = localStorage.getItem('bible') * 1;
		$("#bible-status").prop('checked', !!bible);
		stats.setBibleMode(bible);
	},
	config: {
		audio: {
			musicVolume: 10,
			soundVolume: 20
		}
	},
	geo: {},
	keepAlive: function(){
		$.ajax({
			type: 'GET',
			url: app.url + "php/keepAlive.php"
		}).always(function() {
			setTimeout(g.keepAlive, 120000);
		});
	},
	removeContainers: function(){
		$("#firmament-wars-logo-wrap, #mainWrap").remove();
	},
	notification: {},
	sendNotification: function(data){
		if (!document.hasFocus() && g.view !== 'game' && typeof Notification === 'function'){
			
			Notification.requestPermission().then(function(permission){
				if (permission === 'granted'){
					// it's a player message
					var type = ' says: ';
					if (data.flag && (data.msg || data.message)){
						// sent by a player
						if (data.type === 'chat-whisper'){
							type = ' whispers: ';
						}
						var prefix = data.account + type;
						g.notification = new Notification(prefix, {
							icon: 'images/flags/' + flagFile,
							tag: "Firmament Wars",
							body: data.msg ? data.msg : data.message
						});
						g.notification.onclick = function(){
							window.focus();
						}
						// title flash
						if (!g.titleFlashing){
							g.titleFlashing = true;
							(function repeat(toggle){
								if (!document.hasFocus()){
									if (toggle % 2 === 0){
										document.title = prefix;
									} else {
										document.title = g.defaultTitle;
									}
									setTimeout(repeat, 3000, ++toggle);
								}
							})(0);
						}
						audio.play('chat');
					}
				}
			});
		}
	},
	chat: function(msg, type){
		var o = {
			message: msg,
			type: type
		};
		if (g.view === 'title'){
			title.chat(o);
		} else if (g.view === 'lobby'){
			lobby.chat(o);
		} else {
			game.chat(o);
		}
	},
	getRandomFlag: function(){
		var a = [],
			i = 0;
		for (var key in g.flagData){
			g.flagData[key].name.forEach(function(flag){
				a[i++] = flag;
			});
		}
		var len = a.length,
			ind = ~~(Math.random() * len);
		return a[ind];
	},
	flagData: {
		Africa: {
			group: "Africa",
			name: ['Algeria', 'Angola', 'Benin', 'Botswana', 'Burkina Faso', 'Burundi', 'Cameroon', 'Cape Verde', 'Central African Republic', 'Chad', 'The Comoros', 'The Congo', 'Democratic Republic of the Congo', 'Djibouti', 'Equatorial Guinea', 'Eritrea', 'Gabon', 'The Gambia', 'Guinea', 'Guinea-Bissau', 'Ivory Coast', 'Egypt', 'Ethiopia', 'Ghana', 'Kenya', 'Lesotho', 'Liberia', 'Libya', 'Madagascar', 'Malawi', 'Mali', 'Mauritania', 'Mauritius', 'Morocco', 'Mozambique', 'Namibia', 'Niger', 'Nigeria', 'Rwanda', 'Sao Tome and Príncipe', 'Senegal', 'Seychelles', 'Sierra Leone', 'Somalia', 'South Africa', 'South Sudan', 'Sudan', 'Swaziland', 'Tanzania', 'Togo', 'Tunisia', 'Uganda', 'Zambia', 'Zimbabwe']
		},
		Asia: {
			group: "Asia",
			name: ['Bangladesh', 'Bhutan', 'Brunei', 'Cambodia', 'China', 'East Timor', 'Hong Kong', 'India', 'Indonesia', 'Japan', 'Laos', 'Malaysia', 'Maldives', 'Mongolia', 'Myanmar', 'Nepal', 'North Korea', 'Pakistan', 'Philippines', 'Singapore', 'South Korea', 'Sri Lanka', 'Suriname', 'Taiwan', 'Thailand', 'Vietnam']
		},
		CentralAsia: {
			group: "Central Asia",
			name: ['Armenia', 'Azerbaijan', 'Georgia', 'Kazakhstan', 'Kyrgyzstan', 'Tajikistan', 'Turkmenistan', 'Uzbekistan']
		},
		Europe: {
			group: "Europe",
			name: ['Albania', 'Andorra', 'Austria', 'Belarus', 'Belgium', 'Bosnia and Herzegovina', 'Bulgaria', 'Croatia', 'Cyprus', 'Czech Republic', 'Denmark', 'Estonia', 'Finland', 'France', 'Germany', 'Greece', 'Hungary', 'Iceland', 'Ireland', 'Italy', 'Kosovo', 'Latvia', 'Liechtenstein', 'Lithuania', 'Luxembourg', 'Macedonia', 'Malta', 'Moldova', 'Monaco', 'Montenegro', 'Netherlands', 'Norway', 'Poland', 'Portugal', 'Romania', 'Russia', 'San Marino', 'Scotland', 'Serbia', 'Slovakia', 'Slovenia', 'Spain', 'Sweden', 'Switzerland', 'Ukraine', 'United Kingdom', 'Vatican City']
		},
		Historic: {
			group: "Historic",
			name: ['Benin Empire', 'Byzantine Empire', 'Confederate Flag', 'England', 'Flanders', 'Gadsden Flag', 'Holy Roman Empire', 'Isle of Man', 'Rising Sun Flag', 'NSDAP Flag', 'NSDAP War Ensign', 'Ottoman Empire', 'Rhodesia', 'Roman Empire', 'Shahanshahi', 'USSR', 'Veneto', 'Welsh']
		},
		MiddleEast: {
			group: "Middle East",
			name: ['Afghanistan', 'Bahrain', 'Iran', 'Iraq', 'Israel', 'Jerusalem', 'Jordan', 'Kurdistan', 'Kuwait', 'Lebanon', 'Oman', 'Palestine', 'Qatar', 'Saudi Arabia', 'Syria', 'Turkey', 'United Arab Emirates', 'Yemen']
		},
		Miscellaneous: {
			group: "Miscellaneous",
			name: ['Anarcho-Capitalist', 'Anarcho-Syndicalist', 'Antifa', 'Cascadia', 'Christian', 'European Union', 'High Energy', 'ISIS', 'Jefferson State', 'Jolly Roger', 'Kekistan', 'Northwest Front', 'Pan-African Flag', 'pol', 'Rainbow Flag', 'Sicily', 'United Nations']
		},
		NorthAmerica: {
			group: "North America",
			name: ['Antigua and Barbuda', 'Bahamas', 'Barbados', 'Belize', 'Canada', 'Costa Rica', 'Cuba', 'Dominica', 'Dominican Republic', 'El Salvador', 'Grenada', 'Guatemala', 'Jamaica', 'Haiti', 'Honduras', 'Mexico', 'Panama', 'Saint Kitts and Nevis', 'Saint Lucia', 'Saint Vincent and the Grenadines', 'Trinidad and Tobago', 'United States']
		},
		Oceania: {
			group: "Oceania",
			name: ['Australia', 'Fiji', 'Kiribati', 'Marshall Islands', 'Federated States of Micronesia', 'Nauru', 'New Zealand', 'Palau', 'Papua New Guinea', 'Samoa', 'Solomon Islands', 'Tonga', 'Tuvalu', 'Vanuatu']
		},
		SouthAmerica: {
			group: "South America",
			name: ['Argentina', 'Bolivia', 'Brazil', 'Chile', 'Colombia', 'Ecuador', 'Guyana', 'Nicaragua', 'Paraguay', 'Peru', 'Uruguay', 'Venezuela']
		},
		US_States: {
			group: "State Flags",
			name: ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia State', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming']
		},
		US_Territories: {
			group: "US Territories",
			name: ['American Samoa', 'District of Columbia', 'Guam', 'Johnston Atoll', 'Midway Islands', 'Navassa Island', 'Northern Mariana Islands', 'Palmyra Atoll', 'Puerto Rico', 'Virgin Islands', 'Wake Island']
		},
	},
	initGameCallback: function(data) {
		// handle hiding/showing menu based on environment
		if (app.isApp) {
			$("#logout").remove();
		}
		else {
			$("#logout").css('display', 'inline-block');
		}
		lang.updateIndexHtml();
		TweenMax.staggerTo(document.getElementsByClassName('action-btn'), .5, {
			startAt: { x: -30 },
			x: 0,
			opacity: 1
		}, .1);

		void 0;
		my.channel = data.initChannel;
		$('.actionButtons').tooltip({
			animation: false,
			placement: 'left',
			container: 'body'
		});
		$('[title]').tooltip({
			animation: false,
			placement: 'bottom',
			container: 'body'
		});
		if (data.account) {
			app.account = data.account; // for global reference
			isLoggedIn = 1;
			$('#logout').text('Logout ' + data.account);
			app.isApp && $("#login-modal").remove();
			// people playing firmament wars:
			title.chat({
				message: 'There are '+ data.currentPlayers +' people playing Firmament Wars.'
			});
			// set flag
			document.getElementById('updateNationFlag').src = 'images/flags/'+ data.flag;
			document.getElementById('selectedFlag').textContent = data.flagShort;
			title.refreshGamesCallback(data.games);
			// initChatId
			my.account = data.account;
			my.flag = data.flag;
			my.rating = data.rating;
			g.checkPlayerData();
			title.friendGetCallback(data.friends);
			g.msgClose();
		}
		else {
			notLoggedIn();
		}
		// animate logo
		/* blur(5px) hue-rotate(360deg) brightness(100%) contrast(100%) shadow(100%) (chrome not supported?) grayscale(100%) invert(100%) opacity(100%) saturate(100%) sepia(100%) */
		var e = document.getElementById('firmamentWarsLogo');
		function applyFilter(o) {
			e.style.filter =
				'drop-shadow(0px 0px '+ o.shadow +'px #048) ' +
				'brightness('+ o.brightness +'%)';
		}
		var o = {
			shadow: 2,
			brightness: 100
		};
		TweenMax.to(o, 3, {
			overwrite: 1,
			shadow: 12,
			brightness: 150,
			repeat: -1,
			yoyo: true,
			ease: Power4.easeIn,
			onUpdate: function() {
				applyFilter(o);
			}
		});
		// handle setting accounts and config nation for new players
		void 0;
		socket.init();
		data.isNewAccount && title.configureNation();
	}
};
g.init = (function(){
	g.lock();
	if (app.isApp) {
		$("#exit-game").on('click', function() {
			title.exitGame();
		});
	}
	$("#reset-game").on('click', function() {
		location.reload();
	});
	TweenMax.to('#title-stars-1', 50, {
		startAt: { backgroundPosition: '0'},
		force3D: true,
		backgroundPosition: '-1920px',
		repeat: -1,
		ease: Linear.easeNone
	});
	TweenMax.to('#title-stars-2', 75, {
		startAt: { backgroundPosition: '200px -200px'},
		backgroundPosition: '-1720px -200px',
		repeat: -1,
		ease: Linear.easeNone
	});
	TweenMax.to('#title-stars-3', 100, {
		startAt: { backgroundPosition: '400px -400px'},
		backgroundPosition: '-1520px -400px',
		repeat: -1,
		ease: Linear.easeNone
	});
	TweenMax.to('#title-backdrop', 12, {
		startAt: { scale: 1, transformOrigin: '0% 100%' },
		scale: 3,
		repeat: -1,
		yoyo: true,
		ease: Power1.easeInOut
	});
	TweenMax.to('#firmamentWarsBG', 1, {
		startAt: { y: '-47%' },
		y: '-50%',
		onComplete: function() {
			TweenMax.to('#firmamentWarsBG', 10, {
				startAt: { scale: 1 },
				scale: 1.08,
				repeat: -1,
				yoyo: true,
				ease: Power1.easeInOut
			});
		}
	});
	// default
	my.lang = 'english';
	if (app.isApp) {
		g.lock(1);
		// app login, check for steam ticket
		var greenworks = require('./greenworks'),
			steam = {
				screenName: '',
				steamid: '',
				handle: 0
			};

		if (greenworks.initAPI()) {
			greenworks.init();
			var langPref = greenworks.getCurrentUILanguage(),
				z = greenworks.getSteamId();

			var index = lang.alternateSupportedLanguages.indexOf(langPref);
			/*title.chat({
				message: 'Detected language: ' + langPref
			});*/
			if (index > -1) {
				my.lang = lang.alternateSupportedLanguages[index];
			}

			g.msg(lang[my.lang].verifyingSteam);

			steam.screenName = z.screenName;
			steam.steamid = z.steamId;
			greenworks.getAuthSessionTicket(function (data) {
				steam.handle = data.handle;
				$.ajax({
					type: 'POST',
					url: app.url + 'php/init-game.php',
					data: {
						version: app.version,
						screenName: steam.screenName,
						steamid: steam.steamid,
						ticket: data.ticket.toString('hex')
					}
				}).done(function(data) {
					greenworks.cancelAuthTicket(steam.handle);
					g.initGameCallback(data);
				}).fail(function(data) {
					g.lock(1);
					data.responseText && g.msg(data.responseText, 0);
				});
			});
		}
		else {
			g.lock(1);
			g.msg(lang[my.lang].steamNotFound, 0);
		}
	}
	else {
		// non-app login
		$.ajax({
			type: "POST",
			url: app.url + 'php/init-game.php',
			data: {
				version: app.version,
				screenName: '',
				steamid: '',
				ticket: ''
			}
		}).done(function(data) {
			g.initGameCallback(data);
		}).fail(function(data) {
			g.lock(1);
			data.responseText && g.msg(data.responseText, 0);
		});
	}

	// TODO separate this confusing logic a bit
	if ((location.hostname === 'localhost' && location.hash !== '#stop') || 
		localStorage.getItem('resync') && 
		localStorage.getItem('reload') !== false){
		localStorage.setItem('resync', 0);
		$.ajax({
			type: "GET",
			url: app.url + 'php/rejoinGame.php' // check if already in a game
		}).done(function(data) {
			//console.info('rejoin ', data.gameId, data.team);
			if (data.gameId > 0){
				my.player = data.player;
				my.playerColor = data.player;
				g.teamMode = data.teamMode;
				g.rankedMode = data.rankedMode;
				my.team = data.team;
				game.id = data.gameId;
				g.map = data.mapData;
				// g.speed = data.speed;
				// join lobby in progress
				setTimeout(function(){
					lobby.init(data);
					lobby.join(0); // autojoin
					initResources(data); // setResources(data);
					my.government = data.government;
					lobby.updateGovernmentWindow(my.government);
					socket.joinGame();
				}, 111);
			}
		}).fail(function(data){
			g.msg(data.responseText);
		});
	}
})();
var game = {
	name: '',
	tiles: [],
	initialized: false,
	toggleGameWindows: function(){
		var x = $("#ui2-head").css('visibility') === 'visible';
		TweenMax.set(DOM.gameWindows, {
		  	visibility: x ? 'hidden' : 'visible'
		});
		if (x) {
			TweenMax.to('#hotkey-ui', .5, {
				startAt: {
					opacity: 0,
					visibility: 'visible'
				},
				opacity: 1
			});
		}
		else {
			TweenMax.set('#hotkey-ui', {
				visibility: 'hidden'
			});
		}
	},
	toggleFlags: function(){
		var x = $("#diplomacy-body").css('display') === 'block';
		TweenMax.set('#diplomacy-body', {
		  	display: x ? 'none' : 'block'
		});
	},
	player: [0,0,0,0,0,0,0,0,0], // cached values on client to reduce DB load
	initMap: function(){
		(function(d, len){
			for (var i=0; i<len; i++){
				DOM['land' + i] = d.getElementById('land' + i);
				DOM['flag' + i] = d.getElementById('flag' + i);
				DOM['unit' + i] = d.getElementById('unit' + i);
			}
		})(document, game.tiles.length);
	},
	chat: function(data){
		while (DOM.chatContent.childNodes.length > 10) {
			DOM.chatContent.removeChild(DOM.chatContent.firstChild);
		}
		var z = document.createElement('div');
		if (data.type){
			z.className = data.type;
		}
		z.innerHTML = data.message;
		DOM.chatContent.appendChild(z);
		setTimeout(function(){
			if (z !== undefined){
				if (z.parentNode !== null){
					TweenMax.to(z, .125, {
						alpha: 0,
						onComplete: function(){
							if (z.parentNode !== null){
								z.parentNode.removeChild(z);
							}
						}
					});
				}
			}
		}, 12000);
	},
	eliminatePlayer: function(data){
		// player eliminated
		var i = data.player,
			playerCount = 0,
			cpuCount = 0,
			teams = [];

		game.player[i].alive = false;
		// count alive players remaining
		game.player.forEach(function(e, index){
			if (e.account){
				if (e.alive){
					if (!e.cpu){
						// only counts human players
						//console.info('Human player found at: '+ index);
						playerCount++;
						if (teams.indexOf(e.team) === -1){
							teams.push(e.team);
						}
					}
					if (e.cpu){
						//console.info('CPU player found at: '+ index);
						cpuCount++;
					}
				}
			}
		});
		// found 2 players on diplomacy panel
		$("#diplomacyPlayer" + i).removeClass('alive');
		void 0;
		if (g.teamMode){
			if (teams.length <= 1){
				// disables spectate button
				g.showSpectateButton = 0;
			}
		}
		else {
			if (playerCount <= 1){
				// disables spectate button
				g.showSpectateButton = 0;
			}
		}
		// game over - insurance check to avoid multiples somehow happening
		if (!g.over){
			// it's not over... check with server
			void 0;
			if (i === my.player){
				gameDefeat();
			}
			else {
				// check if I won
				// cpus must be dead
				if (g.teamMode){
					if (teams.length <= 1){
						setTimeout(function(){
							gameVictory();
						}, 1000);
					}
				}
				else {
					if (playerCount <= 1 && !cpuCount){
						setTimeout(function(){
							gameVictory();
						}, 1000);
					}
				}
			}
		}
		// remove
		TweenMax.set('#diplomacyPlayer' + i, {
			autoAlpha: 0,
			onComplete: function(){
				$("#diplomacyPlayer" + i).css('display', 'none');
			}
		});
		TweenMax.set('#diplomacyPlayer' + i, 0, {
			startAt: { 
				transformPerspective: 400,
				transformOrigin: '50% 0',
				rotationX: 0
			},
			paddingTop: 0,
			paddingBottom: 0,
			height: 0,
			rotationX: -90
		});
		data.eliminateType !== 'byPlayer' && game.removePlayer(i);
	},
	removePlayer: function(p){
		game.tiles[p].account = '';
		game.tiles[p].nation = '';
		game.tiles[p].flag = '';
		for (var i=0, len=game.tiles.length; i<len; i++){
			if (game.tiles[i].player === p){
				game.tiles[i].account = '';
				game.tiles[i].defense = '';
				game.tiles[i].flag = '';
				game.tiles[i].nation = '';
				game.tiles[i].player = 0;
				game.tiles[i].units = 0;
				game.tiles[i].tile = i;
				game.updateTile(game.tiles[i]);
			}
		}
	},
	getGameState: function(){
		// this is now a reality check in case zmq messes up?
		// or check that players are still online?
		$.ajax({
			type: 'GET',
			url: app.url + "php/getGameState.php"
		}).done(function(data){
			// get tile data
			for (var i=0, len=data.tiles.length; i<len; i++){
				var d = data.tiles[i],
					updateTargetStatus = false;
				// check player value
				if (d.player !== game.tiles[i].player){
					// player value has changed
					if (!game.tiles[i].units){
						// set text visible if uninhabited
						// this confuses me still...
						TweenMax.set(DOM['unit' + i], {
							visibility: 'visible'
						});
					}
					// only update client data
					game.tiles[i].player = d.player;
					game.tiles[i].account = game.player[d.player].account;
					game.tiles[i].nation = game.player[d.player].nation;
					game.tiles[i].flag = game.player[d.player].flag;
					
					if (my.tgt === i){
						// current target was updated
						updateTargetStatus = true;
					}
					var newFlag = !game.player[d.player].flag ? 
						'blank.png' : game.player[d.player].flag;
					if (DOM['flag' + i] !== null){
						DOM['flag' + i].href.baseVal = "images/flags/" + newFlag;
					}
					TweenMax.set(DOM['land' + i], { 
						fill: g.color[game.player[d.player].playerColor],
						stroke: d.player ? g.color[game.player[d.player].playerColor] : '#aaa',
						strokeWidth: 1,
						onComplete: function(){
							if (d.player){
								TweenMax.set(this.target, {
									stroke: "hsl(+=0%, +=0%, -=30%)"
								});
							}
						}
					});
				}
				// check unit value
				if (d.units !== game.tiles[i].units){
					game.tiles[i].units = d.units;
					if (my.tgt === i){
						// defender won
						updateTargetStatus = true;
					}
					ui.setTileUnits(i);
				}
				
				updateTargetStatus && ui.showTarget(DOM['land' + i]); 
			}
		}).fail(function(data){
			void 0;
		});
	},
	updateDefense: function(data){
		var i = data.tile;
		game.tiles[i].defense = data.defense;
		animate.updateMapBars(i);
		if (my.tgt === i){
			ui.showTarget(DOM['land' + my.tgt]);
		}
	},
	updateTile: function(d){
		var i = d.tile * 1,
			p = d.player,
			timestamp = d.timestamp * 10000;
		// this update happened on the server earlier than most recent update... ignore!
		if (timestamp < game.tiles[i].timestamp) {
			void 0;
			return;
		}
		// only update client data
		game.tiles[i].player = p;
		game.tiles[i].account = game.player[p].account;
		game.tiles[i].nation = game.player[p].nation;
		game.tiles[i].flag = game.player[p].flag;
		game.tiles[i].timestamp = timestamp;
		var newFlag = game.player[p].flag;
		// change flag
		if (DOM['flag' + i] !== null && newFlag){
			// check barb
			if (newFlag === 'blank.png' && d.units) {
				newFlag = 'Barbarian.jpg';
			}
			void 0;
			DOM['flag' + i].href.baseVal = "images/flags/" + newFlag;
		}
		// land color
		TweenMax.set(DOM['land' + i], {
			fill: g.color[game.player[p].playerColor],
			stroke: p ? g.color[game.player[p].playerColor] : '#aaa',
			strokeWidth: 1,
			onComplete: function(){
				if (p){
					TweenMax.set(this.target, {
						stroke: "hsl(+=0%, +=0%, "+ (my.tgt === i ? "+=15%)" : "-=30%)")
					});
				}
			}
		});
		
		// check unit value
		if (d.units){
			if (d.units !== game.tiles[i].units){
				game.tiles[i].units = d.units;
				ui.setTileUnits(i);
			}
		}
		else {
			// dead/surrender
			game.tiles[i].units = 0;
			TweenMax.set(DOM['unit' + i], {
				visibility: 'hidden'
			});
		}
		
		my.tgt === i && ui.showTarget(DOM['land' + i]);
		ui.drawDiplomacyPanel();
	},
	isMineOrAdjacent: function(tile) {
		if (game.tiles[tile].player === my.player) return 1;
		if (!game.tiles[tile].units) return 0;
		var foo = 0;
		game.tiles[tile].adj.forEach(function(v) {
			if (game.tiles[v].player === my.player) {
				foo = 1;
			}
		});
		return foo;
	},
	setVisibilityAll: function() {
		game.tiles.forEach(function(o, i) {
			//tile.adj.forEach(function(v) {
				ui.setUnitVisibility(i);
			//});
		});
	},
	setSumValues: function(){
		var o = {
			food: 0,
			production: 0,
			culture: 0
		}
		for (var i=0; i<g.tileCount; i++){
			if (my.player === game.tiles[i].player){
				o.food += game.tiles[i].food;
				o.production += game.tiles[i].production;
				o.culture += game.tiles[i].culture;
			}
		}
		//DOM.sumFood.textContent = o.food;
		//DOM.sumProduction.textContent = o.production;
		//DOM.sumCulture.textContent = o.culture;
	},
	energyTimer: 0,
	startGameState: function(){
		// add function to get player data list?
		game.getGameState();
		game.energyTimer = setInterval(game.updateResources, g.speed * 1000);
		animate.energyBar();
	},
	triggerNextTurn: function(data){
		//console.info("TRIGGERING NEXT TURN!", data);
		clearInterval(game.energyTimer);
		game.energyTimer = setInterval(game.updateResources, g.speed * 1000);
		game.updateResources();
	},
	lowestPlayerIsMe: function() {
		var lowestId = my.player;
		game.player.forEach(function(v) {
			if (v.alive && v.player < lowestId) {
				lowestId = v.player;
			}
		});
		return lowestId === my.player;
	},
	playerActivatesCpuTurn: function(cpu) {
		var count = 0,
			alivePlayers = [];

		game.player.forEach(function(v, i) {
			//console.info('alivePlayers status: ', v.alive, v.cpu);
			if (v.alive && v.cpu === 0) {
				// add human players only
				//console.info('alivePlayers PUSH: ', i);
				alivePlayers.push(i);
				count++;
			}
		});
		var result = alivePlayers[cpu % count];
		/*console.info('alivePlayers: ', alivePlayers);
		console.info('cpu: ', cpu);
		console.info('count: ', count);*/
		void 0;
		return result === my.player;
	},
	updateResources: function(){
		if (!g.over){
			var firstPlayer = 0,
				pingCpu = 0;
			game.player.forEach(function(d){
				if (d.alive){
					if (d.cpu){
						// game.lowestPlayerIsMe() && ai.takeTurn(d);
						game.playerActivatesCpuTurn(d.player) && ai.takeTurn(d);
					}
					else if (d.cpu === 0){
						// 0 means player, null means barb
						if (!firstPlayer){
							firstPlayer = 1;
							if (d.account === my.account){
								// so only one players updates
								pingCpu = 1;
							}
						}
					}
				}
			});
			//console.info('getGameState ', firstPlayer, pingCpu);
			$.ajax({
				url: app.url + "php/updateResources.php",
				data: {
					pingCpu: pingCpu,
					resourceTick: g.resourceTick 
				}
			}).done(function(data){
				g.resourceTick = data.resourceTick;
				setResources(data);
				game.reportMilestones(data);
				animate.energyBar(data.resourceTick);
			}).fail(function(data){
				void 0;
				serverError(data);
			});
		}
	},
	reportMilestones: function(data){
		if (data.cultureMsg !== undefined){
			if (data.cultureMsg){
				var o = {
					message: data.cultureMsg
				};
				game.chat(o);
				audio.play('culture');
				audio.play('cheer3');
				// rush bonus changes
				initOffensiveTooltips();
			}
		}
	}
};
var timer = {
	hud: g.TDC()
};
// DOM caching
var DOM;
function initDom(){
	var d = document;
	DOM = {
		targetUiWrap: d.getElementById('target-ui-wrap'),
		endTurn: d.getElementById('endTurn'),
		energyIndicator: d.getElementById('energyIndicator'),
		currentYear: d.getElementById('currentYear'),
		currentYearWrap: d.getElementById('currentYearWrap'),
		//targetTargetWrap: d.getElementById('targetTargetWrap'),
		targetFlag: d.getElementById('targetFlag'),
		//targetCapStar: d.getElementById('targetCapStar'),
		targetResources: d.getElementById('targetResources'),
		targetNameWrap: d.getElementById('targetNameWrap'),
		targetBarsWrap: d.getElementById('targetBarsWrap'),
		targetNameAnchor: d.getElementById('targetNameAnchor'),
		//targetTargetFlag: d.getElementById('targetTargetFlag'),
		//targetTargetCapStar: d.getElementById('targetTargetCapStar'),
		//targetTargetNameWrap: d.getElementById('targetTargetNameWrap'),
		//targetTargetBarsWrap: d.getElementById('targetTargetBarsWrap'),
		landWrap: d.getElementById('landWrap'),
		gameWindows: d.getElementsByClassName('gameWindow'),
		sumMoves: d.getElementById('sumMoves'),
		moves: d.getElementById('moves'),
		gameWrap: d.getElementById('gameWrap'),
		gameTableBody: d.getElementById('gameTableBody'),
		food: d.getElementById('food'),
		production: d.getElementById('production'),
		culture: d.getElementById('culture'),
		Msg: d.getElementById('Msg'),
		hud: d.getElementById("hud"),
		sumFood: d.getElementById("sumFood"),
		foodMax: d.getElementById("foodMax"),
		cultureMax: d.getElementById("cultureMax"),
		manpower: d.getElementById("manpower"),
		sumProduction: d.getElementById("sumProduction"),
		sumCulture: d.getElementById("sumCulture"),
		chatContent: d.getElementById("chat-content"),
		chatInput: d.getElementById("chat-input"),
		lobbyChatInput: d.getElementById("lobby-chat-input"),
		titleChatInput: d.getElementById("title-chat-input"),
		worldWrap: d.getElementById('worldWrap'),
		motionPath: d.getElementById('motionPath'),
		troopIcon: d.getElementById('troop-icon'),
		targetLine: d.getElementById('targetLine'),
		targetLineBorder: d.getElementById('targetLineBorder'),
		arrowheadTip: d.getElementById('arrowhead-tip'),
		arrowhead: d.getElementById('arrowhead'),
		arrowheadBorder: d.getElementById('arrowhead-border'),
		targetLineShadow: d.getElementById('targetLineShadow'),
		targetCrosshair: d.getElementById('targetCrosshair'),
		target: d.getElementById('target'),
		//avatar: d.getElementById('avatar'),
		//ribbonWrap: d.getElementById('ribbonWrap'),
		targetName: d.getElementById('targetName'),
		oBonus: d.getElementById('oBonus'),
		dBonus: d.getElementById('dBonus'),
		productionBonus: d.getElementById('productionBonus'),
		foodBonus: d.getElementById('foodBonus'),
		cultureBonus: d.getElementById('cultureBonus'),
		foodBar: d.getElementById('foodBar'),
		cultureBar: d.getElementById('cultureBar'),
		world: d.getElementById('world'),
		bgmusic: d.getElementById('bgmusic'),
		tileName: d.getElementById('tileName'),
		buildWord: d.getElementById('buildWord'),
		buildCost: d.getElementById('buildCost'),
		cannonsCost: d.getElementById('cannonsCost'),
		missileCost: d.getElementById('missileCost'),
		nukeCost: d.getElementById('nukeCost'),
		masonryCost: d.getElementById('masonryCost'),
		constructionCost: d.getElementById('constructionCost'),
		gunpowderCost: d.getElementById('gunpowderCost'),
		engineeringCost: d.getElementById('engineeringCost'),
		rocketryCost: d.getElementById('rocketryCost'),
		atomicTheoryCost: d.getElementById('atomicTheoryCost'),
		futureTechCost: d.getElementById('futureTechCost'),
		upgradeTileDefense: d.getElementById('upgradeTileDefense'),
		screenFlash: d.getElementById('screenFlash'),
		fireCannons: d.getElementById('fireCannons'),
		launchMissile: d.getElementById('launchMissile'),
		launchNuke: d.getElementById('launchNuke'),
		researchMasonry: d.getElementById('researchMasonry'),
		researchConstruction: d.getElementById('researchConstruction'),
		researchEngineering: d.getElementById('researchEngineering'),
		researchGunpowder: d.getElementById('researchGunpowder'),
		researchRocketry: d.getElementById('researchRocketry'),
		researchAtomicTheory: d.getElementById('researchAtomicTheory'),
		researchFutureTech: d.getElementById('researchFutureTech'),
		lobbyChatLog: d.getElementById('lobbyChatLog'),
		titleChatLog: d.getElementById('titleChatLog'),
		mapAnimations: d.getElementById('mapAnimations'),
		mapBars: d.getElementById('mapBars'),
		titleChatBody: d.getElementById('titleChatBody')
	}
};
initDom();

var $DOM = {
	head: $("#head"),
	chatInputOpen: $("#chat-input-open"),
	chatInputWrap: $("#chat-input-wrap"),
	chatInput: $("#chat-input"),
	lobbyChatInput: $("#lobby-chat-input"),
	titleChatInput: $("#title-chat-input")
};
// team colors
var worldMap = [];


var video = {
	cache: {},
	load: {
		game: function(){
			var x = [
				'smoke.png'
			];
			for (var i=0, len=x.length; i<len; i++){
				var z = x[i];
				video.cache[z] = new Image();
				video.cache[z].src = "images/" + z;
			}
		}
	}
}

function playerLogout(){
	
    g.lock();
	socket.removePlayer(my.account);
    $.ajax({
		type: 'GET',
		url: app.url + 'php/deleteFromFwtitle.php'
	});
	
	try {
		FB.getLoginStatus(function(ret) {
			ret.authResponse && FB.logout(function(response) {});
		});
	} catch (err){
		void 0;
	}
	
	try {
		var auth2 = gapi.auth2.getAuthInstance();
		auth2.signOut().then(function(){});
	} catch (err){
		void 0;
	}
	
	localStorage.removeItem('email');
	localStorage.removeItem('token');
	
	setTimeout(function(){
		$.ajax({
			type: 'GET',
			url: app.url + 'php/logout.php'
		}).done(function(data) {
			localStorage.removeItem('token');
			location.reload();
			g.msg(lang[my.lang].logoutSuccess);
		}).fail(function() {
			g.msg(lang[my.lang].logoutFailed);
		});
	}, 1000);
}

function exitGame(bypass){
	if (g.view === 'game'){
		var r = confirm("Are you sure you want to surrender?");
	}
	if (r || bypass || g.view !== 'game'){
		g.lock(1);
		$.ajax({
			url: app.url + 'php/exitGame.php',
			data: {
				view: g.view
			}
		}).always(function(){
			location.reload();
		});
	}
}
function surrenderMenu(){
	document.getElementById('surrenderScreen').style.display = 'block';
	audio.play('click');
}
function surrender(){
	document.getElementById('surrenderScreen').style.display = 'none';
	$.ajax({
		type: 'GET',
		url: app.url + 'php/surrender.php',
	});
	audio.play('click');
	
}

function serverError(data){
	// g.msg('The server reported an error.');
	void 0;
}
// title.js
var title = {
	players: [],
	games: [],
	getLeaderboard: function(type){
		var e = document.getElementById('leaderboardBody');
		e.innerHTML = '';
		g.lock();
		$.ajax({
			url: app.url + 'php/leaderboard.php',
			data: {
				type: type
			}
		}).done(function(data) {
			e.innerHTML = data.str;
			g.unlock();
		});
	},
	refreshTimer: 0,
	refreshGames: function(){
		if (Date.now() - title.refreshTimer > 5000){
			title.refreshTimer = Date.now();
			g.lock(1);

			$("#title-chat-input").focus();
			TweenMax.to('#refresh-game-button', 1, {
				rotation: "+=360",
				ease: Linear.easeIn
			});

			$.ajax({
				type: 'GET',
				url: app.url + 'php/refreshGames.php'
			}).done(function(data) {
				title.refreshGamesCallback(data.games);
			}).fail(function(e){
				void 0;
			}).always(function() {
				g.unlock();
			});
		}
	},
	refreshGamesCallback: function(data) {
		var e = document.getElementById('gameTableBody');
		if (e === null) return;
		// head
		var str = '';
		// body
		for (var i=0, len=data.length; i<len; i++){
			var d = data[i];
			title.games[d.id] = 1;
			str +=
			"<tr id='game_"+ d.id +"' class='shadow4 wars wars-"+ d.gameMode +" no-select' data-name='" + d.name + "'>\
				<td class='warCells'>"+ d.name + "</td>\
				<td class='warCells'>" + d.map + "</td>\
				<td class='warCells'>" + d.gameMode + "</td>\
			</tr>";

		}
		e.innerHTML = str;
	},
	init: (function(){
		$(document).ready(function(){
			// console.info("Initializing title screen...");
			// prevents auto scroll while scrolling
			$("#titleChatLog").on('mousedown', function(){
				title.chatDrag = true;
			}).on('mouseup', function(){
				title.chatDrag = false;
			});
			$("#title-chat-input").on('focus', function(){
				title.chatOn = true;
			}).on('blur', function(){
				title.chatOn = false;
			});
			$(".createGameInput").on('focus', function(){
				title.createGameFocus = true;
			}).on('blur', function(){
				title.createGameFocus = false;
			});
			$("#login-container").on(ui.click, '.nw-link', function() {
				title.openWindow($(this).attr('href'));
			})
			/*$("#titleChatSend").on(ui.click, function(){
				title.sendMsg(true);
			});*/
			// initial refresh of games
			setTimeout(function(){
				g.keepAlive();
			}, 180000);
		});
	})(),
	updateTimer: 0,
	updatePlayers: function(once){
		clearTimeout(title.updateTimer);
		title.titleUpdate = $("#titleChatPlayers").length; // player is logged in
		if (title.titleUpdate) {
			// see self in lobby upon login
			title.addPlayer(my.account, my.flag, my.rating);
			// title chat loop
			(function repeat(){
				if (isLoggedIn && g.view === 'title'){
					$.ajax({
						type: "POST",
						url: app.url + "php/titleUpdate.php",
						data: {
							channel: my.channel
						}
					}).done(function(data){
						void 0;
						void 0;
						title.updatePlayerCallback(data);
					}).always(function(){
						if (!once){
							title.updateTimer = setTimeout(repeat, 5000);
						}
					});
				}
			})();
		} else {
			// not logged in
			$("#titleChat, #titleMenu").remove();
		}
	},
	updatePlayerCallback: function(data) {
		// set title players
		if (g.view === 'title'){
			if (data.playerData !== undefined){
				var p = data.playerData,
					foundPlayers = [];
				for (var i=0, len=p.length; i<len; i++){
					// add new players
					var account = p[i].account,
						flag = p[i].flag,
						rating = p[i].rating;
					if (!title.players[account]){
						void 0;
						title.addPlayer(account, flag, rating);
					}
					else if (title.players[account].flag !== flag){
						// replace player flag
						var flagElement = document.getElementById("titlePlayerFlag_" + account);
						if (flagElement !== null){
							flagElement.src = 'images/flags/' + flag;
						}
					}
					foundPlayers.push(account);
				}
				// remove missing players
				for (var key in title.players){
					if (foundPlayers.indexOf(key) === -1){
						var x = {
							account: key
						}
						// console.info("REMOVING PLAYER: " + x.account);
						title.removePlayer(x);
					}
				}
			}
			document.getElementById('titleChatHeaderCount').textContent = len !== undefined ? '('+len+')' : '';
			// game data sanity check
			var serverGames = [];
			if (data.gameData !== undefined){
				var p = data.gameData;
				for (var i=0, len=p.length; i<len; i++){
					serverGames[p[i].id] = {
						players: p[i].players * 1,
						max: p[i].max * 1
					}
				}
			}
			// remove games if they're not found in server games
			title.games.forEach(function(e, ind){
				// console.info(serverGames[ind]);
				if (serverGames[ind] === undefined){
					// game timed out, not found
					var o = {
						id: ind
					}
					void 0;
					title.removeGame(o);
				}/*
				else {
					// found game
					if (serverGames[ind].players !== title.games[ind]){
						// player count does not match... fixing
						// console.info("PLAYER COUNT WRONG!");
						var o = {
							id: ind,
							players: serverGames[ind].players,
							max: serverGames[ind].max
						}
						title.setToGame(o);
					}
				}*/
			});
		}
	},
	// adds player to chat room
	addPlayer: function(account, flag, rating){
		void 0;
		title.players[account] = {
			flag: flag
		}
		var e = document.getElementById('titlePlayer' + account);
		if (e !== null){
			e.parentNode.removeChild(e);
		}
		var e = document.createElement('div');
		e.className = "titlePlayer";
		e.id = "titlePlayer" + account;
		e.innerHTML =
			'<img id="titlePlayerFlag_'+ account +'" class="flag" src="images/flags/'+ flag +'">' +
			'<span class="chat-rating">['+ rating +']</span> '+
			'<span class="titlePlayerAccount">'+ account +'</span>';
		if (account && flag && title.titleUpdate){
			DOM.titleChatBody.appendChild(e);
		}
	},
	removePlayer: function(data){
		// fix this
		title.players[data.account] = null;
		var z = document.getElementById('titlePlayer' + data.account);
		if (z !== null){
			z.parentNode.removeChild(z);
		}
	},
	updateGame: function(data){
		void 0;
		if (data.type === 'addToGame'){
			title.addToGame(data);
		} else if (data.type === 'removeFromGame'){
			title.removeFromGame(data);
		} else if (data.type === 'addGame'){
			title.addGame(data);
		} else if (data.type === 'removeGame'){
			title.removeGame(data);
		}
	},
	updatePlayerText: function(id){
		var e = document.getElementById('game_players_' + id);
		if (e !== null){
			e.textContent = title.games[id];
		}
	},
	setToGame: function(data){
		// refreshGames corrects player values
		// console.info("setToGame", data);
		var id = data.id;
		void 0;
		title.games[id] = data.players;
		// title.updatePlayerText(id);
	},
	addToGame: function(data){
		// player joined or left
		//console.info("addToGame", data);
		var id = data.id;
		if (title.games[id] !== undefined){
			if (title.games[id] + 1 > data.max){
				title.games[id] = data.max;
			} else {
				title.games[id]++;
			}
		} else {
			title.games[id] = 1;
		}
		//title.updatePlayerText(id);
	},
	removeFromGame: function(data){
		// player joined or left
		//console.info("removeFromGame", data);
		var id = data.id;
		if (title.games[id] !== undefined){
			if (title.games[id] - 1 < 1){
				title.games[id] = 1;
			} else {
				title.games[id]--;
			}
		} else {
			title.games[id] = 1;
		}
		//title.updatePlayerText(id);
	},
	addGame: function(data){
		// created game
		// console.info("addGame", data);
		title.games[data.id] = 1;
		var e = document.createElement('tr'),
			gameMode = data.gameMode === 'Ranked' ? 'Ranked' : data.gameMode === 'Team' ? 'Team' : 'FFA';
		e.id = 'game_' + data.id;
		e.className = 'shadow4 wars wars-'+ gameMode +' no-select';
		e.setAttribute('data-name', data.name);
		e.innerHTML = 
			"<td class='warCells'>"+ data.name + "</td>\
			<td class='warCells'>" + data.map + "</td>\
			<td class='warCells'>" + gameMode + "</td>";
		DOM.gameTableBody.insertBefore(e, DOM.gameTableBody.childNodes[0]);
	},
	removeGame: function(data){
		// game countdown started or exited
		// console.info("removeGame", data);
		title.games[data.id] = null;
		var e = document.getElementById('game_' + data.id);
		if (e !== null){
			e.parentNode.removeChild(e);
		}
	},
	mapData: {
		AlphaEarth: {
			name: 'Alpha Earth',
			tiles: 143,
			players: 8
		},
		EarthOmega: {
			name: 'Earth Omega',
			tiles: 78,
			players: 6
		},
		/*EarthAlpha: {
			name: 'Earth Alpha',
			tiles: 83,
			players: 8
		},*/
		/*
		FlatEarth: {
			name: 'Flat Earth',
			tiles: 78,
			players: 8
		},*/
		France: {
			name: 'France',
			tiles: 81,
			players: 8
		},
		Germany: {
			name: 'Germany',
			tiles: 499,
			players: 8
		},
		Italy: {
			name: 'Italy',
			tiles: 81,
			players: 8
		},
		Japan: {
			name: "Japan",
			tiles: 47,
			players: 2
		},
		Turkey: {
			name: "Turkey",
			tiles: 75,
			players: 4
		},
		UnitedKingdom: {
			name: "United Kingdom",
			tiles: 69,
			players: 6
		},
		UnitedStates: {
			name: 'United States',
			tiles: 48,
			players: 2
		}
	},
	chatDrag: false,
	chatOn: false,
	scrollBottom: function(){
		if (!title.chatDrag){
			DOM.titleChatLog.scrollTop = DOM.titleChatLog.scrollHeight;
		}
	},
	chat: function (data){
		if (g.view === 'title' && data.message){
			while (DOM.titleChatLog.childNodes.length > 500) {
				DOM.titleChatLog.removeChild(DOM.titleChatLog.firstChild);
			}
			if (data.type === 'inserted-image'){
				(function repeat(count){
					if (++count < 10){
						title.scrollBottom();
						setTimeout(repeat, 200, count);
					}
				})(0);
			}
			var z = document.createElement('div'); 
			if (data.type){
				z.className = data.type;
			}
			z.innerHTML = data.message;
			DOM.titleChatLog.appendChild(z);
			title.scrollBottom();
			/*
			if (!data.skip){
				g.sendNotification(data);
			}
			*/
		}
	},
	friendGet: function(){
		// friend list
		g.friends = [];
		$.ajax({
			type: 'GET',
			url: app.url + 'php/friendGet.php',
		}).done(function(data){
			title.friendGetCallback(data.friends);
		});
	},
	friendGetCallback: function(data) {
		data.forEach(function(friend){
			g.friends.push(friend);
		});
	},
	toggleFriend: function(account){
		account = account.trim();
		if (account !== my.account){
			void 0;
			$.ajax({
				url: app.url + 'php/friendToggle.php',
				data: {
					account: account
				}
			}).done(function(data){
				if (data.action === 'fail'){
					g.chat('You cannot have more than 20 friends!');
				} else if (data.action === 'remove'){
					g.chat('Removed '+ account +' from your friend list');
					title.friendGet();
				} else if (data.action === 'add'){
					g.chat('Added '+ account +' to your friend list');
					title.friendGet();
				}
			});
		} else {
			// cannot add yourself
			g.chat("You can't be friends with yourself!", 'chat-muted');
		}
	},
	listIgnore: function(){
		var len = g.ignore.length;
		g.chat('<div>Ignore List ('+ len +')</div>');
		for (var i=0; i<len; i++){
			var str = '<div><span class="chat-muted titlePlayerAccount">' + g.ignore[i] +'</span></div>';
			g.chat(str);
		}
	},
	addIgnore: function(account){
		account = account.toLowerCase().trim();
		g.chat('<div>Ignoring '+ account +'</div>');
		if (g.ignore.indexOf(account) === -1 && account){
			if (g.ignore.length < 20){
				if (account !== my.account){
					g.ignore.push(account);
					localStorage.setItem('ignore', JSON.stringify(g.ignore));
					g.chat('Now ignoring account: ' + account, 'chat-muted');
				} else {
					g.chat("<div>You can't ignore yourself!</div><img src='"+ app.url +"images/chat/random/autism.jpg'>", 'chat-muted');
				}
			} else {
				g.chat('You cannot ignore more than 20 accounts!', 'chat-muted');
			}
		} else {
			g.chat('Already ignoring ' + account +'!', 'chat-muted');
		}
	},
	removeIgnore: function(account){
		account = account.toLowerCase().trim();
		if (account && g.ignore.indexOf(account) > -1){
			// found account
			var index = g.ignore.indexOf(account);
			g.ignore.splice(index, 1);
			localStorage.setItem('ignore', JSON.stringify(g.ignore));
			g.chat('Stopped ignoring account: ' + account, 'chat-muted');
		} else {
			g.chat(account + ' is not on your ignore list.', 'chat-muted');
		}
	},
	chatReceive: function(data){
		if (g.view === 'title'){
			// title
			if (data.type === 'remove'){
				title.removePlayer(data);
			} else if (data.type === 'add'){
				title.addPlayer(data.account, data.flag, data.rating);
			} else {
				if (data.message !== undefined){
					title.chat(data);
				}
			}
		} else if (g.view === 'lobby'){
			// lobby
			//console.info('lobby receive: ', data);
			if (data.type === 'hostLeft'){
				lobby.hostLeft();
			} else if (data.type === 'lobby-set-cpu-difficulty'){
				lobby.updateDifficulty(data);
			} else if (data.type === 'updateGovernment'){
				lobby.updateGovernment(data);
			} else if (data.type === 'updatePlayerColor'){
				lobby.updatePlayerColor(data);
			} else if (data.type === 'updateTeamNumber'){
				lobby.updateTeamNumber(data);
			} else if (data.type === 'countdown'){
				lobby.countdown(data);
			} else if (data.type === 'updateLobbyPlayer'){
				lobby.updatePlayer(data);
			} else if (data.type === 'updateLobbyCPU') {
				lobby.updateCPU(data);
			} else if (data.type === 'loadGameState'){
				my.player !== 1 && loadGameState();
			} else {
				if (data.message !== undefined){
					lobby.chat(data);
				}
			}
		}
		else {
			// game
			// console.info('game receive: ', data);
			if (data.type === 'cannons'){
				animate.cannons(data.attackerTile, data.tile, true);
				game.updateTile(data);
			} else if (data.type === 'missile'){
				animate.missile(data.attacker, data.defender, true);
			} else if (data.type === 'nuke'){
				setTimeout(function(){
					animate.nuke(data.tile, data.attacker);
				}, 5000);
			} else if (data.type === 'nukeHit'){
				game.updateTile(data);
				game.updateDefense(data);
			} else if (data.type === 'gunfire'){
				// defender tile update
				var volume = data.player === my.player || data.playerB === my.player ?
					.7 : .2;
				animate.gunfire(data.attackerTile, data.tile, volume);
				game.updateTile(data);
				if (data.rewardUnits){
					animate.upgrade(data.tile, 'troops', data.rewardUnits);
				}
			}
			else if (data.type === 'updateTile'){
				// attacker tile update 
				game.updateTile(data);
				game.setSumValues();
				if (data.rewardUnits){
					animate.upgrade(data.tile, 'troops', data.rewardUnits);
				}
				if (data.sfx === 'sniper0'){
					animate.upgrade(data.tile, 'culture');
				}
			}
			else if (data.type === 'democracy-units') {
				my.player === data.player && action.democracyUnits();
			}
			else if (data.type === 'food'){
				if (data.account.indexOf(my.account) > -1){
					audio.play('hup2');
				}
			}
			else if (data.type === 'upgrade'){
				// fetch updated tile defense data
				game.updateDefense(data);
				animate.upgrade(data.tile, 'shield');
			}
			else if (data.type === 'eliminated'){
				game.eliminatePlayer(data);
			}
			else if (data.type === 'endTurnCheck'){
				game.triggerNextTurn(data);
			}
			else if (data.type === 'disconnect'){
				game.eliminatePlayer(data);
			}
			
			if (data.message){
				if (data.type === 'gunfire'){
					// ? when I'm attacked?
					if (data.defender === my.account){
						// display msg?
						game.chat(data);
					}
					// lost attack
				} else {
					game.chat(data);
				}
			}
			if (data.sfx){
				audio.play(data.sfx);
			}
		}
	},
	sendWhisper: function(msg, splitter){
		// account
		var msg = msg.split(splitter),
			msg = msg[1].split(" "),
			account = msg.shift();
		void 0;
		$.ajax({
			url: app.url + 'php/insertWhisper.php',
			data: {
				account: account,
				flag: my.flag,
				playerColor: my.playerColor,
				message: msg[0],
				action: 'send'
			}
		});
	},
	lastWhisper: {
		account: '',
		message: '',
		timestamp: 0
	},
	receiveWhisper: function(data){
		//console.info('receiveWhisper ', data);
		if (g.view === 'title'){
			title.chat(data);
		} else if (g.view === 'lobby'){
			lobby.chat(data);
		} else {
			game.chat(data);
		}
	},
	changeChannel: function(msg, splitter){
		var arr = msg.split(splitter);
		socket.setChannel(arr[1]);
	},
	who: function(msg){
		var a = msg.split("/who ");
		$.ajax({
			url: app.url + 'php/whoUser.php',
			data: {
				account: a[1]
			}
		}).done(function(data){
			function getRibbonStr(){
				var str = '';
				if (data.ribbons !== undefined){
					data.ribbons.reverse();
					var i = 0,
						len = data.ribbons.length,
						z;

					if (len){
						str += '<div class="ribbon-wrap">';
						for (; i<len; i++){
							z = data.ribbons[i];
							str += '<img class="pointer ribbon" data-ribbon="'+ z +'" src="images/ribbons/ribbon'+ z +'.jpg">';
						}
						str += '</div>';
					}
				}
				return str;
			}
			
			var str = 
			'<div class="who-wrap">'+
				'<div class="who-wrap-left">';
				// left col
				str += data.str;
				if (data.account !== my.account && g.friends.indexOf(data.account) === -1){
					str += '<button style="pointer-events: initial" class="addFriend btn btn-xs fwBlue" data-account="'+ data.account +'">Add Friend</button>';
				}
			str += 
				'</div>'+
				'<div class="who-wrap-right">';
				// right col
				str += getRibbonStr() +
				'</div>'+
			'</div>';
			g.chat(str);
		}).fail(function(){
			g.chat('No data found.');
		});
	},
	help: function(){
		var a = [
			'<div class="chat-warning">Chat Commands:</div>',
			'<div>#channel: join channel</div>',
			'<div>@account: whisper user</div>',
			'<div>/ignore account: ignore account</div>',
			'<div>/unignore account: stop ignoring account</div>',
			'<div>/friend account: add/remove friend</div>',
			'<div>/who account: check account info (or click account name)</div>'
		];
		a.forEach(function(v) {
			title.chat({
				message: v,
				type: 'chat-muted'
			});
		});
	},
	broadcast: function(msg){
		$.ajax({
			url: app.url + 'php/insertBroadcast.php',
			data: {
				message: msg
			}
		});
	},
	closeApp: function(){
		$.ajax({
			type: 'GET',
			url: app.url + 'php/close-app.php'
		}).done(function() {
			void 0;
		});
	},
	url: function(url){
		$.ajax({
			url: app.url + 'php/insertUrl.php',
			data: {
				url: url
			}
		});
	},
	img: function(url){
		$.ajax({
			url: app.url + 'php/insertImg.php',
			data: {
				url: url
			}
		});
	},
	video: function(url){
		$.ajax({
			url: app.url + 'php/insertVideo.php',
			data: {
				url: url
			}
		});
	},
	fwpaid: function(msg){
		$.ajax({
			url: app.url + 'php/fwpaid.php',
			data: {
				message: msg
			}
		});
	},
	addRibbon: function(account, ribbon){
		$.ajax({
			url: app.url + 'php/fw-add-ribbon.php',
			data: {
				account: account,
				ribbon: ribbon
			}
		});
	},
	sendMsg: function(bypass){
		var msg = $DOM.titleChatInput.val().trim();
		// bypass via ENTER or chat has focus
		if (bypass || title.chatOn){
			if (msg){
				// is it a command?
				if (msg === '/friend'){
					title.listFriends();
				}
				else if (msg.indexOf('/friend ') === 0){
					title.toggleFriend(msg.slice(8));
				}
				else if (msg.indexOf('/unignore ') === 0){
					var account = msg.slice(10);
					title.removeIgnore(account);
				}
				else if (msg === '/ignore'){
					title.listIgnore();
				}
				else if (msg.indexOf('/ignore ') === 0){
					var account = msg.slice(8);
					title.addIgnore(account);
				}
				else if (msg.indexOf('/join ') === 0){
					title.changeChannel(msg, '/join ');
				}
				else if (msg.indexOf('#') === 0){
					title.changeChannel(msg, '#');
				}
				else if (msg.indexOf('/j ') === 0){
					title.changeChannel(msg, '/j ');
				}
				else if (msg.indexOf('@') === 0){
					title.sendWhisper(msg , '@');
				}
				else if (msg.indexOf('/who ') === 0){
					title.who(msg);
				}
				else if (msg.indexOf('/broadcast ') === 0){
					title.broadcast(msg);
				}
				else if (msg.indexOf('/closeApp') === 0){
					title.closeApp();
				}
				else if (msg.indexOf('/url ') === 0){
					title.url(msg);
				}
				else if (msg.indexOf('/img ') === 0){
					title.img(msg);
				}
				else if (msg.indexOf('/video ') === 0){
					title.video(msg);
				}
				else if (msg.indexOf('/fw-paid ') === 0){
					var account = msg.slice(8);
					title.fwpaid(account);
				}
				else if (msg.indexOf('/fw-add-ribbon ') === 0){
					var a = msg.split(" "),
						account = a[1],
						ribbon = a[2];
					title.addRibbon(account, ribbon);
				}
				else {
					if (msg.charAt(0) === '/' && msg.indexOf('/me') !== 0 || msg === '/me'){
						// skip
					}
					else {
						$.ajax({
							url: app.url + 'php/insertTitleChat.php',
							data: {
								message: msg
							}
						});
					}
				}
			}
			$DOM.titleChatInput.val('');
		}
	},
	listFriendsThrottle: 0,
	listFriends: function(){
		if (Date.now() - title.listFriendsThrottle < 5000) return;
		title.listFriendsThrottle = Date.now();
		var len = g.friends.length;
		g.chat('<div>Checking friends list...</div>');
		if (g.friends.length){
			$.ajax({
				url: app.url + 'php/friendStatus.php',
				data: {
					friends: g.friends
				}
			}).done(function(data){
				var str = '<div>Friend List ('+ len +')</div>';
				g.chat(str);
				for (var i=0; i<len; i++){
					var str = '',
						index = data.players.indexOf(g.friends[i]);
					if (index > -1){
						// online
						str += '<div><span class="chat-online titlePlayerAccount">' + g.friends[i] + '</span>';
						if (typeof data.locations[index] === 'number'){
							str += ' playing in game: ' + data.locations[index];
						} else {
							str += ' in chat channel: ';
							if (g.view === 'title'){
								// enable clicking to change channel
								str += '<span class="chat-online chat-join">' + data.locations[index] + '</span>';
							} else {
								// not in a game ?
								str += data.locations[index];
							}
						}
						void 0;
						str += '</div>';
						g.chat(str);
					} else {
						// offline
						void 0;
						g.chat('<div><span class="chat-muted titlePlayerAccount">' + g.friends[i] +'</span></div>');
					}
				}
			});
		} else {
			g.chat("<div>You don't have any friends! Use /friend account to add a new friend.</div>", 'chat-muted');
		}
		$("#title-chat-input").focus();
	},
	showBackdrop: function(e){
		TweenMax.to('#titleViewBackdrop', .3, {
			startAt: {
				visibility: 'visible',
				alpha: 0
			},
			alpha: 1,
			onComplete: function(){
				if (e !== undefined){
					e.focus();
				}
			}
		});
		g.isModalOpen = true;
		var filter = {
			blur: 0
		};
		TweenMax.to(filter, .3, {
			blur: 3,
			onUpdate: function() {
				animate.blur('#mainWrap, #gameWrap', filter.blur);
			}
		});
	},
	toggleModal: function() {
		if (g.isModalOpen) {
			title.closeModal();
		}
		else {
			title.showModal();
		}
	},
	showModal: function() {
		TweenMax.to("#optionsModal", g.modalSpeed, {
			startAt: {
				visibility: 'visible',
				y: 0,
				alpha: 0
			},
			y: 30,
			alpha: 1
		});
		title.showBackdrop();
		var filter = {
			blur: 0
		};
		TweenMax.to(filter, .3, {
			blur: 3,
			onUpdate: function() {
				animate.blur('#mainWrap, #gameWrap', filter.blur);
			}
		});
	},
	closeModal: function(){
		TweenMax.set('.title-modals, #titleViewBackdrop', {
			alpha: 0,
			visibility: 'hidden'
		});
		g.isModalOpen = false;
		var filter = {
			blur: 3
		};
		TweenMax.to(filter, .3, {
			blur: 0,
			onUpdate: function() {
				animate.blur('#mainWrap, #gameWrap', filter.blur);
			}
		});
	},
	exitGame: function() {
		// exit from app
		title.closeGame();
		nw.App.closeAllWindows();
	},
	closeGame: function() {
		if (app.isApp) {
			var gui = require('nw.gui');
			// do things I should do before leaving the game
			my.account && socket.removePlayer(my.account);
			if (g.view === 'lobby') {
				exitGame();
			}
			else if (g.view === 'game') {
				surrender();
			}
		}
	},
	addCpu: 0,
	createGameFocus: false,
	createGame: function(){
		var name = $("#gameName").val(),
			pw = $("#gamePassword").val(),
			max = $("#gamePlayers").val() * 1,
			speed = g.speed;
			
		if (!g.rankedMode && (name.length < 4 || name.length > 32)){
			g.msg(lang[my.lang].badGameName, 1);
			setTimeout(function(){
				$("#gameName").focus().select();
			}, 100);
		} else if (!g.rankedMode && (max < 2 || max > 8 || max % 1 !== 0)){
			g.msg(lang[my.lang].notEnoughPlayers, 1);
		} else {
			title.createGameService(
				name,
				pw,
				title.mapData[g.map.key].name,
				max,
				g.rankedMode,
				g.teamMode,
				speed
			);
		}
	},
	openWindow: function(href) {
		if (app.isApp) {
			/*var gui = require('nw.gui'),
				win = gui.Window.open(href, {
					position: 'center',
					width: 1280,
					height: 720
				});*/
		}
	},
	configureNation: function() {
		TweenMax.to('#configureNation', g.modalSpeed, {
			startAt: {
				visibility: 'visible',
				y: 0,
				alpha: 0
			},
			y: 30,
			alpha: 1,
			onComplete: function() {
				title.setFlagDropdown();
			}
		});
		title.showBackdrop();
	},
	setFlagDropdown: function(id, random) {
		// populate dropdown
		id = id || 'flagDropdown';
		var s = "";
		if (random) {
			s += '<li class="flex-row flagSelect">'+
					'<a class="flex-1 no-select" data-flag="Random">'+ lang[my.lang].random +'</a>'+
				'</li>';
		}
		for (var key in g.flagData){
			s += "<li class='dropdown-header shadow4'>" + g.flagData[key].group + "</li>";
			g.flagData[key].name.forEach(function(e){
				s += "<li class='flex-row flagSelect'>" +
						"<img class='flag' src='images/flags/"+ e + ui.getFlagExt(e) +"'>" +
						"<a class='flex-1 no-select flag-name' data-flag='"+ e +"'>" + e + "</a>" +
					"</li>";
			});
		}
		$('#'+ id).html(s);
	},
	createGameService: function(name, pw, map, max, rankedMode, teamMode, speed){
		g.lock(1);
		g.rankedMode = rankedMode;
		g.teamMode = teamMode;
		// g.speed = speed;
		$.ajax({
			url: app.url + 'php/createGame.php',
			data: {
				name: name,
				pw: pw,
				map: map,
				max: max,
				rating: rankedMode,
				teamMode: teamMode,
				speed: speed
			}
		}).done(function(data) {
			socket.removePlayer(my.account);
			my.player = data.player;
			my.playerColor = data.playerColor;
			my.team = data.team;
			game.id = data.gameId;
			game.name = data.gameName;
			// console.info("Creating: ", data);
			lobby.init(data);
			lobby.join(); // create
			socket.joinGame();
			lobby.styleStartGame();
		}).fail(function(e){
			g.msg(e.statusText);
			g.unlock(1);
		});
	},
	joinGame: function(){
		g.name = $("#joinGame").val();
		if (!g.name){
			g.msg(lang[my.lang].gameNameNotValid, 1.5);
			$("#joinGame").focus().select();
			return;
		}
		g.password = $("#joinGamePassword").val();
		g.lock();
		audio.play('click');
		$.ajax({
			url: app.url + 'php/joinGame.php',
			data: {
				name: g.name,
				password: g.password
			}
		}).done(function(data){
			title.joinGameCallback(data);
		}).fail(function(data){
			void 0;
			g.msg(data.statusText, 1.5);
		}).always(function(){
			g.unlock();
		});
	},
	joinGameCallback: function(data){
		socket.removePlayer(my.account);
		// console.info(data);
		my.player = data.player;
		my.playerColor = data.player;
		g.teamMode = data.teamMode;
		g.rankedMode = data.rankedMode;
		my.team = data.team;
		game.id = data.id;
		game.name = data.gameName;
		g.map = data.mapData;
		// g.speed = data.speed;
		void 0;
		lobby.init(data);
		lobby.join(); // normal join
		//$("#titleMenu, #titleChat").remove();
		socket.joinGame();
	},
	submitNationName: function(){
		var x = $("#updateNationName").val();
		g.lock();
		audio.play('click');
		$.ajax({
			url: app.url + 'php/updateNationName.php',
			data: {
				name: x
			}
		}).done(function(name) {
			g.msg(lang[my.lang].newNationName + name);
			$("#updateNationName").val(name);
		}).fail(function(e){
			g.msg(e.statusText);
		}).always(function(){
			g.unlock();
		});
	}
};
(function(){
	var str = '';
	for (var key in title.mapData){
		str += "<li><a class='mapSelect' href='#'>" + title.mapData[key].name + "</a></li>";
	}
	var e1 = document.getElementById('mapDropdown');
	if (e1 !== null){
		e1.innerHTML = str;
	}
	if (isLoggedIn){
		$('[title]').tooltip({
			animation: false
		});
	}
})();
// lobby.js
var lobby = {
	cpuFlag: 'Random',
	data: [
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' }, 
		{ account: '' },
		{ account: '' }
	],
	startClassOn:  "btn btn-md btn-block btn-responsive shadow4 lobbyButtons",
	startClassOff: "btn btn-md btn-block btn-responsive shadow4 lobbyButtons",
	totalPlayers: function(){
		var count = 0;
		for (var i=0, len=lobby.data.length; i<len; i++){
			if (lobby.data[i].account){
				count++;
			}
		}
		return count;
	},
	addCpuPlayer: function(){
		var flag = lobby.cpuFlag === 'Random' ?
			g.getRandomFlag() : lobby.cpuFlag + ui.getFlagExt(lobby.cpuFlag)
		$.ajax({
			url: app.url +'php/cpu-add-player.php',
			data: {
				flag: flag
			}
		});
	},
	updateGovernmentWindow: function(government){ // key value in
		if (g.view === 'game') return;
		// updates government description
		var str = '';
		void 0;
		if (government === 'Random') {
			document.getElementById('lobbyGovernment' + my.player).innerHTML = lang[my.lang].governments[government];
			document.getElementById('lobbyGovernmentDescription').innerHTML =
				'<div id="lobbyGovName" class="text-primary">Random</div>'+
				'<div id="lobbyGovPerks">'+
					'<div>???</div>'+
					'<div>???</div>'+
					'<div>???</div>'+
					'<div>???</div>'+
				'</div>';
		}
		else {
			str =
			'<div id="lobbyGovName" class="text-primary">' +
				'<img src="images/icons/'+ government +'.png" '+
				'class="fw-icon-sm">'+ lang[my.lang].governments[government] +
			'</div>';
			// perks
			str += '<div id="lobbyGovPerks">';
			// console.warn('lang[my.lang][government]', lang[my.lang][government]);
			for (var key in lang[my.lang][government]) {
				str += '<div>' + lang[my.lang][government][key] + '</div>';
			}
			str += '</div>';

			document.getElementById('lobbyGovernment' + my.player).innerHTML =
				'<img src="images/icons/'+ government +'.png" class="fw-icon-sm">' + lang[my.lang].governments[government];
			document.getElementById('lobbyGovernmentDescription').innerHTML = str;
		}
	},
	chat: function (data){
		while (DOM.lobbyChatLog.childNodes.length > 200) {
			DOM.lobbyChatLog.removeChild(DOM.lobbyChatLog.firstChild);
		}
		var z = document.createElement('div');
		if (data.type){
			z.className = data.type;
		}
		z.innerHTML = data.message;
		DOM.lobbyChatLog.appendChild(z);
		if (!lobby.chatDrag){
			DOM.lobbyChatLog.scrollTop = DOM.lobbyChatLog.scrollHeight;
		}
		// g.sendNotification(data.message);
	},
	chatDrag: false,
	gameStarted: false,
	chatOn: false,
	sendMsg: function(bypass){
		var msg = $DOM.lobbyChatInput.val().trim();
		if (bypass || lobby.chatOn){
			// bypass via ENTER or chat has focus
			if (msg){
				// is it a command?
				if (msg === '/friend'){
					title.listFriends();
				}
				else if (msg.indexOf('/friend ') === 0){
					title.toggleFriend(msg.slice(8));
				}
				else if (msg.indexOf('/unignore ') === 0){
					var account = msg.slice(10);
					title.removeIgnore(account);
				}
				else if (msg === '/ignore'){
					title.listIgnore();
				}
				else if (msg.indexOf('/ignore ') === 0){
					var account = msg.slice(8);
					title.addIgnore(account);
				}
				else if (msg.indexOf('@') === 0){
					title.sendWhisper(msg , '@');
				}
				else if (msg.indexOf('/who ') === 0){
					title.who(msg);
				}
				else {
					// send ajax chat msg
					if (msg.charAt(0) === '/' && msg.indexOf('/me') !== 0){
						// skip
					} else {
						$.ajax({
							url: app.url +'php/insertLobbyChat.php',
							data: {
								message: msg
							}
						});
					}
				}
			}
			$DOM.lobbyChatInput.val('');
		}
	},
	init: function(x){
		// build the lobby DOM
		if (lobby.initialized) return;
		document.getElementById('lobbyChatLog').innerHTML = lang[my.lang].youHaveJoined + x.name;
		lobby.sendMsg();
		var e1 = document.getElementById("lobbyGameName");
		if (e1 !== null){
			if (x.rating){
				document.getElementById('lobbyRankedMatch').style.display = 'block';
				document.getElementById('lobbyGameNameWrap').style.display = 'none';
			}
			e1.innerHTML = x.name;
			document.getElementById('lobbyGameMode').textContent = x.gameMode;
			if (x.password){
				document.getElementById('lobbyGamePasswordWrap').style.display = 'block';
				document.getElementById('lobbyGamePassword').innerHTML = x.password;
			}
			document.getElementById("lobbyGameMap").innerHTML = x.map;
			document.getElementById("lobbyGameMax").innerHTML = x.max;
			document.getElementById("startGame").style.display = x.player === 1 ? "block" : "none";
			if (!x.startGame){
				document.getElementById('mainWrap').style.display = "flex";
			}
			var str = '<div id="lobbyWrap">';
			for (var i=1; i<=8; i++){
				str += 
				'<div id="lobbyRow' +i+ '" class="lobbyRow">\
					<div class="lobby-row-col-1">\
						<img id="lobbyFlag' +i+ '" class="lobbyFlags block center no-select" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=">\
					</div>\
					<div class="lobby-row-col-2 lobbyDetails">\
						<div class="lobbyAccounts">';
						
							if (g.teamMode){
								// yes, the span is necessary to group the dropdown
								str += '<span><div id="lobbyTeam'+ i +'" data-placement="right" class="lobbyTeams dropdown-toggle pointer2" data-toggle="dropdown">';
								
								str += '<i class="fa fa-flag pointer2 lobbyTeamFlag"></i> <span id="lobbyTeamNumber'+ i +'" class="lobbyTeamNumbers">' + i +'</span></div>';
								str +=
								'<ul id="teamDropdown" class="dropdown-menu">\
									<li class="header text-center selectTeamHeader">'+ lang[my.lang].team +'</li>';
									for (var j=1; j<=8; j++){
										str += '<li class="teamChoice" data-player="'+ i +'">'+ lang[my.lang].team +' '+ j +'</li>';
									}
								str += '</ul></span>';
							}
							// square
							str += '<span><i id="lobbyPlayerColor'+ i +'" class="fa fa-square player'+ i +' lobbyPlayer dropdown-toggle';
							
							if (i === my.player){
								str += ' pointer2';
							}
							
							str += '" data-placement="right" data-toggle="dropdown"></i>';
							
							if (i === my.player){
								str += 
								'<ul id="teamColorDropdown" class="dropdown-menu">\
									<li class="header text-center selectTeamHeader">'+ lang[my.lang].playerColor +'</li>' +
									'<li id="team-color-flex">';
								for (var j=1; j<=20; j++){
									str += '<div class="pbar'+ j +' playerColorChoice" data-playercolor="'+ j +'"></div>';
								}
								str += '</li></ul></span>';
							}
							
							str += '<span id="lobbyAccountName'+ i +'" class="lobbyAccountName chat-warning"></span>\
						</div>\
						<div id="lobbyName' +i+ '" class="lobbyNames nowrap"></div>\
					</div>\
					<div class="lobby-row-col-3">';
					if (i === x.player){
						// my.player === i || data.cpu && my.player === 1
						// me - gov dropdown
						str += 
						'<div id="gov-dropdown-player'+ i +'" class="dropdown govDropdown">\
							<button class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton" type="button" data-toggle="dropdown">\
								<span id="lobbyGovernment' +i+ '">'+ lang[my.lang].governments.Despotism +'</span>\
								<i id="lobbyCaret' +i+ '" class="fa fa-caret-down text-warning lobbyCaret"></i>\
							</button>\
							<ul class="governmentDropdown dropdown-menu no-select">';
								for (var key in lang[my.lang].governments) {
									str +=
									'<li class="governmentChoice" data-government="'+ key +'">'+
										'<a>'+ lang[my.lang].governments[key] +'</a>'+
									'</li>';
								}
							str += '</ul>\
						</div>' + 
						lobby.getCpuDropdown(i);
					}
					else {
						// not me - gov dropdown
						str += 
						'<div id="gov-dropdown-player'+ i +'" class="dropdown govDropdown">\
							<button style="cursor: default" class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton fwDropdownButtonEnemy" type="button">\
								<span id="lobbyGovernment' +i+ '" class="pull-left">'+ lang[my.lang].governments.Despotism +'</span>\
								<i id="lobbyCaret' +i+ '" class="fa fa-caret-down text-disabled lobbyCaret"></i>\
							</button>\
						</div>' + 
						lobby.getCpuDropdown(i);
					}
					str += '</div>\
					</div>';
			}
			str += '</div>';
			if (my.player === 1 && !g.rankedMode){
				str +=
				'<div id="lobby-cpu-row" class="buffer2">\
					<span id="selectCpuFlag" class="dropdown">\
						<button id="cpuSelectWrap" class="btn dropdown-toggle shadow4 fwDropdownButton" \type="button" data-toggle="dropdown">\
							<span id="cpuFlag"></span>\
							<i class="fa fa-caret-down text-warning flex-caret"></i>\
						</button>\
						<ul id="cpuFlagDropdown" class="dropdown-menu fwDropdown"></ul>\
					</span>\
					<button id="cpu-add-player" type="button" class="btn fwBlue btn-responsive shadow4 cpu-button">\
						<img src="images/icons/computer.png" class="fw-icon-sm">'+ lang[my.lang].addCPU +'\
					</button>\
					<button id="cpu-remove-player" type="button" class="btn fwBlue btn-responsive shadow4 cpu-button">\
						<img src="images/icons/computer.png" class="fw-icon-sm">'+ lang[my.lang].removeCPU +'\
					</button>\
				</div>';
			}
			document.getElementById("lobbyPlayers").innerHTML = str;
			// default setting
			$('#cpuFlag').html(lang[my.lang].random);
			title.setFlagDropdown('cpuFlagDropdown', 1);
			lobby.updateGovernmentWindow(my.government);
		}
	},
	initialized: 0,
	getCpuDropdown: function(player){
		var str = 
		'<div id="gov-dropdown-cpu'+ player +'" class="dropdown govDropdown none">\
			<button class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton" type="button" data-toggle="dropdown">\
				<img src="images/icons/computer.png" class="fw-icon-sm">\
				<span id="lobby-difficulty-cpu'+ player +'">'+ lang[my.lang].difficulties['Very Easy'] +'</span>\
				<i id="lobby-caret-cpu'+ player +'" class="fa fa-caret-down text-warning lobbyCaret"></i>\
			</button>\
			<ul class="governmentDropdown dropdown-menu no-select">';
				for (var key in lang[my.lang].difficulties){
					str += 
					'<li class="cpu-choice" data-player="'+ player +'" data-difficulty="'+ key +'">'+
						'<a>'+ lang[my.lang].difficulties[key] +'</a>'+
					'</li>';
				}
			str += '</ul>\
		</div>';
		return str;
	},
	join: function(d){
		// transition to game lobby
		if (d === undefined){
			d = .5;
		}
		g.lock(1);
		g.view = "lobby";
		title.closeModal();
		TweenMax.to('header', d, {
			y: '-200%',
			ease: Quad.easeIn
		});
		TweenMax.to('#titleChat', d, {
			x: '100%',
			ease: Quad.easeIn
		});
		document.getElementById('lobbyFirmamentWarsLogo').src = 'images/title/firmament-wars-logo-1280.png';
		document.getElementById('worldTitle').src = 'images/FlatWorld90.jpg';
		
		TweenMax.to('#titleMenu', d, {
			x: '-100%',
			ease: Quad.easeIn,
			onComplete: function(){
				TweenMax.to(['#titleMain', '#logoWrap', '#firmamentWarsLogoWrap'], .5, {
					alpha: 0,
					onComplete: function(){
						$("#titleMain, #title-bg-wrap").remove();
						g.unlock(1);
						TweenMax.fromTo('#joinGameLobby', d, {
							autoAlpha: 0
						}, {
							autoAlpha: 1
						});
						// add cpu automatically in Play Now
						title.addCpu && lobby.addCpuPlayer();
						title.addCpu = 0;
					}
				});
			}
		});
		if (!d){
			// load game
			//console.info(localStorage.getItem('reload'));
			if (localStorage.getItem('reload') !== false){
				setTimeout(loadGameState, 100); // page refresh
			}
		} else {
			// load lobby
			(function repeat(){
				if (g.view === "lobby"){
					var pingCpu = 0;
					if (my.player === 1){
						lobby.data.forEach(function(d){
							if (d.cpu){
								pingCpu = 1;
							}
						});
					}
					//console.info('pingCpu ', pingCpu);
					$.ajax({
						url: app.url +"php/updateLobby.php",
						data: {
							pingCpu: pingCpu
						}
					}).done(function(x){
						if (g.view === "lobby"){
							localStorage.setItem('reload', true);
							// reality check of presence data every 5 seconds
							var hostFound = false
							for (var i=1; i<=8; i++){
								var data = x.playerData[i];
								if (data !== undefined){
									// server defined
									if (data.account !== lobby.data[i].account){
										lobby.updatePlayer(data);
									}
									// check if host
									if (data.gameHost === 1){
										hostFound = true;
									}
								} else {
									// not defined on server
									if (lobby.data[i].account){
										var o = {
											message: lobby.data[i].account + " has disconnected",
											type: 'chat-warning'
										};
										lobby.chat(o)
										var o = {
											player: i
										}
										lobby.updatePlayer(o);
									}
								}
							}
							// make sure host didn't disconnect
							if (!hostFound){
								lobby.hostLeft();
							}
							setTimeout(repeat, 5000);
						}
					}).fail(function(data){
						serverError(data);
					});
				}
			})();
		}
	},
	hostLeft: function(){
		setTimeout(function(){
			g.msg(lang[my.lang].hostLeft);
			setTimeout(function(){
				exitGame(true);
			}, 1000);
		}, 500);
	},
	// add/remove players from lobby
	updatePlayer: function(data){
		var i = data.player;
		if (data.account !== undefined){
			// add
			//console.info("ADD PLAYER: ", data);
			document.getElementById("lobbyRow" + i).style.display = 'flex';
			// different player account
			document.getElementById("lobbyAccountName" + i).innerHTML = data.cpu ?
				'Computer' : data.account;
			// nation name
			if (data.cpu) {
				data.nation = data.nation.split('.')[0];
			}
			document.getElementById("lobbyName" + i).innerHTML = data.nation;
			var flag = data.flag.split('.')[0];
			document.getElementById("lobbyFlag" + i).src =
				'images/flags/'+ flag + ui.getFlagExt(flag);

			if (my.player === i){
				if (isLoggedIn){
					$("#lobbyPlayerColor" + i).attr('title', lang[my.lang].selectPlayerColor)
						.tooltip({
							container: 'body',
							animation: false
						});
					$("#lobbyTeam" + i).attr('title', lang[my.lang].selectTeam)
						.tooltip({
							container: 'body',
							animation: false
						});
				}
			}
			void 0;
			lobby.updateGovernment(data);
			lobby.data[i] = data;
			lobby.updatePlayerColor(data);
			document.getElementById('lobbyGovernment'+ i).innerHTML = data.cpu ?
				('<img src="images/icons/computer.png" class="fw-icon-sm">'+ data.difficulty) : '<img src="images/icons/Despotism.png" class="fw-icon-sm">'+ lang[my.lang].governments.Despotism;
			
			$("#lobbyCaret"+ i)
				.removeClass("text-warning text-disabled")
				.addClass(my.player === i || data.cpu && my.player === 1 ? 'text-warning' : 'text-disabled');
			
			document.getElementById('gov-dropdown-player'+ data.player).style.display = 
				data.cpu ? 'none' : 'block';
			document.getElementById('gov-dropdown-cpu'+ data.player).style.display = 
				data.cpu ? 'block' : 'none';
		}
		else {
			// remove
			//console.info("REMOVE PLAYER: ", data);
			document.getElementById("lobbyRow" + i).style.display = 'none';
			document.getElementById('lobby-difficulty-cpu' + i).innerHTML = lang[my.lang].difficulties['Very Easy'];
			lobby.data[i] = { account: '', cpu: 0 };
		}
		lobby.styleStartGame();
	},
	// update player's team number
	updateTeamNumber: function(data){
		//console.info("UPDATE TEAM NUMBER: ", data);
		var i = data.player;
		var e = document.getElementById('lobbyTeamNumber' + i);
		if (e !== null){
			e.textContent = data.team;
		}
	},
	// update player's color only
	updatePlayerColor: function(data){
		//console.info("UPDATE PLAYER COLOR ", data);
		var i = data.player;
		var str = my.player === i ? 
			'fa fa-square lobbyPlayer dropdown-toggle pointer2 player' + data.playerColor :
			'fa fa-square lobbyPlayer dropdown-toggle player' + data.playerColor;
		$("#lobbyPlayerColor" + i).removeClass()
			.addClass(str)
			.data('playerColor', data.playerColor);
		lobby.data[i].playerColor = data.playerColor;
	},
	// update player's government only
	updateGovernment: function(data){
		// update button & window
		var i = data.player;
		void 0;
		document.getElementById('lobbyGovernment' + i).innerHTML =
			data.government === 'Random' ?
				lang[my.lang].governments[data.government] :
				'<img src="images/icons/'+ data.government +'.png" class="fw-icon-sm">' + lang[my.lang].governments[data.government];
		lobby.data[i].government = lang[my.lang].governments[data.government];
	},
	updateDifficulty: function(data){
		var i = data.player;
		void 0;
		$('#lobby-difficulty-cpu' + i).html(lang[my.lang].difficulties[data.difficulty]);
		lobby.data[i].difficulty = data.difficulty;
	},
	styleStartGame: function(){
		if (my.player === 1){
			// set start game button
			if (lobby.totalPlayers() === 1){
				startGame.className = lobby.startClassOff;
			} else {
				startGame.className = lobby.startClassOn;
			}
		}
	},
	countdown: function(data){
		socket.unsubscribe('title:refreshGames');
		// still in the lobby?
		if (!lobby.gameStarted){
			$("#lobby-cpu-row").remove();
			lobby.gameStarted = true;
			new Audio('sound/beepHi.mp3');
			// normal countdown
			countdown.style.display = 'block';
			(function repeating(secondsToStart){
				countdown.textContent = lang[my.lang].startingGame + secondsToStart--;
				if (secondsToStart >= 0){
					audio.play('beep');
					setTimeout(repeating, 1000, secondsToStart);
				}
				else {
					audio.play('beepHi');
					audio.load.game();
					video.load.game();
				}
				if (secondsToStart === 1){
					TweenMax.to('#mainWrap', 1.5, {
						delay: 1,
						alpha: 0,
						ease: Linear.easeNone,
						onComplete: function(){
							my.player === 1 && loadGameState();
						}
					});
					audio.fade();
				}
			})(5);
			cancelGame.style.display = 'none';
			$("#teamDropdown").css('display', 'none');
		}
	},
	governmentIcon: function(p){
		// <i class="' + icon + ' diploSquare player'+ game.player[p.player].playerColor +'" data-placement="right"></i>
		var str = '';

		if (p.cpu) {
			str += '<img src="images/icons/computer.png" class="fw-icon-sm">';
		}
		else {
			str += '<img src="images/icons/'+ p.government +'.png" class="fw-icon-sm">';
		}
		return str;
	},
	startGame: function(){
		if (my.player === 1){
			if (lobby.totalPlayers() >= 2){
				startGame.style.display = "none";
				cancelGame.style.display = 'none';
				g.lock();
				audio.play('click');
				$.ajax({
					type: "GET",
					url: app.url +"php/startGame.php"
				}).fail(function(data){
					g.msg(data.statusText);
					startGame.style.display = "block";
					cancelGame.style.display = 'block';
				}).always(function(){
					g.unlock();
				});
			} else {
				g.msg(lang[my.lang].needTwoPlayers);
			}
		}
	}
};

function initOffensiveTooltips(){
	if (isLoggedIn){
		$('#fireCannons')
			.attr('title', ui.cannonTooltip())
			.tooltip('fixTitle')
			.tooltip({ animation: false });
		$('#launchMissile')
			.attr('title', ui.missileTooltip()).tooltip('fixTitle')
			.tooltip({ animation: false });
		$('#rush')
			.attr('title', ui.rushTooltip())
			.tooltip('fixTitle')
			.tooltip({ animation: false });
	}
}
function initResources(d){
	my.food = d.food;
	my.production = d.production;
	my.culture = d.culture;
	// current
	DOM.moves.textContent = d.moves;
	DOM.production.textContent = d.production;
	DOM.food.textContent = d.food;
	DOM.culture.textContent = d.culture;
	// turn
	// max
	DOM.manpower.textContent = my.manpower;
	my.manpower = d.manpower;
	DOM.foodMax.textContent = d.foodMax;
	DOM.cultureMax.textContent = d.cultureMax;
	// sum
	//DOM.sumFood.textContent = d.sumFood;
	//DOM.sumProduction.textContent = d.sumProduction;
	//DOM.sumCulture.textContent = d.sumCulture;
	// bonus values
	DOM.oBonus.textContent = d.oBonus;
	DOM.dBonus.textContent = d.dBonus;
	DOM.productionBonus.textContent = d.productionBonus;
	DOM.foodBonus.textContent = d.foodBonus;
	DOM.cultureBonus.textContent = d.cultureBonus;
	setBars(d);
}
function setMoves(d){
	if (d.moves !== undefined){
		my.moves = d.moves;
		DOM.moves.textContent = d.moves;
		if (d.sumMoves){
			//DOM.sumMoves.textContent = d.sumMoves;
		}
		// DOM.endTurn.style.visibility = my.moves ? 'visible' : 'hidden';
	}
}
function setProduction(d){
	if (d.production !== undefined){
		TweenMax.to(my, .3, {
			production: d.production,
			ease: Quad.easeIn,
			onUpdate: function(){
				DOM.production.textContent = ~~my.production;
			}
		});
	}
}
function setManpower(d) {
	if (d.manpower !== undefined){
		if (d.manpower > my.manpower){
			TweenMax.fromTo('#manpower', .5, {
				color: '#ffaa33'
			}, {
				color: '#ffff00',
				repeat: -1,
				yoyo: true

			});
			TweenMax.to(my, .5, {
				manpower: d.manpower,
				onUpdate: function(){
					DOM.manpower.textContent = ~~my.manpower;
				}
			});
		} else {
			my.manpower = d.manpower;
			DOM.manpower.textContent = my.manpower;
		}
	}
}
function setResources(d){
	//console.info(d);
	setMoves(d);
	setProduction(d);
	TweenMax.to(my, .3, {
		food: d.food === undefined ? my.food : d.food,
		culture: d.culture === undefined ? my.culture : d.culture,
		ease: Quad.easeIn,
		onUpdate: function(){
			DOM.food.textContent = ~~my.food;
			DOM.culture.textContent = ~~my.culture;
		}
	});
	setManpower(d);
	if (d.foodMax !== undefined){
		if (d.foodMax && d.foodMax > my.foodMax){
			DOM.foodMax.textContent = d.foodMax;
			my.foodMax = d.foodMax;
		}
	}
	if (d.cultureMax !== undefined){
		if (d.cultureMax && d.cultureMax > my.cultureMax){
			DOM.cultureMax.textContent = d.cultureMax;
			my.cultureMax = d.cultureMax;
		}
	}
	/*if (d.sumFood !== undefined){
		if (d.sumFood && d.sumFood !== my.sumFood){
			//DOM.sumFood.textContent = d.sumFood;
			my.sumFood = d.sumFood;
		}
	}
	if (d.sumProduction !== undefined){
		if (d.sumProduction && d.sumProduction !== my.sumProduction){
			//DOM.sumProduction.textContent = d.sumProduction;
			my.sumProduction = d.sumProduction;
		}
	}
	if (d.sumCulture !== undefined){
		if (d.sumCulture && d.sumCulture !== my.sumCulture){
			//DOM.sumCulture.textContent = d.sumCulture;
			my.sumCulture = d.sumCulture;
		}
	}*/
	// bonus values
	if (d.oBonus !== undefined){
		if (my.oBonus !== d.oBonus){
			DOM.oBonus.textContent = d.oBonus;
			my.oBonus = d.oBonus;
			initOffensiveTooltips();
		}
	}
	if (d.dBonus !== undefined){
		if (my.dBonus !== d.dBonus){
			DOM.dBonus.textContent = d.dBonus;
			my.dBonus = d.dBonus;
		}
	}
	if (d.productionBonus !== undefined){
		if (my.productionBonus !== d.productionBonus){
			DOM.productionBonus.textContent = d.productionBonus;
			my.productionBonus = d.productionBonus;
		}
	}
	if (d.foodBonus !== undefined){
		if (my.foodBonus !== d.foodBonus){
			DOM.foodBonus.textContent = d.foodBonus;
			my.foodBonus = d.foodBonus;
		}
	}
	if (d.cultureBonus !== undefined){
		if (my.cultureBonus !== d.cultureBonus){
			DOM.cultureBonus.textContent = d.cultureBonus;
			my.cultureBonus = d.cultureBonus;
			// rush bonus changes
			initOffensiveTooltips();
		}
	}
	setBars(d);
}
function setBars(d){
	// animate bars
	TweenMax.to(DOM.foodBar, .3, {
		width: ((d.food / d.foodMax) * 100) + '%'
	});
	TweenMax.to(DOM.cultureBar, .3, {
		width: ((d.culture / d.cultureMax) * 100) + '%'
	});
}

function Nation(){
	this.account = "";
	this.nation = "";
	this.flag = "blank.png";
	this.playerColor = 0;
	this.team = 1;
	this.alive = true;
	// this.avatar = '';
	this.government = '';
	return this;
}

function loadGameState(){
	sessionStorage.setItem('gameDuration', Date.now());
	g.lock(1);
	var e1 = document.getElementById("mainWrap");
	if (e1 !== null){
		TweenMax.to(e1, .5, {
			alpha: 0
		});
	}
	// load map
	DOM.worldWrap.innerHTML = maps.getMap(g.map.key);

	// init map DOM stuff here
	// programmatically set land elements' id and class
	var e = document.querySelectorAll('#landWrap > path');

	for (var i=0, len = e.length; i<len; i++) {
		e[i].setAttributeNS(null, 'id', 'land'+i);
		e[i].setAttributeNS(null, 'class', 'land');
	}

	// programmatically set text elements' id and class
	e = document.querySelectorAll('text');
	for (i=0, len = e.length; i<len; i++) {
	  e[i].setAttributeNS(null, 'id', 'unit'+i);
	  e[i].setAttributeNS(null, 'class', 'unit');
	}
	initDom();
	clearInterval(socket.keepAliveInterval);
	$("#leaderboard, #configureNation, joinPrivateGameModal, #createGameWrap").remove();

	$.ajax({
		type: "GET",
		url: app.url +"php/loadGameState.php"
	}).done(function(data){
		void 0;
		void 0;
		// data.mapData.sizeX data.mapData.sizeX
		document.getElementById('world')
			.setAttribute('viewBox', '0 0 ' + data.mapData.sizeX + ' ' + data.mapData.sizeY);

		$("#login-modal").remove();
		setTimeout(function() {
			$("#title-bg-wrap").remove();
		}, 2000);

		g.resourceTick = data.resourceTick;
		g.startGame = data.startGame * 1;
		g.teamMode = data.teamMode;
		g.gameMode = data.gameMode;
		// set map data
		g.map.sizeX = data.mapData.sizeX;
		g.map.sizeY = data.mapData.sizeY;
		g.map.name = data.mapData.name;
		g.map.tiles = data.mapData.tiles;
		g.map.tileNames = data.mapData.tileNames;
		if (data.tiles.length < g.map.tiles){
			void 0;
			if (g.loadAttempts < 20){
				setTimeout(function(){
					g.loadAttempts++;
					loadGameState(); // try again
				}, 500);
			}
			else {
				g.msg(lang[my.lang].failedToLoad);
				localStorage.setItem('reload', false);
				setTimeout(function(){
					window.onbeforeunload = null;
					location.reload();
				}, 3000);
			}
			return;
		}
		$("meta").remove();
		g.screen.resizeMap();

		audio.gameMusicInit();
		// only when refreshing page while testing
		audio.load.game();
		video.load.game();
		// done
		my.player = data.player;
		my.team = data.team;
		my.account = data.account;
		my.oBonus = data.oBonus;
		my.dBonus = data.dBonus;
		my.cultureBonus = data.cultureBonus;
		my.tech = data.tech;
		my.capital = data.capital;
		my.flag = data.flag;
		my.nation = data.nation;
		my.foodMax = data.foodMax;
		my.production = data.production;
		my.sumProduction = data.sumProduction;
		my.cultureMax = data.cultureMax;
		my.moves = data.moves;
		my.government = data.government;
		my.cannonBonus = data.cannonBonus;
		lobby.updateGovernmentWindow(my.government);
		// global government bonuses
		if (my.government === 'Monarchy'){
			my.cannonsBonus = 2;
		}
		else if (my.government === 'Democracy'){
			my.maxDeployment = 48;
		}
		else if (my.government === 'Republic'){
			my.sumMoves = data.sumMoves;
			document.getElementById('moves').textContent = my.sumMoves;
			// DOM.sumMoves.textContent = my.sumMoves;
			//console.info('sumMoves ', my.government, my.sumMoves, data.sumMoves);
		}
		else if (my.government === 'Fascism'){
			document.getElementById('moves').textContent = 8;
			my.deployCost = 1;
			document.getElementById('deployCost').textContent = my.deployCost;
		}
		// initialize player data
		game.initialized = true;
		for (var z=0, len=game.player.length; z<len; z++){
			// initialize diplomacy-ui
			game.player[z] = new Nation();
		}

		g.removeContainers();
		g.unlock();
		g.view = "game";
		TweenMax.fromTo(gameWrap, 1, {
			autoAlpha: 0
		}, {
			autoAlpha: 1
		});
		// init game player data
		for (var i=0, len=data.players.length; i<len; i++){
			var d = data.players[i],
				z = game.player[d.player],
				flag = d.flag.split('.')[0];
			z.account = d.account;
			z.flag = flag + ui.getFlagExt(flag);
			z.nation = d.nation;
			z.player = d.player;
			z.playerColor = d.playerColor;
			z.team = d.team;
			z.government = d.government;
			// z.avatar = d.avatar;
			z.cpu = d.cpu;
			z.difficulty = d.difficulty;
			z.difficultyShort = d.difficulty.replace(/ /g, '');
		}

		// initialize client tile data
		var now = Date.now();
		for (var i=0, len=data.tiles.length; i<len; i++){
			var d = data.tiles[i];
			game.tiles[i] = {
				name: d.tileName,
				account: d.account,
				player: d.player,
				nation: d.nation,
				flag: d.flag,
				capital: data.capitalTiles.indexOf(i) > -1 && d.flag ? true : false,
				units: d.units,
				food: d.food,
				production: d.production,
				culture: d.culture,
				defense: d.defense,
				adj: data.adj[i],
				timestamp: now
			}
			// init flag unit values
			var zig = document.getElementById('unit' + i);
			if (zig !== null){
				var unitVal = game.tiles[i].capital ?
					'<tspan class="unit-star">&#10028;</tspan>' + game.tiles[i].units :
					game.tiles[i].units;
				zig.innerHTML = d.units === 0 ? 0 : unitVal;
				if (d.units){
					zig.style.visibility = 'visible';
				}
			}
			if (d.player){
				// init map appearance
				TweenMax.set('#land' + i, {
					fill: g.color[game.player[d.player].playerColor],
					stroke: g.color[game.player[d.player].playerColor],
					strokeWidth: 1,
					onComplete: function(){
						if (d.player){
							TweenMax.set(this.target, {
								stroke: "hsl(+=0%, +=0%, -=30%)"
							});
						}
					}
				});
			}
		}
		g.tileCount = len;
		var svgTgt = document.getElementById('targetCrosshair');
		TweenMax.to(svgTgt, 10, {
			force3D: true,
			transformOrigin: '50% 50%',
			rotation: 360,
			repeat: -1,
			ease: Linear.easeNone
		});
		//lobby.initRibbons(data.ribbons);
		ui.drawDiplomacyPanel();
		initResources(data);
		// set images
		setTimeout(function(){
			// init draggable map
			worldMap = Draggable.create(DOM.worldWrap, {
				minimumMovement: 6,
				type: 'top,left',
				bounds: DOM.gameWrap,
				throwProps: true,
				edgeResistance: 1
			});

			initOffensiveTooltips();
			TweenMax.set(DOM.targetLine, {
				stroke: g.color[game.player[my.player].playerColor]
			});
			TweenMax.set(DOM.targetLine, {
				stroke: "hsl(+=0%, +=0%, -=5%)"
			});
			TweenMax.set(DOM.arrowheadTip, {
				fill: g.color[game.player[my.player].playerColor]
			});
			TweenMax.set(DOM.arrowheadTip, {
				fill: "hsl(+=0%, +=0%, -=5%)"
			});

			// map events
			$("#gameWrap").on('click', '.land', function(e){
				//location.host === 'localhost' && console.info(this.id, e.offsetX, e.offsetY);
				action.triggerAction(this, e);
			}).on("mouseenter", '.land', function(){
				my.lastTarget = this;
				if (my.attackOn){
					ui.showTarget(this, true);
				}
				TweenMax.set(this, {
					fill: "hsl(+=0%, +=0%, -=5%)"
				});
			}).on("mouseleave", '.land', function(){
				var land = this.id.slice(4)*1;
				if (game.tiles.length > 0){
					var player = game.tiles[land] !== undefined ? game.tiles[land].player : 0,
						fillNum = player ? game.player[player].playerColor : 0;
					TweenMax.set(this, {
						fill: g.color[fillNum]
					});
				}
			});

			// focus on player home
			my.focusTile(my.capital);
			// add warning for players
			game.startGameState();
			ui.setCurrentYear(data.resourceTick);
			animate.paths();
			action.setMenu();
			ui.updateTileInfo(my.lastTgt);
			game.setVisibilityAll();
			// language width adjustment
			document.getElementById('resources-ui').style.width = lang[my.lang].resourceUiWidth;
		}, 350);
		/*TweenMax.set('.land', {
			filter: 'url(#emboss)'
		})*/
		// init map flags
		var a = document.querySelectorAll('#world text'),
			mapFlagWrap = document.getElementById('mapFlagWrap');
		for (var i=0, len=a.length; i<len; i++){
			// set flag position and value
			var t = game.tiles[i],
				x = a[i].getAttribute('x') - 20,
				y = a[i].getAttribute('y') - 30,
				flag = 'blank.png';

			if (t !== undefined){
				if (!t.flag && t.units){
					flag = "Barbarian.jpg";
				}
				else if (t.flag){
					flag = t.flag;
				}
			}
			flag = flag.split('.')[0];
			flag = flag + ui.getFlagExt(flag);
			// dynamically add svg flag image to the map
			var svg = document.createElementNS('http://www.w3.org/2000/svg', 'image');
			svg.id = 'flag' + i;
			svg.setAttributeNS(null, 'height', 40);
			svg.setAttributeNS(null, 'width', 40);
			svg.setAttributeNS(null,"x",x);
			svg.setAttributeNS(null,"y",y);
			svg.setAttributeNS(null,"class","mapFlag");
			svg.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', 'images/flags/' + flag);
			mapFlagWrap.appendChild(svg);
		}

		// init map DOM elements
		game.initMap();
		// food, culture, def bars
		for (var i=0; i<len; i++){
			animate.initMapBars(i);
		}
	}).fail(function(data){
		setTimeout(function(){
			loadGameState();
		}, 1500);
	}).always(function(){
		g.unlock();
	});
};
// ws.js 
// client-side web sockets
var socket = {
	initialConnection: true,
	removePlayer: function(account){
		// instant update of clients
		var o = {
			type: 'remove',
			account: my.account
		}
		// removes id
		socket.zmq.publish('title:' + my.channel, o);
		title.players[account] = null;
	},
	addPlayer: function(account, flag){
		// instant update of clients
		void 0;
		if (account) {
			socket.zmq.publish('title:' + my.channel, {
				type: 'add',
				account: my.account,
				flag: my.flag,
				rating: my.rating
			});
			title.players[account] = {
				flag: flag
			}
		}
	},
	unsubscribe: function(channel){
		try {
			socket.zmq.unsubscribe(channel);
		} catch(err){
			// console.info(err);
		}
	},
	firstInit: 0,
	setChannel: function(channel){
		// change channel on title screen
		if (g.view === 'title'){
			// remove from channel
			channel = channel.trim();
			// first character must be alphanumeric
			if (!channel) {
				g.chat("That channel name is not valid. Channel names may only contain alphanumeric values.");
			}
			else if (!socket.firstInit || channel !== my.channel){
				socket.firstInit = 1;
				$.ajax({
					type: "POST",
					url: app.url + "php/titleChangeChannel.php",
					data: {
						channel: channel
					}
				}).done(function(data){
					// removes id
					socket.removePlayer(my.account);
					// unsubs
					socket.unsubscribe('title:' + my.channel);

					// set new channel data
					my.channel = data.channel;
					for (var key in title.players){
						title.players[key] = null;
					}
					data.skip = true;
					data.message = lang[my.lang].joinedChannel + data.channel;
					data.type = "chat-warning";
					// send message to my chat log
					title.chat(data);
					socket.zmq.subscribe('title:' + my.channel, function(topic, data) {
						void 0;
						if (g.ignore.indexOf(data.account) === -1){
							title.chatReceive(data);
						}
					});
					// add id
					socket.addPlayer(my.account, my.flag);
					// update display of channel
					if (g.view === 'title'){
						document.getElementById('titleChatHeaderChannel').textContent = data.channel;
						document.getElementById('titleChatBody').innerHTML = '';
					}
					title.updatePlayers(0);
					// update browser hash
					location.hash = my.channel;
				}).fail(function() {
					g.chat("That channel name is not valid.");
				});
			}
		}
	},
	enableWhisper: function(){
		var channel = 'account:' + my.account;
		socket.zmq.subscribe(channel, function(topic, data) {
			if (data.message){
				if (data.action === 'send'){
					//console.info("SENT: ", data.playerColor, data);
					// message sent to user
					var flag = my.flag.split(".");
					flag = flag[0].replace(/ /g, "-");
					my.lastReceivedWhisper = data.account;
					$.ajax({
						url: app.url + 'php/insertWhisper.php',
						data: {
							action: "receive",
							flag: data.flag,
							playerColor: data.playerColor,
							account: data.account,
							message: data.message
						}
					});
					data.type = 'chat-whisper';
					data.msg = data.message;
					data.message = data.chatFlag + data.account + lang[my.lang].whispers + data.message;
					title.receiveWhisper(data);
				} else {
					// message receive confirmation to original sender
					// console.info("CALLBACK: ", data);
					if (data.timestamp - title.lastWhisper.timestamp < 500 &&
						data.account === title.lastWhisper.account &&
						data.message === title.lastWhisper.message){
						// skip message
					} else {
						// reference values to avoid receiving double messages when a player is in the lobby multiple times
						// this causes multiple response callbacks
						title.lastWhisper.account = data.account;
						title.lastWhisper.timestamp = data.timestamp;
						title.lastWhisper.message = data.message;
						// send message
						data.msg = data.message;
						data.message = data.chatFlag + lang[my.lang].to + data.account + ': ' + data.message;
						data.type = 'chat-whisper';
						title.receiveWhisper(data);
					}
				}
			}
		});
		socket.zmq.subscribe('fw:hb:' + my.account, function(topic, data) {
			void 0;
			if (data.msg){
				g.chat(data.msg, data.type);
			}
		});
		setInterval(function() {
			void 0;
		}, 300000); // 5 min
		setTimeout(function() {
			socket.keepAliveInterval = setInterval(socket.keepAliveWs, 20000);
		})
	},
	keepAliveInterval: 0,
	keepAliveWs: function() {
		socket.zmq.publish('fw:hb:' + my.account, {});
	},
	joinGame: function(){
		(function repeat(){
			if (socket.enabled){
				socket.unsubscribe('title:' + my.channel);
				socket.unsubscribe('game:' + game.id);
				// game updates
				// console.info("Subscribing to game:" + game.id);
				socket.zmq.subscribe('game:' + game.id, function(topic, data) {
					if (g.ignore.indexOf(data.account) === -1){
						title.chatReceive(data);
					}
				});
			} else {
				setTimeout(repeat, 100);
			}
		})();
	},
	enabled: false,
	init: function(){
		// is player logged in?
		socket.zmq = new ab.Session('wss://' + app.socketUrl + '/wss2/', function () {
			// on open
			socket.connectionSuccess();
		}, function(){
			// on close/fail
			socket.reconnect();
		}, {
			// options
			'skipSubprotocolCheck': true
		});
	},
	connectionSuccess: function(){
		socket.enabled = true;
		void 0;
		// chat updates
		if (g.view === 'title'){
			if (socket.initialConnection){
				g.unlock();
				socket.zmq.subscribe('title:refreshGames', function(topic, data) {
					void 0;
					title.updateGame(data);
				});
				socket.zmq.subscribe('admin:broadcast', function(topic, data) {
					if (data.msg){
						g.chat(data.msg, data.type);
					}
					else if (data.category === 'close-app') {
						title.exitGame();
					}
				});
				(function repeat(){
					if (my.account){
						socket.enableWhisper();
					} else {
						setTimeout(repeat, 200);
					}
				})();
			}
			socket.initialConnection = false;
			document.getElementById('titleChatHeaderChannel').innerHTML = my.channel;
			socket.setChannel(my.channel); // should be usa-1
		}
		else if (g.view === 'game'){
			game.getGameState();
		}
	},
	connectionTries: 0,
	connectionRetryDuration: 100,
	reconnect: function(){
		void 0;
		socket.enabled = false;
		setTimeout(socket.init, socket.connectionRetryDuration);
	}
}
// audio.js
var audio = {
	ext: (function(a){
		return !!(a.canPlayType && a.canPlayType('audio/mpeg;').replace(/no/, '')) ? 'mp3' : 'ogg'
	})(document.createElement('audio')),
	on: (function(a){
		return !!a.canPlayType ? true : false;
	})(document.createElement('audio')),
	play: function(foo, bg, audioMod){
		if (foo) {
			if (bg){
				// music
				DOM.bgmusic.pause();
				DOM.bgmusic.src = "music/" + foo + ".mp3";
				DOM.bgmusic.volume = g.config.audio.musicVolume / 100;
			} else {
				// sfx
				var sfx = new Audio("sound/" + foo + ".mp3"),
					mod = audioMod || 1;
				sfx.volume = mod * (g.config.audio.soundVolume / 100);
				sfx.play();
			}
		}
	},
	save: function(){
		// save to storage
		var foo = JSON.stringify(g.config); 
		localStorage.setItem('config', foo);
	},
	setMusicVolume: function(val){
		if (g.config.audio.musicVolume){
			if (!val){
				audio.pause();
			}
		} else {
			// start playing music
			audio.musicStart();
		}
		DOM.bgmusic.volume = val / 100;
		g.config.audio.musicVolume = val;
		audio.save();
	},
	setSoundVolume: function(val){
		g.config.audio.soundVolume = val;
		audio.save();
	},
	pause: function(){
		DOM.bgmusic.pause();
	},
	gameMusicInit: function(){
		if (g.config.audio.musicVolume){
			audio.pause();
			DOM.bgmusic.loop = false;
			audio.gameMusicPlayNext();
		}
	},
	// rotating music tracks in game
	trackIndex: ~~(Math.random() * 8),
	tracks: [
		'BehindTheShield',
		'DeceptionPoint',
		'HeroicReturn',
		'HeartOfChampions',
		'LeadingTheCharge',
		'RiseAgainstTheMachine',
		'TheAssault',
		'WithGreatPower'
	],
	gameMusicPlayNext: function(){
		// FIX IT SO IT USES BGAUDIO
		audio.totalTracks = audio.tracks.length;
		var nowPlaying = audio.tracks[++audio.trackIndex % audio.totalTracks];
		DOM.bgmusic.pause();
		DOM.bgmusic.src = "music/" + nowPlaying +".mp3";
		DOM.bgmusic.volume = g.config.audio.musicVolume / 100;
		DOM.bgmusic.onended = function(){
			audio.gameMusicPlayNext();
		}
	},
	fade: function(){
		var x = {
			vol: g.config.audio.musicVolume / 100
		}
		TweenMax.to(x, 2.5, {
			vol: 0,
			ease: Linear.easeNone,
			onUpdate: function(){
				DOM.bgmusic.volume = x.vol;
			}
		});
	},
	move: function(){
		audio.play('march' + ~~(Math.random()*3));
	},
	deploy: function(){
		audio.play('deploy' + ~~(Math.random()*3));
	},
	cache: {},
	load: {
		title: function(){
			var x = [
				'click', 
				'beep'
			];
			for (var i=0, len=x.length; i<len; i++){
				var z = x[i];
				audio.cache[z] = new Audio("sound/" + z + ".mp3");
			}
		},
		game: function(){
			var x = [
				'machine0',
				'machine1',
				'machine2',
				'machine3',
				'machine4',
				'machine5',
				'machine6',
				'machine7',
				'machine8',
				'machine9',
				'march0',
				'march1',
				'march2',
				'deploy0',
				'deploy1',
				'deploy2',
				'chat', 
				'hup2', 
				'cheer3',
				'culture',
				'error',
				'build',
				'grenade5',
				'grenade6',
				'grenade8',
				'missile7',
				'bomb9',
				'warning',
				'research'
			];
			for (var i=0, len=x.length; i<len; i++){
				var z = x[i];
				audio.cache[z] = new Audio("sound/" + z + ".mp3");
			}
		}
	},
	musicStart: function(){
		if (g.view !== 'game'){
			audio.play("ReturnOfTheFallen", 1);
			//audio.play("WaitingBetweenWorlds", 1);
		} else {
			audio.gameMusicPlayNext();
		}
	}
}
audio.init = (function(){
	// console.info("Checking local data...");
	var config = localStorage.getItem('config');
	if (config === null){
		// initialize
		audio.save();
	} else {
		var foo = JSON.parse(config);
		if (g.config.audio.musicOn === undefined){
			g.config.audio = foo.audio;
		}
	}
	// console.info("Initializing audio...", g.config.audio);
	audio.load.title();
	if (!g.config.audio.musicVolume){
		audio.pause();
	} else {
		audio.musicStart();
	}
	var initComplete = false;
	var e = $("#musicSlider");
	if (e.length){
		e.slider({
			min  : 0, 
			max  : 100,
			formatter: function(value) {
				if (initComplete){
					audio.setMusicVolume(value);
					return value;
				} else {
					return g.config.audio.musicVolume;
				}
			}
		}).slider('setValue', g.config.audio.musicVolume);
	}
	$("#soundSlider").slider({
		min  : 0, 
		max  : 100, 
		value: g.config.audio.soundVolume, 
		tooltip_position: 'bottom',
		formatter: function(value) {
			if (initComplete){
				audio.setSoundVolume(value);
				return value;
			} else {
				return g.config.audio.soundVolume
			}
		}
	}).on('slideStop', function(val){
		audio.play('machine0', null, .7);
	}).slider('setValue', g.config.audio.soundVolume);
	initComplete = true;
})();
// map.js
// map zooming and scrolling
function mouseZoomIn(){
	g.mouse.zoom += 10;
	if (g.mouse.zoom >= 150){
		g.mouse.zoom = 150;
	}
	TweenMax.to(DOM.worldWrap, .3, {
		transformOrigin: g.mouse.transX + "% " + g.mouse.transY + "%",
		force3D: false,
		smoothOrigin: true,
		scale: g.mouse.zoom / 100,
		onUpdate: function(){
			worldMap[0].applyBounds();
		}, 
		onComplete: function(){
			worldMap[0].applyBounds();
		}
	});
}
function mouseZoomOut(){
	g.mouse.zoom -= 10;
	if (g.mouse.zoom <= 70){
		g.mouse.zoom = 70;
	}
	TweenMax.to(DOM.worldWrap, .3, {
		force3D: false,
		smoothOrigin: true,
		transformOrigin: g.mouse.transX + "% " + g.mouse.transY + "%",
		scale: g.mouse.zoom / 100,
		onUpdate: function(){
			worldMap[0].applyBounds();
		}, 
		onComplete: function(){
			worldMap[0].applyBounds();
		}
	});
	worldMap[0].applyBounds();
}
function setMousePosition(X, Y){
	var x = ~~((X / g.map.sizeX) * 100);
	var y = ~~((Y / g.map.sizeY) * 100);
	g.mouse.transX = x;
	g.mouse.transY = y;
	g.mouse.x = X;
	g.mouse.y = Y;
}
// actions.js
function Target(o){
	if (o === undefined){
		o = {};
	}
	this.cost = o.cost !== undefined ? o.cost : 2;
	this.minimum = o.minimum !== undefined ? o.minimum : 2;
	this.attackName = o.attackName ? o.attackName : 'attack';
	this.splitAttack = o.splitAttack ? o.splitAttack : false;
	this.hudMsg = o.hudMsg ? o.hudMsg : lang[my.lang].hudAttack;
}

var action = {
	isJuggernautValid: function() {
		var juggernautValid = 1;
		if (g.teamMode) {
			game.player.forEach(function (v, i) {
				if (!juggernautValid) return;
				if (my.team === v.team && v.cpu) {
					juggernautValid = 0;
				}
			});
		}
		return juggernautValid;
	},
	triggerAction: function(that, event) {
		var id = that.id.slice(4)*1;
		void 0;
		if (my.attackOn){
			var o = my.targetData;
			if (o.attackName === 'attack' || o.attackName === 'splitAttack'){
				action.attack(that);
			}
			else if (o.attackName === 'cannons'){
				action.fireCannons(that);
			}
			else if (o.attackName === 'missile'){
				action.launchMissile(that);
			}
			else if (o.attackName === 'nuke'){
				action.launchNuke(that);
			}
		}
		else {
			ui.showTarget(that);
		}
	},
	error: function(msg){
		if (msg === undefined){
			msg = lang[my.lang].notScience;
		}
		g.msg(msg, 1.5);
		my.clearHud();
		ui.showTarget(DOM['land' + my.tgt]);
	},
	target: function(o){
		my.targetData = o;
		my.checkSelectLastTarget();
		if (my.attackOn && o.attackName === my.attackName){
			my.attackOn = false;
			my.attackName = '';
			my.clearHud();
			ui.showTarget(DOM['land' + my.tgt]);
			return;
		}
		if (game.tiles[my.tgt].units < o.minimum){
			g.msg(lang[my.lang].needTwoUnits, 1.5);
			my.clearHud();
			return;
		}
		if (my.player === game.tiles[my.tgt].player){
			my.attackOn = true;
			my.attackName = o.attackName;
			my.splitAttack = o.splitAttack;
			my.hud(o.hudMsg);
			// set cursor
			$("#style-land-crosshair").remove();
			$DOM.head.append('<style id="style-land-crosshair">.land{ cursor: crosshair; }</style>');
			// set target line
			my.targetLine[0] = DOM['unit' + my.tgt].getAttribute('x')*1 - 10;
			my.targetLine[1] = DOM['unit' + my.tgt].getAttribute('y')*1 - 10;
			ui.showTarget(my.lastTarget, true);
		}
	},
	attack: function(that){
		var isSplit = my.splitAttack ? 1 : 0,
			timerKey = isSplit ? 'splitAttackTimer' : 'attackTimer',
			attackElement = isSplit ? 'splitAttack' : 'attack',
			now = Date.now(),
			dur = 1000;
		if (now - g[timerKey] < dur) {
			return;
		}
		var attacker = my.tgt;
		var defender = that.id.slice(4)*1;
		if (my.tgt === defender){
			return;
		}
		if (game.tiles[attacker].adj.indexOf(defender) === -1){
			action.targetNotAdjacent('You can only attack adjacent territories.', attacker);
			return;
		}
		// can't move to maxed friendly tile
		if (game.tiles[defender].player === my.player){
			if (game.tiles[defender].units >= 65535){
				g.msg(lang[my.lang].maxUnits, 1.5);
				my.clearHud();
				return;
			}
		}
		
		my.attackOn = false;
		my.attackName = '';
		if (game.tiles[my.tgt].units === 1){
			g.msg(lang[my.lang].needTwoUnits, 1.5);
			my.clearHud();
			return;
		}
		if (my.government === lang[my.lang].governments.Despotism &&
			game.tiles[defender].player === my.player){
			// nothing
		} else {
			if ((my.moves < 2 && !isSplit) ||
				(my.moves < 1 && isSplit) ){
				action.error(lang[my.lang].notEnoughEnergy);
				return;
			}
		}
		ui.showTarget(that);
		my.clearHud();
		if (g.teamMode && game.tiles[defender].player){
			if (my.account !== game.tiles[defender].account){
				if (my.team === game.player[game.tiles[defender].player].team){
					void 0
					g.msg(lang[my.lang].friendlyFire);
				}
			}
		}
		var filter = {
				brightness: 200
			},
			element = isSplit ? '#splitAttack' : '#attack';

		TweenMax.to(filter, .5, {
			brightness: 100,
			onUpdate: function() {
				animate.brightness(element, filter.brightness);
			}
		});
		// send attack to server
		$.ajax({
			url: app.url + 'php/attackTile.php',
			data: {
				attacker: attacker,
				defender: defender,
				split: isSplit,
				defGovernment: game.player[game.tiles[defender].player].government
			}
		}).done(function(data){
			//console.info('attackTile', data);
			// animate attack
			action.timeoutWeaponButton(attackElement, dur);
			g[timerKey] = Date.now();
			if (game.tiles[defender].player !== my.player){
				if (!game.tiles[defender].units){
					audio.move();
				}
			} else {
				audio.move();
			}
			// barbarian message
			if (data.rewardMsg){
				game.chat({ message: '<span class="chat-news">' + data.rewardMsg + '</span>' });
				setResources(data);
				if (data.foodReward && data.productionReward && data.cultureReward){
					// all +%
					animate.upgrade(defender, 'food', data.foodReward +'%');
					setTimeout(function(){
						animate.upgrade(defender, 'production', data.productionReward +'%');
					}, 500);
					setTimeout(function(){
						animate.upgrade(defender, 'culture', data.cultureReward +'%');
					}, 1000);
				} else if (data.sumFood){
					animate.upgrade(defender, 'food', data.sumFood);
				} else if (data.sumProduction){
					animate.upgrade(defender, 'production', data.sumProduction);
				} else if (data.sumCulture){
					animate.upgrade(defender, 'culture', data.sumCulture);
				} else if (data.sumMoves){
					animate.upgrade(defender, 'energy', data.sumMoves);
				} else if (data.foodReward){
					// food %
					animate.upgrade(defender, 'food', data.foodReward +'%');
				} else if (data.productionReward){
					// production %
					animate.upgrade(defender, 'production', data.productionReward +'%');
				} else if (data.cultureReward){
					// culture %
					animate.upgrade(defender, 'culture', data.cultureReward +'%');
				}
			}
			setMoves(data); 
			// reset target if lost
			if (!data.victory){
				ui.showTarget(DOM['land' + attacker]);
			}
			// process barbarian reward messages
			game.reportMilestones(data);
		}).fail(function(data){
			action.targetNotAdjacent(data.statusText, attacker);
		});
	},/*
	getRandomDemocracyTile: function(tile, player){
		var a = [],
			i = 0;
		game.tiles.forEach(function(t, index){
		  if (t.player === player && index !== tile){
			a[i++] = index;
		  }
		});
		var len = a.length;
		return a[~~(Math.random() * len)];
	},*/
	targetNotAdjacent: function(msg, attacker){
		audio.play('error');
		g.msg(msg, 1.5);
		// set target attacker
		ui.showTarget(DOM['land' + attacker]);
	},
	deploy: function(){
		var t = game.tiles[my.tgt];
		if (my.player !== t.player) {
			if (my.government === 'Communism' &&
				!game.tiles[my.tgt].player &&
				!game.tiles[my.tgt].units){
				// uninhabited - skip for commie bonus
			}
			else {
				action.error(lang[my.lang].notYourTile);
				return;
			}
		}
		if (my.moves < my.deployCost){
			action.error(lang[my.lang].notEnoughEnergy);
			return;
		}
		if (!my.manpower){
			action.error(lang[my.lang].noTroopsAvailable);
			return;
		}
		if (t.units < 65535){
			// do it
			var tgt = my.tgt,
				filter = {
					brightness: 200
				};

			TweenMax.to(filter, .5, {
				brightness: 100,
				onUpdate: function() {
					animate.brightness('#deploy', filter.brightness);
				}
			});
			$.ajax({
				url: app.url + 'php/deploy.php',
				data: {
					target: tgt
				}
			}).done(function(data) {
				//console.info(data);
				audio.deploy();
				game.tiles[tgt].units = data.units;
				my.manpower = data.manpower;
				setResources(data);
			}).fail(function(e){
				audio.play('error');
			}).always(function(){
				ui.setTileUnits(tgt);
			});
			TweenMax.set('#manpower', {
			  color: '#fff'
			});
		}
	},
	rush: function(){
		//my.checkSelectLastTarget();
		var t = game.tiles[my.tgt],
			tgt = my.tgt;
		if (my.player !== t.player) {
			action.error(lang[my.lang].notYourTile);
			return;
		}
		if (my.moves < my.rushCost){
			action.error(lang[my.lang].notEnoughEnergy);
			return;
		}
		if (t.units < 65535){
			var filter = {
				brightness: 200
			};
			TweenMax.to(filter, .5, {
				brightness: 100,
				onUpdate: function() {
					animate.brightness('#rush', filter.brightness);
				}
			});
			$.ajax({
				url: app.url + 'php/rush.php',
				data: {
					target: tgt
				}
			}).done(function(data) {
				audio.deploy();
				setMoves(data);
				game.tiles[tgt].units = data.units;
				//setProduction(data);
				ui.setTileUnits(tgt);
			}).fail(function(e){
				audio.play('error');
			}).always(function(data){
				// my.manpower = data.manpower;
				setResources(data);
			});
		}
	},
	democracyUnits: function() {
		void 0;
		$.ajax({
			url: app.url + 'php/democracy-units.php'
		}).done(function(data) {
		}).always(function(data){
			void 0;
			setManpower(data);
		});
	},
	upgradeTileDefense: function(){
		//my.checkSelectLastTarget();
		var t = game.tiles[my.tgt],
			ind = t.defense - t.capital ? 1 : 0;
		if (my.player !== t.player) {
			action.error(lang[my.lang].notYourTile);
			return;
		}
		if (ind > 2){
			return;
		}
		if (my.production < (g.upgradeCost[ind])){
			action.error();
			return;
		}
		var filter = {
				brightness: 200
			};
		TweenMax.to(filter, .5, {
			brightness: 100,
			onUpdate: function() {
				animate.brightness('#upgradeTileDefense', filter.brightness);
			}
		});
		$.ajax({
			url: app.url + 'php/upgradeTileDefense.php',
			data: {
				target: my.tgt
			}
		}).done(function(data) {
			setProduction(data);
		}).fail(function(e){
			void 0;
			g.msg(e.statusText);
			audio.play('error');
		});
	},
	timeoutWeaponButton: function(id, dur) {
		var overlay = document.getElementById(id + 'Overlay'),
			reload = document.getElementById(id + 'Reload');

		TweenMax.set(overlay, {
			opacity: 1
		});
		TweenMax.to(reload, (dur/1000), {
			startAt: {
				opacity: 1,
				width: '0%'
			},
			width: '100%',
			ease: Linear.easeIn,
			onComplete: function() {
				TweenMax.set(reload, {
					opacity: 0
				});
			}
		});
		setTimeout(function() {
			TweenMax.set(overlay, {
				opacity: 0
			});
		}, dur);
	},
	fireCannons: function(that){
		var now = Date.now(),
			dur = 2000;
		if (now - g.cannonTimer < dur) {
			return;
		}
		var attacker = my.tgt;
		var defender = that.id.slice(4)*1;
		if (my.tgt === defender){
			return;
		}
		if (game.tiles[my.tgt].units === 0){
			return;
		}
		my.attackOn = false;
		my.attackName = '';
		if (my.production < 24){
			action.error();
			return;
		}
		my.clearHud();
		ui.showTarget(DOM['land' + attacker]);
		// send attack to server
		$.ajax({
			url: app.url + 'php/fireCannons.php',
			data: {
				attacker: attacker,
				defender: defender
			}
		}).done(function(data) {
			action.timeoutWeaponButton('fireCannons', dur);
			g.cannonTimer = now;
			setProduction(data);
		}).fail(function(e){
			void 0;
			audio.play('error');
			if (e.statusText){
				g.msg(e.statusText, 1.5);
			}
		});
	},
	launchMissile: function(that){
		var now = Date.now(),
			dur = 5000;
		if (now - g.missileTimer < dur) {
			return;
		}
		var attacker = my.tgt;
		var defender = that.id.slice(4)*1;
		if (my.tgt === defender){
			return;
		}
		if (game.tiles[my.tgt].units === 0){
			return;
		}
		my.attackOn = false;
		my.attackName = '';
		if (my.production < 50){
			action.error();
			return;
		}
		my.clearHud();
		ui.showTarget(DOM['land' + attacker]);
		// send attack to server
		$.ajax({
			url: app.url + 'php/launchMissile.php',
			data: {
				attacker: attacker,
				defender: defender
			}
		}).done(function(data) {
			void 0;
			action.timeoutWeaponButton('launchMissile', dur);
			g.missileTimer = now;
			// animate attack
			if (data.production !== undefined){
				setProduction(data);
			}
			setTimeout(function(){
				$.ajax({
					url: app.url + 'php/launchMissileHit.php',
					data: {
						attacker: attacker,
						defender: defender
					}
				}).fail(function(e){
					void 0;
					if (e.statusText){
						g.msg(e.statusText, 1.5);
					}
				});
			}, 1000);
		}).fail(function(e){
			void 0;
			audio.play('error');
			if (e.statusText){
				g.msg(e.statusText, 1.5);
			}
		});
		
	},
	launchNuke: function(that){
		var now = Date.now(),
			dur = 30000;
		if (now - g.nukeTimer < dur) {
			return;
		}
		var attacker = my.tgt;
		var defender = that.id.slice(4)*1;
		if (my.tgt === defender){
			return;
		}
		if (game.tiles[my.tgt].units === 0){
			return;
		}
		my.attackOn = false;
		my.attackName = '';
		if (my.production < 150){
			action.error();
			return;
		}
		my.clearHud();
		ui.showTarget(DOM['land' + attacker]);
		// send attack to server
		$.ajax({
			url: app.url + 'php/launchNuke.php',
			data: {
				attacker: attacker,
				defender: defender
			}
		}).done(function(data) {
			action.timeoutWeaponButton('launchNuke', dur);
			g.nukeTimer = now;
			setTimeout(function(){
				$.ajax({
					url: app.url + 'php/launchNukeHit.php',
					data: {
						defender: defender
					}
				});
			}, 6000);
			setProduction(data);
		}).fail(function(e){
			void 0;
			audio.play('error');
			if (e.statusText){
				g.msg(e.statusText, 1.5);
			}
		});
		
	},
	// updates currently visible buttons after research/targeting
	setMenu: function(){
		// show/hide research
		DOM.researchMasonry.style.display = !my.tech.masonry ? 'flex' : 'none';
		DOM.researchConstruction.style.display = my.tech.masonry && !my.tech.construction ? 'flex' : 'none';
		DOM.researchEngineering.style.display = my.tech.construction && !my.tech.engineering ? 'flex' : 'none';
		DOM.researchGunpowder.style.display = !my.tech.gunpowder ? 'flex' : 'none';
		DOM.researchRocketry.style.display = my.tech.gunpowder && !my.tech.rocketry ? 'flex' : 'none';
		DOM.researchAtomicTheory.style.display =
			my.tech.rocketry && my.tech.engineering && !my.tech.atomicTheory ? 'flex' : 'none';
		DOM.researchFutureTech.style.display = my.tech.atomicTheory ? 'flex' : 'none';
		action.setBuildButton();
		DOM.fireCannons.style.display = my.tech.gunpowder ? 'flex' : 'none';
		DOM.launchMissile.style.display = my.tech.rocketry ? 'flex' : 'none';
		DOM.launchNuke.style.display = my.tech.atomicTheory ? 'flex' : 'none';
	},
	setBuildButton: function() {
		var t = game.tiles[my.tgt],
			defense = t.defense - (t.capital ? 1 : 0),
			display = 'none';

		if (my.tech.masonry && t.player === my.player){
			// masonry unlocked
			//console.warn("upgradeTileDefense: ", defense, my.tech);
			if (defense === 0 ||
				defense === 1 && my.tech.construction ||
				defense === 2 && my.tech.engineering) {
				// zero defense
				display = 'flex';
				//console.info("SETTING TO FLEX: ", defense, my.tech);
			}
		}
		DOM.upgradeTileDefense.style.display = display;
	},
	/*endTurn: function(){
		if (my.moves){
			audio.play('click');
			$.ajax({
				type: 'GET',
				url: app.url + 'php/endTurn.php',
			}).done(function(data){
				setMoves(data);
			});
		}
	}*/
}

// key bindings
function toggleChatMode(bypass){
	g.chatOn = g.chatOn ? false : true;
	if (g.chatOn){
		// show chat
		$DOM.chatInputOpen.css('visibility', 'hidden');
		$DOM.chatInputWrap.css('visibility', 'visible');
		$DOM.chatInput.focus();
	} else {
		// hide chat
		var msg = $DOM.chatInput.val().trim();
		if (bypass && msg){
			// send ajax chat msg
			if (msg === '/friend'){
				title.listFriends();
			}
			else if (msg.indexOf('/friend ') === 0){
				title.toggleFriend(msg.slice(8));
			}
			else if (msg.indexOf('/unignore ') === 0){
				var account = msg.slice(10);
				title.removeIgnore(account);
			}
			else if (msg === '/ignore'){
				title.listIgnore();
			}
			else if (msg.indexOf('/ignore ') === 0){
				var account = msg.slice(8);
				title.addIgnore(account);
			}
			else if (msg.indexOf('@') === 0){
				title.sendWhisper(msg , '@');
			}
			else if (msg.indexOf('/who ') === 0){
				title.who(msg);
			}
			else {
				if (msg.charAt(0) === '/' && msg.indexOf('/me') !== 0){
					// skip
				} else {
					$.ajax({
						url: app.url + 'php/insertChat.php',
						data: {
							message: msg
						}
					});
				}
			}
		}
		$DOM.chatInput.val('').blur();
		$DOM.chatInputOpen.css('visibility', 'visible');
		$DOM.chatInputWrap.css('visibility', 'hidden');
	}
}

$("#gameWrap").on(ui.click, '#attack', function(){
	var o = new Target({});
	action.target(o);
}).on(ui.click, '#deploy', function(){
	action.deploy();
}).on(ui.click, '#splitAttack', function(){
	var o = new Target({
		cost: 1,
		attackName: 'splitAttack',
		hudMsg: lang[my.lang].hudSplitAttack,
		splitAttack: true
	});
	action.target(o);
}).on(ui.click, '#rush', function(){
	action.rush();
}).on(ui.click, '#upgradeTileDefense', function(){
	action.upgradeTileDefense();
}).on(ui.click, '#researchMasonry', function(){
	research.masonry();
}).on(ui.click, '#researchConstruction', function(){
	research.construction();
}).on(ui.click, '#researchGunpowder', function(){
	research.gunpowder();
}).on(ui.click, '#researchEngineering', function(){
	research.engineering();
}).on(ui.click, '#researchRocketry', function(){
	research.rocketry();
}).on(ui.click, '#researchAtomicTheory', function(){
	research.atomicTheory();
}).on(ui.click, '#researchFutureTech', function(){
	research.futureTech();
}).on(ui.click, '#fireCannons', function(){
	var o = new Target({
		cost: 0,
		minimum: 0,
		attackName: 'cannons',
		hudMsg: lang[my.lang].hudFireCannons
	});
	action.target(o);
}).on(ui.click, '#launchMissile', function(){
	var o = new Target({
		cost: 0,
		minimum: 0,
		attackName: 'missile',
		hudMsg: lang[my.lang].hudLaunchMissile
	});
	action.target(o);
}).on(ui.click, '#launchNuke', function(){
	var o = new Target({
		cost: 0,
		minimum: 0,
		attackName: 'nuke',
		hudMsg: lang[my.lang].hudLaunchNuke
	});
	action.target(o);
});

var research = {
	masonry: function(){
		if (my.production < 40) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchMasonry.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchMasonry',
				duration: 20,
				tech: lang[my.lang].abMasonry,
				method: 'masonryDone'
			});
		});
	},
	masonryDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchMasonryDone.php'
		}).done(function(data) {
			my.tech.masonry = 1;
			research.report(data, "Masonry");
		})
	},
	construction: function(){
		if (my.production < 60) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchConstruction.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchConstruction',
				duration: 30,
				tech: lang[my.lang].abConstruction,
				method: 'constructionDone'
			});
		});
	},
	constructionDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchConstructionDone.php'
		}).done(function(data) {
			my.tech.construction = 1;
			research.report(data, "Construction");
		})
	},
	gunpowder: function(){
		if (my.production < 60) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchGunpowder.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchGunpowder',
				duration: 25,
				tech: lang[my.lang].abGunpowder,
				method: 'gunpowderDone'
			});
		});
	},
	gunpowderDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchGunpowderDone.php'
		}).done(function(data) {
			my.tech.gunpowder = 1;
			research.report(data, "Gunpowder");
		})
	},
	engineering: function(){
		if (my.production < 80) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchEngineering.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchEngineering',
				duration: 45,
				tech: lang[my.lang].abEngineering,
				method: 'engineeringDone'
			});
		});
	},
	engineeringDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchEngineeringDone.php'
		}).done(function(data) {
			my.tech.engineering = 1;
			research.report(data, "Engineering");
		})
	},
	rocketry: function(){
		if (my.production < 200) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchRocketry.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchRocketry',
				duration: 40,
				tech: lang[my.lang].abRocketry,
				method: 'rocketryDone'
			});
		});
	},
	rocketryDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchRocketryDone.php'
		}).done(function(data) {
			my.tech.rocketry = 1;
			research.report(data, "Rocketry");
		})
	},
	atomicTheory: function(){
		if (my.production < 500) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchAtomicTheory.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchAtomicTheory',
				duration: 60,
				tech: lang[my.lang].abAtomic,
				method: 'atomicTheoryDone'
			});
		});
	},
	atomicTheoryDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchAtomicTheoryDone.php'
		}).done(function(data) {
			my.tech.atomicTheory = 1;
			research.report(data, "Atomic Theory");
		})
	},
	futureTech: function(){
		if (my.production < 800) return;
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchFutureTech.php'
		}).done(function(data) {
			setProduction(data);
			animate.research({
				element: 'researchFutureTech',
				duration: 90,
				tech: lang[my.lang].abFuture,
				method: 'futureTechDone'
			});
		});
	},
	futureTechDone: function() {
		$.ajax({
			type: 'GET',
			url: app.url + 'php/researchFutureTechDone.php'
		}).done(function(data) {
			research.report(data, "Future Tech");
		})
	},
	report: function(data, tech){
		var o = {
			message: 'You have finished researching ' + tech + '.'
		}
		game.chat(o);
		if (data.cultureMsg){
			var o = {
				message: data.cultureMsg
			};
			game.chat(o);
		}
		audio.play('research');
		action.setMenu();
	}
};
var events = {
	core: (function(){
		$(window).focus(function(){
			document.title = g.defaultTitle;
			g.titleFlashing = false;
			if (g.notification.close !== undefined){
				g.notification.close();
			}
		});
		$(window).on('load', function(){
			setTimeout(function() {
				TweenMax.to('body', .3, {
					startAt: { display: 'flex', opacity: 0 },
					opacity: 1
				})
			}, 100);
			// background map
			TweenMax.to("#worldTitle", 600, {
				startAt: {
					xPercent: -50,
					yPercent: -50,
					rotation: -360
				},
				rotation: 0,
				repeat: -1,
				ease: Linear.easeNone
			});
		}).on('resize', function() {
			ui.resizeWindow();
		});
	})(),
	title: (function(){
		$("#mainWrap").on(ui.click, '.titlePlayerAccount, .lobbyAccountName', function(){
			title.who('/who '+ $(this).text());
		});
		$("#gameView").on('dragstart', 'img', function(e) {
			e.preventDefault();
		});
		$("img").on('dragstart', function(event) {
			event.preventDefault();
		});

		$("#logout").on(ui.click, function() {
			playerLogout();
			return false;
		});
		$("#login").on(ui.click, function(){
			socket.removePlayer(my.account);
			$.ajax({
				type: 'GET',
				url: app.url + 'php/deleteFromFwtitle.php'
			});
		});

		$("#titleMenu").on(ui.click, '.wars', function(){
			var gameName = $(this).data("name");
			$("#joinGame").val(gameName);
			$("#joinGamePassword").val('');
			title.joinGame();
		});
		
		function openCreateGameModal(mode){
			var e1 = document.getElementById('createGameHead'),
				e2 = document.getElementById('createRankedGameHead'),
				e3 = $("#gameName"),
				e4 = document.getElementById('createGameNameWrap'),
				e5 = document.getElementById('createGamePasswordWrap'),
				e6 = document.getElementById('createGameMaxPlayerWrap');
			
			g.rankedMode = 0;
			g.teamMode = 0;
			if (mode === 'ranked'){
				g.rankedMode = 1;
				e1.style.display = 'none';
				e2.style.display = 'block';
				e4.style.display = 'none';
				e5.style.display = 'none';
				e6.style.display = 'none';
			} else {
				e1.style.display = 'block';
				e2.style.display = 'none';
				e4.style.display = 'block';
				e5.style.display = 'block';
				e6.style.display = 'block';
			}
			if (mode === 'team'){
				g.teamMode = 1;
				e1.textContent = lang[my.lang].createTeamGameHeadLabel;
			}
			// e3.val(my.account +'_'+ ~~(Math.random()*999999)).select();
			e3.val('').select();
			$("#gamePassword").val('');
			TweenMax.to("#createGameWrap", g.modalSpeed, {
				startAt: {
					visibility: 'visible',
					y: 0,
					alpha: 0
				},
				y: 30,
				alpha: 1
			});
			title.showBackdrop(e3);
			
			/*var speed = localStorage.getItem('gameSpeed2') === null ? 15 : localStorage.getItem('gameSpeed2');
			g.speed = speed;
			$("#createGameSpeed").text(speed);*/
		}
		$('#mainWrap').on(ui.click, '.chat-join', function(){
			socket.setChannel($(this).text());
		});
		$('#create').on(ui.click, function(){
			openCreateGameModal('ffa');
		});
		$('#createRankedBtn').on(ui.click, function(){
			openCreateGameModal('ranked');
		});
		$("#createTeamBtn").on(ui.click, function(){
			openCreateGameModal('team');
		});

		$("#createGame").on(ui.click, function(){
			title.createGame();
		});
		$("#play-now-btn").on(ui.click, function(){
			title.addCpu = 1;
			title.createGameService(my.account +'_'+ Date.now(), '', 'Alpha Earth', 8, 0, 0, 20);

		});
		if (!app.isLocal) {
			$(document).on('contextmenu', function(){ return false; });
		}
		$("body").on(ui.click, '#options, #gameOptions', function(){
			title.showModal();
		}).on(ui.click, '#hotkeys', function(){
			TweenMax.to("#hotkeysModal", g.modalSpeed, {
				startAt: {
					visibility: 'visible',
					y: 0,
					alpha: 0
				},
				y: 30,
				alpha: 1
			});
			title.showBackdrop();
		}).on(ui.click, '#hide-ui', function() {
			game.toggleGameWindows(1);
		}).on(ui.click, '#toggle-flags', function() {
			game.toggleFlags();
		}).on(ui.click, '#surrender', function(e){
			surrenderMenu();
		});
		$("#hotkeysDone, #optionsDone, #cancelCreateGame").on(ui.click, function(){
			title.closeModal();
		});


		// cached values on client to reduce DB load

		$("#joinPrivateGameModal").on(ui.click, "#joinPrivateGameBtnConfirm", function(){
			title.joinGame();
		});

		// events for title-chat buttons
		$("#refresh-game-button").on(ui.click, function(){
			title.refreshGames();
		});
		$("#titleChat").on(ui.click, '.nw-link', function() {
			title.openWindow($(this).attr('href'));
		});
		$("#titleChatPlayers").on(ui.click, '#friend-status', function(){
			title.listFriends();
		}).on(ui.click, '#ignore-status', function(){
			title.listIgnore();
		});
		$("#get-help").on(ui.click, function(){
			title.help();
			$("#title-chat-input").focus();
		});
		$("#ignore-user").on(ui.click, function(){
			$("#title-chat-input").val('/ignore ').focus();
		});
		$("#share-url").on(ui.click, function(){
			$("#title-chat-input").val('/url ').focus();
		});
		$("#share-image").on(ui.click, function(){
			$("#title-chat-input").val('/img ').focus();
		});
		$("#share-video").on(ui.click, function(){
			$("#title-chat-input").val('/video ').focus();
		});
		$("#who-account").on(ui.click, function(){
			$("#title-chat-input").val('/who ').focus();
		});
		$("#add-friend").on(ui.click, function(){
			$("#title-chat-input").val('/friend ').focus();
		});
		$("#whisper-account").on(ui.click, function(){
			$("#title-chat-input").val('@').focus();
		});
		$("#change-channel").on(ui.click, function(){
			$("#title-chat-input").val('#').focus();
		});
		
		$("#body").on(ui.click, "#cancelGame", function(){
			exitGame();
		}).on(ui.click, "#startGame", function(){
			lobby.startGame();
		}).on(ui.click, '.addFriend', function(){
			title.toggleFriend($(this).data('account'));
		}).on(ui.click, '.ribbon', function(){
			var x = $(this).data('ribbon') * 1;
			g.chat(lang[my.lang].ribbonTitle[x] +": "+ lang[my.lang].ribbonDescription[x], 'chat-warning');
		});
		$("#toggleNation").on(ui.click, function(){
			title.configureNation();
		});
		$("#joinPrivateGameBtn").on(ui.click, function(){
			var e = $("#joinGame");
			e.val('');
			TweenMax.to('#joinPrivateGameModal', g.modalSpeed, {
				startAt: {
					visibility: 'visible',
					y: 0,
					alpha: 0
				},
				y: 30,
				alpha: 1,
				onComplete: function(){
					e.focus();
				}
			});
			title.showBackdrop();
		});
		$("#mainWrap").on(ui.click, ".unlockGameBtn", function(){ 
			title.closeModal();
			TweenMax.to('#unlockGame', g.modalSpeed, {
				startAt: {
					visibility: 'visible',
					y: 0,
					alpha: 0
				},
				y: 30,
				alpha: 1
			});
			setTimeout(function(){
				$("#card-number").focus();
			}, 100);
			title.showBackdrop();
		});
		$("#leaderboardBtn").on(ui.click, function(){
			TweenMax.to('#leaderboard', g.modalSpeed, {
				startAt: {
					visibility: 'visible',
					top: 0,
					alpha: 0
				},
				top: 30,
				alpha: 1
			});
			title.showBackdrop();
			title.getLeaderboard('Ranked');
		});
		// leaderboard buttons
		$("#leaderboardFfaBtn").on(ui.click, function(){
			title.getLeaderboard('FFA');
		});
		$("#leaderboardRankedBtn").on(ui.click, function(){
			title.getLeaderboard('Ranked');
		});
		$("#leaderboard-trips-btn").on(ui.click, function(){
			title.getLeaderboard('Trips');
		});
		$("#leaderboard-quads-btn").on(ui.click, function(){
			title.getLeaderboard('Quads');
		});
		$("#leaderboard-pents-btn").on(ui.click, function(){
			title.getLeaderboard('Pents');
		});
		$("#leaderboardTeamBtn").on(ui.click, function(){
			title.getLeaderboard('Team');
		});

		$("#window-select-wrap").on(ui.click, '.window-select', function() {
			ui.setWindow(this.id);
		});
		$("#bible-status").on(ui.click, function() {
			stats.setBibleMode($(this).prop('checked'));
		});
		$("#flagDropdown").on(ui.click, '.flagSelect', function(e){
			my.selectedFlag = $(this).find('a').data('flag').trim();
			my.selectedFlagFull = my.selectedFlag + ui.getFlagExt(my.selectedFlag);
			$("#updateNationFlag")
				.attr("src", "images/flags/" + my.selectedFlagFull)
				.css("display", "block");
			g.lock(1);
			$.ajax({
				url: app.url + 'php/updateFlag.php',
				data: {
					flag: my.selectedFlagFull
				}
			}).done(function(data) {
				my.flag = my.selectedFlagFull;
				$(".nationFlag").attr({
					src: "images/flags/" + my.selectedFlagFull,
					title: my.selectedFlag
				});
				g.msg(lang[my.lang].flagChanged + my.selectedFlag);
				document.getElementById('selectedFlag').textContent = my.selectedFlag;
				$("[title]")
					.tooltip('fixTitle')
					.tooltip({
						animation: false
					});
			}).always(function(){
				g.unlock(1);
				TweenMax.to("#updateNationFlag", 1, {
					startAt: {
						alpha: 0
					},
					alpha: 1
				});
			});
			e.preventDefault();
		});

		$("#lobbyPlayers").on(ui.click, '.flagSelect', function(e){
			var val = $(this).find('a').data('flag').trim();
			void 0;
			lobby.cpuFlag = val;
			$("#cpuFlag").html(val);
			e.preventDefault();
		});

		$("#submitNationName").on("mousedown", function(){
			title.submitNationName();
		});
		$("#updateNationName").on("focus", function(){
			g.focusUpdateNationName = true;
		}).on("blur", function(){
			g.focusUpdateNationName = false;
		});
		$("#refreshGameWrap").on("focus", "#gameName", function(){
			g.focusGameName = true;
		});
		$("#refreshGameWrap").on("blur", "#gameName", function(){
			g.focusGameName = false;
		});
		$("#titleViewBackdrop, .close-btn").on(ui.click, title.closeModal);

		$("#body").on(ui.click,
			'#updateNationBtn, #configureNationDone, #leaderboardDone',
			title.closeModal
		);
		/*
		$("#autoJoinGame").on(ui.click, function(){
			$("#joinGame").val('');
			audio.play('click');
			$("#joinGamePassword").val();
			$(".wars-FFA").filter(":first").trigger(ui.click); 
			if (!$("#joinGame").val()){
				g.msg("No FFA games found!", 1.5);
			} else {
				title.joinGame();
			}
		});
		$("#joinTeamGame").on(ui.click, function(){
			$("#joinGame").val('');
			audio.play('click');
			$("#joinGamePassword").val();
			$(".wars-Team").filter(":first").trigger(ui.click); 
			if (!$("#joinGame").val()){
				g.msg("No team games found!", 1.5);
			} else {
				title.joinGame();
			}
		});
		*/
		$("#joinRankedGame").on(ui.click, function(){
			audio.play('click');
			g.lock(1);
			g.searchingGame = true;
			g.msg(lang[my.lang].rankedSearch, 0);
			(function repeat(count){
				if (count < 1 && !g.joinedGame){
					setTimeout(function(){
						if (g.searchingGame){
							repeat(++count);
						}
					}, 1000);
					// ajax call to join ranked game
					$.ajax({
						url: app.url + 'php/joinRankedGame.php'
					}).done(function(data){
						if (g.searchingGame){
							TweenMax.set(DOM.Msg, {
								opacity: 0
							});
							g.joinedGame = 1;
							g.unlock();
							g.searchingGame = false;
							title.joinGameCallback(data);
						}
					});
				} else {
					if (!g.joinedGame && g.searchingGame){
						g.msg(lang[my.lang].noRankedFound, 5);
						g.unlock();
						g.searchingGame = false;
					}
				}
			})(0);
		});
	})(),
	lobby: (function(){
		$("#chat-input-open").on(ui.click, function(){
			toggleChatMode();
		});
		$("#chat-input-send").on(ui.click, function(){
			toggleChatMode(true);
		});
		$("#lobby-chat-input").on('focus', function(){
			lobby.chatOn = true;
		}).on('blur', function(){
			lobby.chatOn = false;
		});
		$("#lobbyChatSend").on(ui.click, function(){
			lobby.sendMsg(true);
		});
		// prevents auto scroll while scrolling
		$("#lobbyChatLog").on('mousedown', function(){
			lobby.chatDrag = true;
		}).on('mouseup', function(){
			lobby.chatDrag = false;
		});
		$("#joinGameLobby").on(ui.click, '.governmentChoice', function(e){
			// changes player's own government only
			var government = $(this).data('government');
			lobby.updateGovernmentWindow(government);
			$.ajax({
				url: app.url + "php/changeGovernment.php",
				data: {
					government: government
				}
			});
		}).on(ui.click, '.cpu-choice', function(e){
			var difficulty = $(this).data('difficulty');
			void 0;
			$.ajax({
				url: app.url + "php/change-cpu-difficulty.php",
				data: {
					difficulty: difficulty,
					player: $(this).data('player')
				}
			});
		}).on(ui.click, '.playerColorChoice', function(e){
			var playerColor = $(this).data('playercolor');
			$.ajax({
				url: app.url + 'php/changePlayerColor.php',
				data: {
					playerColor: playerColor*1
				}
			}).done(function(data){
				my.playerColor = data.playerColor;
			}).fail(function(data){
				g.msg(data.statusText, 1.5);
			});
		}).on(ui.click, '.teamChoice', function(){
			var team = $(this).text().slice(5),
				player = $(this).data('player');
			void 0;
			$.ajax({
				url: app.url + 'php/changeTeam.php',
				data: {
					team: team,
					player: player
				}
			}).done(function(data) {
				if (my.player === data.player * 1) {
					my.team = data.team;
				}
			});
			
		}).on(ui.click, '#cpu-add-player', function(e){
			//console.info("Adding player");
			audio.play('click');
			lobby.addCpuPlayer();
		}).on(ui.click, '#cpu-remove-player', function(e){
			//console.info("Removing player");
			audio.play('click');
			$.ajax({
				url: app.url + 'php/cpu-remove-player.php'
			});
		});
	})(),
	map: (function(){
		if (!isFirefox){
			$("body").on("mousewheel", function(e){
				if (g.view === 'game'){
					setMousePosition(e.offsetX, e.offsetY);
					worldMap[0].applyBounds();
				}
			});
			$("#worldWrap").on("mousewheel", function(e){
				e.originalEvent.wheelDelta > 0 ? mouseZoomIn(e) : mouseZoomOut(e);
				worldMap[0].applyBounds();
			});
		} else {
			$("body").on("DOMMouseScroll", function(e){
				if (g.view === 'game'){
					setMousePosition(e.originalEvent.layerX, e.originalEvent.layerY);
					worldMap[0].applyBounds();
				}
			});
			$("#worldWrap").on("DOMMouseScroll", function(e){
				e.originalEvent.detail > 0 ? mouseZoomOut(e) : mouseZoomIn(e);
				worldMap[0].applyBounds();
			});
		}

		$("#worldWrap").on("mousemove", function(e){
			/*if (isFirefox){
				setMousePosition(e.originalEvent.layerX, e.originalEvent.layerY);
			} else {*/
				setMousePosition(e.offsetX, e.offsetY);
				//console.info(e.offsetX, e.offsetY);
			//}
		});
		$("#createGameWrap").on(ui.click, '.mapSelect', function(e){
			var x = $(this).text();
			var key = x.replace(/ /g,'');
			g.map.name = x;
			g.map.key = key;
			document.getElementById('createGameMap').innerHTML = x;
			// $('#createGameTiles').html(title.mapData[key].tiles);
			document.getElementById('createGamePlayers').innerHTML = title.mapData[key].players;
			var e1 = $("#gamePlayers");
			e1.attr("max", title.mapData[key].players);
			if (e1.val() * 1 > title.mapData[key].players){
				e1.val(title.mapData[key].players);
			}
			e.preventDefault();
		});
		$("#mainWrap").on(ui.click, '.gameSelect', function(e){
			e.preventDefault();
		});
		/*$("#mainWrap").on(ui.click, '.speedSelect', function(e){
			var x = $(this).text()*1;
			g.speed = x;
			$("#createGameSpeed").text(x);
			localStorage.setItem('gameSpeed2', x);
			e.preventDefault();
		});*/
	})(),
	audio: (function(){
		$("#bgmusic").on('ended', function() {
			var x = document.getElementById('bgmusic');
			x.currentTime = 0;
			x.play();
		});
		$("#bgamb1").on('ended', function() {
			var x = document.getElementById('bgamb1');
			x.currentTime = 0;
			x.play();
		});
		$("#bgamb2").on('ended', function() {
			var x = document.getElementById('bgamb2');
			x.currentTime = 0;
			x.play();
		});
	})(),
	game: (function(){
		$("#cancelSurrenderButton").on(ui.click, function(){
			audio.play('click');
			document.getElementById('surrenderScreen').style.display = 'none';
		});
		$("#surrenderButton").on(ui.click, function(){
			surrender();
		});
	})()
};


$(document).on('keydown', function(e){
	var x = e.keyCode;
	void 0;
	if (e.ctrlKey){
		if (x === 82){
			// ctrl+r refresh
			return false;
		}
	}
	else {
		if (g.view === 'title'){
			if (!g.isModalOpen && isLoggedIn){
				$("#title-chat-input").focus();
			}
			if (x === 27) {
				title.toggleModal();
			}
		}
		else if (g.view === 'lobby'){
			$("#lobby-chat-input").focus();
			if (x === 27) {
				title.toggleModal();
			}
		}
		else {
			// game
			if (x === 86){
				// v
				if (!g.chatOn){
					game.toggleGameWindows(1);
				}
			}
			// STUFF BEFORE HERE CAN BE DONE IN SPECTATE MODE
			if (g.spectateStatus) return;
			if (x === 9){
				// tab
				if (!e.shiftKey){
					my.nextTarget(false);
				} else {
					my.nextTarget(true);
				}
				e.preventDefault();
			}
			else if (x === 27) {
				!my.attackOn && !g.chatOn && title.toggleModal();
			}
		}
	}
}).on('keyup', function(e) {
	var x = e.keyCode;
	void 0;
	if (g.view === 'title'){
		if (x === 13){
			if (g.focusUpdateNationName){
				title.submitNationName();
			} else if (g.focusGameName){
				title.createGame();
			} else if (title.chatOn){
				if (x === 13){
					// enter - sends chat
					title.sendMsg();
				}
			} else if (title.createGameFocus){
				title.createGame();
			}
		}
	}
	else if (g.view === 'lobby'){
		if (lobby.chatOn){
			if (x === 13){
				// enter - sends chat
				lobby.sendMsg();
			}
		}
	// game hotkeys
	}
	else if (g.view === 'game'){
		if (g.chatOn){
			if (x === 13 || x === 27){
				// enter/esc - sends chat
				toggleChatMode(true);
			}
		}
		else {
			if (x === 13){
				// enter
				toggleChatMode();
			}
			if (x === 27){
				// esc
				if (my.attackOn) {
					my.attackOn = false;
					my.attackName = '';
					my.clearHud();
					ui.showTarget(DOM['land' + my.tgt]);
				}
			}
			// STUFF BEFORE HERE CAN BE DONE IN SPECTATE MODE
			if (g.spectateStatus) return;
			if (x === 65){
				// a
				var o = new Target();
				action.target(o);
			}
			else if (x === 83){
				// s
				var o = new Target({
					cost: 1, 
					attackName: 'splitAttack',
					hudMsg: lang[my.lang].hudSplitAttack,
					splitAttack: true
				});
				void 0;
				action.target(o);
			}
			else if (x === 68){
				// d
				if (!g.keyLock){
					action.deploy();
				}
			}
			else if (x === 82){
				// r
				if (!g.keyLock){
					if (e.ctrlKey){
						var x = my.lastReceivedWhisper;
						if (x){
							if (g.view === 'title'){
								$("#title-chat-input").val('/w ' + x + ' ').focus();
							}
							else if (g.view === 'lobby'){
								$("#lobby-chat-input").val('/w ' + x + ' ').focus();
							}
							else {
								if (!g.chatOn){
									toggleChatMode();
								}
								$("#chat-input").val('/w ' + x + ' ').focus();
							}
						}
						return false;
					}
					else {
						action.rush();
					}
				}
			}
			else if (x === 89){
				// y
				research.masonry();
			}
			else if (x === 79){
				// o
				research.construction();
			}
			else if (x === 69){
				// e
				research.engineering();
			}
			else if (x === 71){
				// g
				research.gunpowder();
			}
			else if (x === 75){
				// k
				research.rocketry();
			}
			else if (x === 84){
				// t
				research.atomicTheory();
			}
			else if (x === 70){
				// f
				research.futureTech();
			}
			else if (x === 66){
				// b
				action.upgradeTileDefense();
			}
			else if (x === 67 && my.tech.gunpowder){
				// c
				var o = new Target({
					cost: 0,
					minimum: 0,
					attackName: 'cannons',
					hudMsg: lang[my.lang].hudFireCannons
				});
				action.target(o);
			}
			else if (x === 77 && my.tech.rocketry){
				// m
				var o = new Target({
					cost: 0,
					minimum: 0,
					attackName: 'missile',
					hudMsg: lang[my.lang].hudLaunchMissile
				});
				action.target(o);
			}
			else if (x === 78 && my.tech.atomicTheory){
				// n
				var o = new Target({
					cost: 0,
					minimum: 0,
					attackName: 'nuke',
					hudMsg: lang[my.lang].hudLaunchNuke
				});
				action.target(o);
			}
		}
	}
});

/*$("#dictatorAvatar").on('change', function(e){
	 var e2 = $("#uploadErr");
	 function imgError(msg){
		e2.html(msg);
		audio.play('error');
	 }
	 var file = e.target.files[0];
	 var reader = new FileReader();
	 reader.readAsDataURL(file);
	 if (file.type !== 'image/jpeg'){
		imgError('Wrong file type! Image must be in jpg format.');
	 }
	 else {
		 reader.addEventListener("load", function(){
			if (reader.result.length < 70000){
				$.ajax({
					url: app.url + "php/uploadDictator.php",
					type: "POST",
					data: {
						uri: reader.result
					},
					beforeSend: function(){
						e2.text('');
					}
				}).done(function(data){
					e2.text("Avatar updated successfully!");
					document.getElementById('configureAvatarImage').src = reader.result;
				}).fail(function(data){
					imgError(data.statusText);
				});
			} else {
				imgError('File size too large! Image must be less than 40 kb.');
				e2.html();
			}
		 }, false);
	 }
 });*/
if (app.isApp) {
	var gui = require('nw.gui');
	win = gui.Window.get();
	win.on('close', function() {
		this.hide(); // pretend
		title.closeGame();
		this.close(true);
	})
}
var ai = {
	structureDefense: [1, 1.5, 2, 2.5, 3],
	scoreTargetAttack: function(o){
		// should AI attack this adjacent target?
		var score = 50;
		// score player
		if (!g.teamMode){
			if (o.defender === 0){
				// barb/empty
				score += 50;
			} else if (o.attacker !== o.defender){
				// another player
				score += 25;
			} else {
				// mine
				score -= 10;
			}
			if (o.defender === ui.currentLoser && ui.currentLoser !== o.attacker) {
				score += 250;
			}
		}
		else {
			//
			if (game.player[o.attacker].team === game.player[o.defender].team) {
				score -= 25;
			}
			else {
				if (!o.defenderUnits) {
					// empty
					score += 50;
				}
				else if (o.defender === 0){
					// barb
					score += 10;
				}
				else if (o.attacker === o.defender){
					// mine
					score -= 5;
				}
				if (o.defender === ui.currentLoser && ui.currentLoser !== o.attacker) {
					score += 250;
				}
			}
		}
		// defense
		if (o.attacker !== o.defender){
			score -= o.defenderUnits * (ai.structureDefense[o.defense + o.capital]);
			// food
			score += ~~((o.food) + Math.random() * 10 - 5);
		}
		return score;
	},
	getAttackTarget: function(player){
		var atkTile = -1,
			defTile = -1,
			maxScore = 0;
		
		game.tiles.forEach(function(d, index){
			if (d.player === player && d.units >= 5){
				var tileScore = 0;

				if (d.capital) {
					tileScore -= 20;
				}
				// cpu's tile
				d.adj.forEach(function(defender){
					var z = game.tiles[defender];
					var score = ai.scoreTargetAttack({
						attacker: player,
						defender: z.player,
						attackerUnits: d.units,
						defenderUnits: z.units,
						unitDiff: (d.units - z.units),
						defense: z.defense,
						food: z.food,
						production: z.production,
						culture: z.culture,
						capital: z.capital
					});
					if (z.player === ui.currentLoser && ui.currentLoser !== player) {
						// try to eliminate last place player
						score += 250;
					}
					if (tileScore + score > maxScore){
						maxScore = score;
						atkTile = index;
						defTile = defender;
					}
				});
			}
		});
		//console.info("ATTACKING FROM: ", atkTile, defTile, maxScore);
		return [atkTile, defTile, maxScore];
	},
	scoreTargetWeapon: function(o){
		var score = 50;
		// score player
		if (!g.teamMode){
			if (o.defender === 0){
				// barb/empty
				score += 10;
			} else if (o.attacker !== o.defender){
				// another player
				score += 25;
			} else {
				// mine
				score -= 10;
			}
		}
		else {
			if (game.player[o.attacker].team === game.player[o.defender].team) {
				score -= 25;
			}
			else {
				if (o.defender === 0){
					// barb/empty
					score -= 10;
				} else if (game.player[o.attacker].team !== game.player[o.defender].team){
					// enemy
					score += 30;
				} else if (o.attacker === o.defender){
					// mine
					score -= 5;
				}
			}
		}
		// defense
		if (o.attacker !== o.defender){
			score -= o.unitDiff;
			// food
			score += ~~((o.food) + Math.random()*10 - 5);
		}
		return score;
	},
	getWeaponTarget: function(player){
		var atkTile = -1,
			defTile = -1,
			maxScore = 0;
		
		game.tiles.forEach(function(d, index){
			if (d.player === player){
				// cpu's tile
				d.adj.forEach(function(defender){
					var z = game.tiles[defender];
					var score = ai.scoreTargetWeapon({
						attacker: player,
						defender: z.player,
						attackerUnits: d.units,
						unitDiff: (d.units - z.units),
						defense: z.defense,
						food: z.food,
						production: z.production,
						culture: z.culture,
						capital: z.capital
					});
					if (score > maxScore){
						maxScore = score;
						atkTile = index;
						defTile = defender;
					}
				});
			}
		});
		//console.info("ATTACKING FROM: ", atkTile, defTile, maxScore);
		return [atkTile, defTile, maxScore];
	},
	getRangedWeaponTarget: function(player){
		var atkTile = -1,
			defTile = -1,
			maxScore = 0;
		
		game.tiles.forEach(function(tile, index){
			if (tile.player !== player){
				var score = 50;
				if (g.teamMode && game.player[tile.player].team === game.player[player].team) {
					score -= 25;
				}
				else {
					score += tile.units;
					score += tile.defense * 20;
					if (tile.capital){
						score += 5;
					}
					if (!tile.player){
						score = 0;
					}
				}
				if (score > maxScore){
					maxScore = score;
					defTile = index;
				}
			}
			else {
				atkTile = index;
			}
		});
		//console.info("ATTACKING FROM: ", atkTile, defTile, maxScore);
		return [atkTile, defTile, maxScore];
	},
	attack: function(i, d, o){
		var tiles = ai.getAttackTarget(d.player);
		if (tiles[0] > -1){
			var obj = {
				loop: i,
				attacker: tiles[0],
				defender: tiles[1],
				player: d.player,
				defGovernment: game.player[game.tiles[tiles[1]].player].government
			};
			if (i === 0) {
				obj = Object.assign({
					moves: (4 + ~~(o.food / 50)),
					food: o.food,
					production: o.production,
					culture: o.culture
				}, obj);
			}
			if (o.deployTile > -1) {
				obj = Object.assign({
					deployTile: o.deployTile,
					newUnits: o.newUnits,
				}, obj);
			}

			$.ajax({
				url: app.url + 'php/attack-ai.php',
				data: obj
			});
		}
		else {
			void 0;

			$.ajax({
				url: app.url + 'php/deploy-ai.php',
				data: {
					newUnits: 5,
					deployTile: ai.getDeployTarget(d.player)
				}
			});
		}
	},
	scoreTargetDeploy: function(o){
		var score = 50;
		if (!o.player){
			// barb/empty
			score += 20;
		}
		else if (!o.sameTeam){
			// enemy player - try to get him!
			score += 10;
			// where are units needed?
			if (o.player && !o.unitDiff){
				score += o.unitDiff * -1;
			}
		}
		else if (o.sameTeam){
			// my tile - don't care about this dude!
			score -= 10;
		}
		if (o.player === ui.currentLoser) {
			score += 150;
		}
		// food
		score += ~~(Math.random()*6 - 3);
		return score;
	},
	getDeployTarget: function(cpuPlayer){
		var tile = -1,
			cpuTeam = g.team ? game.player[cpuPlayer].team : 0,
			maxScore = 0;
		
		game.tiles.forEach(function(d, index){
			var cpuUnits = game.tiles[index].units,
				score = 0,
				tileScore = 0,
				adjTiles = 0,
				tileDefense = d.defense + (d.capital ? 1 : 0);
			//console.info(index, d.player === cpuPlayer, d.units, d.flag);
			if (d.player === cpuPlayer && d.units < 65535 && d.flag){
				// cpu's tile
				// less than 65535
				// not a barb or empty
				// original tile
				if (d.capital && cpuUnits < 24) {
					tileScore += 20;
				}
				d.adj.forEach(function(defender){
					adjTiles++;
					var z = game.tiles[defender];
					z.sameTeam = g.teamMode ?
						cpuTeam === game.player[z.player].team : cpuPlayer === z.player;
					z.unitDiff = cpuUnits - z.units;
					z.cpuUnits = cpuUnits;
					z.tileDefense = tileDefense;
					score += ai.scoreTargetDeploy(z);
				});
				var sum = tileScore + ~~(score/adjTiles);
				if (sum > maxScore){
					maxScore = sum;
					tile = index;
				}
			}
		});
		// console.info('DEPLOYING TO: ', game.tiles[tile].name, maxScore);
		return tile;
	},
	getDefenseTarget: function(player){
		var tile = -1,
			maxScore = 0;
		
		game.tiles.forEach(function(d, index){
			var score = 0;
			//console.info(index, d.player === cpuPlayer, d.units, d.flag);
			if (d.player === player && d.units < 65535 && d.flag){
				// cpu's tile
				// less than 65535
				// not a barb or empty
				score += d.units;
				score += ( (3 - d.defense) * 10);
				if (score > maxScore){
					maxScore = score;
					tile = index;
				}
			}
		});
		//console.info('DEPLOYING TO: ', tile);
		return tile;
	},
	getDeployData: function(d, o, multiplier){
		if (multiplier) {
			o.food *= multiplier;
		}
		var newUnits = Math.ceil((o.food / 12) + (g.resourceTick / 5) + 2);
		//console.info('AI.DEPLOY', multiplier, newUnits);
		var deployObj = {
			deployTile: ai.getDeployTarget(d.player),
			newUnits: newUnits
		};
		return deployObj;
	},
	getResourceTotal: function(player){
		var o = {
			food: 0,
			production: 0,
			culture: 0
		}
		game.tiles.forEach(function(tile){
			if (player === tile.player){
				o.food += tile.food;
				o.production += tile.production;
				o.culture += tile.culture;
			}
		}); 
		return o;
	},
	weaponDelay: function(){
		return Math.random() * 11000 + 1000;
	},
	attackDelay: function(loop, d) {
		// ensures a clean stagger of CPU turns
		var divTurn = (g.speed*1000) / ai.attackMax[d.difficultyShort],
			t = loop * divTurn + ( loop * ((divTurn - 500) / 8) ) + ((d.player/8) * divTurn);
		return t;
	},
	fireCannons: function(d){
		var tiles = ai.getWeaponTarget(d.player);
		if (tiles[0] > -1){
			$.ajax({
				url: app.url + 'php/ai-fireCannons.php',
				data: {
					attacker: tiles[0],
					defender: tiles[1]
				}
			});
		}
	},
	launchMissile: function(d){
		var tiles = ai.getRangedWeaponTarget(d.player);
		if (tiles[0] > -1){
			$.ajax({
				url: app.url + 'php/ai-launchMissile.php',
				data: {
					attacker: tiles[0],
					defender: tiles[1]
				}
			}).done(function(){
				setTimeout(function(){
					$.ajax({
						url: app.url + 'php/ai-launchMissileHit.php',
						data: {
							account: d.account,
							attacker: tiles[0],
							defender: tiles[1]
						}
					});
				}, 1000);
			});
		}
	},
	launchNuke: function(d){
		var tiles = ai.getRangedWeaponTarget(d.player);
		if (tiles[0] > -1){
			$.ajax({
				url: app.url + 'php/ai-launchNuke.php',
				data: {
					attacker: tiles[0],
					defender: tiles[1]
				}
			}).done(function(){
				setTimeout(function(){
					$.ajax({
						url: app.url + 'php/ai-launchNukeHit.php',
						data: {
							account: d.account,
							defender: tiles[1]
						}
					});
				}, 6000);
			});
		}
	},
	upgradeTileDefense: function(d){
		var tile = ai.getDefenseTarget(d.player);
		if (tile > -1){
			$.ajax({
				url: app.url + 'php/ai-upgradeTileDefense.php',
				data: {
					target: tile,
					account: d.account
				}
			});
		}
	},
	// 1 mod this
	deployRate: {
		VeryEasy: 6, 
		Easy: 5,
		Normal: 4,
		Hard: 4,
		VeryHard: 3,
		Mania: 2,
		Juggernaut: 1
	},
	// bonus deploy for this amount of food
	deployFood: {
		VeryEasy: 50, 
		Easy: 40,
		Normal: 30,
		Hard: 22,
		VeryHard: 15,
		Mania: 10,
		Juggernaut: 5
	},
	// number of bonus attacks
	attackFood: {
		VeryEasy: 40,
		Easy: 30,
		Normal: 50,
		Hard: 40,
		VeryHard: 30,
		Mania: 20,
		Juggernaut: 10
	},
	// max attack/CPU
	attackMax: {
		VeryEasy: 2,
		Easy: 2,
		Normal: 2,
		Hard: 2,
		VeryHard: 3,
		Mania: 3,
		Juggernaut: 3
	},
	// guaranteed attacks
	attackBaseTurns: {
		VeryEasy: 1,
		Easy: 1,
		Normal: 2,
		Hard: 2,
		VeryHard: 2,
		Mania: 2,
		Juggernaut: 2
	},
	unlockNuke: {
		VeryEasy: 250, 
		Easy: 150,
		Normal: 100,
		Hard: 90,
		VeryHard: 80,
		Mania: 50,
		Juggernaut: 20
	},
	unlockMissile: {
		VeryEasy: 100, 
		Easy: 65,
		Normal: 50,
		Hard: 40,
		VeryHard: 30,
		Mania: 20,
		Juggernaut: 10
	},
	unlockCannons: {
		VeryEasy: 50, 
		Easy: 30,
		Normal: 20,
		Hard: 15,
		VeryHard: 10,
		Mania: 5,
		Juggernaut: 0
	},
	missileRate: {
		VeryEasy: 1,
		Easy: .95,
		Normal: .9,
		Hard: .85,
		VeryHard: .8,
		Mania: .75,
		Juggernaut: .7
	},
	cannonRate: {
		VeryEasy: .8,
		Easy: .75,
		Normal: .7,
		Hard: .65,
		VeryHard: .6,
		Mania: .55,
		Juggernaut: .5
	},
	unlockStructures: {
		VeryEasy: 30, 
		Easy: 20,
		Normal: 10,
		Hard: 8,
		VeryHard: 5,
		Mania: 2,
		Juggernaut: 0
	},
	takeTurn: function(d){
		//console.info('TAKING TURN', d.player, d.account);
		var o = ai.getResourceTotal(d.player);
		// attack
		var turns = Math.ceil(o.food / ai.attackFood[d.difficultyShort]) + ai.attackBaseTurns[d.difficultyShort];
		if (turns > ai.attackMax[d.difficultyShort]){
			turns = ai.attackMax[d.difficultyShort];
		}
		for (var i=0; i<turns; i++){
			(function(i, d){
				setTimeout(function(){
					if (i + 1 === turns &&
						g.resourceTick % ai.deployRate[d.difficultyShort] === 0) {
						// bonus deploy
						var multiplier = ~~(o.food / ai.deployFood[d.difficultyShort]),
							deployObj = ai.getDeployData(d, o, multiplier);
						o = Object.assign(deployObj, o);
					}
					ai.attack(i, d, o);
					//console.info('executing turn: ', Date.now());
				}, ai.attackDelay(i, d));
			})(i, d);
		}
		var usingNuke = 0;
		if (g.resourceTick > ai.unlockNuke[d.difficultyShort]){
			if (Math.random() > .95){
				usingNuke = 1;
				setTimeout(function(){
					ai.launchNuke(d);
				}, ai.weaponDelay());
			}
		}
		if (!usingNuke){
			if (g.resourceTick > ai.unlockMissile[d.difficultyShort]){
				if (Math.random() > ai.missileRate[d.difficultyShort]){
					// var len = Math.ceil(o.food / 60);
					setTimeout(function(){
						ai.launchMissile(d);
					}, ai.weaponDelay());
				}
			}
			else if (g.resourceTick > ai.unlockCannons[d.difficultyShort]){
				if (Math.random() > ai.cannonRate[d.difficultyShort]){
					/*var len = Math.ceil(o.food / 30);
					for (var i=0; i<len; i++){
					}*/
					setTimeout(function(){
						ai.fireCannons(d);
					}, ai.weaponDelay());
				}
			}
		}
		// defense
		if (g.resourceTick > ai.unlockStructures[d.difficultyShort]){
			if (Math.random() > .875){
				setTimeout(function(){
					ai.upgradeTileDefense(d);
				}, ai.weaponDelay());
			}
		}
	}
};
})(
	$,
		Math,
		document,
		location,
		TweenMax,
		TimelineMax,
		Power0,
		Power1,
		Power2,
		Power3,
		Power4,
		Back,
		Elastic,
		Bounce,
		SteppedEase,
		Circ,
		Expo,
		Sine,
		setTimeout,
		setInterval,
		clearTimeout,
		clearInterval,
		window.webkitRequestAnimationFrame === undefined ? undefined : webkitRequestAnimationFrame,
		window.webkitCancelAnimationFrame === undefined ? undefined : webkitCancelAnimationFrame,
		getComputedStyle,
		requestAnimationFrame,
		cancelAnimationFrame,
		window,
		Array,
		JSON,
		Date,
		Object
);